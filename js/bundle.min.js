/**
 * Project-specific code is Copyright (c) 2017 Cameron Beccario
 *
 * See https://earth.nullschool.net/js/bundle.js for a readable version of this source, including licenses.
 * See https://github.com/cambecc/earth for a free version of this project.
 */
!function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){!function(e,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,n,i){e.Backbone=r(e,i,t,n)});else if("undefined"!=typeof n){var i=t("underscore");r(e,n,i)}else e.Backbone=r(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(t,e,n,r){var i=t.Backbone,o=[],a=(o.push,o.slice);o.splice;e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(t,e,n){if(!s(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,r){if(!s(this,"once",t,[e,r])||!e)return this;var i=this,o=n.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var i,o,a,u,c,l,f,h;if(!this._events||!s(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(u=t?[t]:n.keys(this._events),c=0,l=u.length;c<l;c++)if(t=u[c],a=this._events[t]){if(this._events[t]=i=[],e||r)for(f=0,h=a.length;f<h;f++)o=a[f],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!s(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&l(n,e),r&&l(r,arguments),this},stopListening:function(t,e,r){var i=this._listeningTo;if(!i)return this;var o=!e&&!r;r||"object"!=typeof e||(r=this),t&&((i={})[t._listenId]=t);for(var a in i)t=i[a],t.off(e,r,this),(o||n.isEmpty(t._events))&&delete this._listeningTo[a];return this}},c=/\s+/,s=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var o=n.split(c),a=0,u=o.length;a<u;a++)t[e].apply(t,[o[a]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],u=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,u);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},f={listenTo:"on",listenToOnce:"once"};n.each(f,function(t,e){u[e]=function(e,r,i){var o=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=n.uniqueId("l"));return o[a]=e,i||"object"!=typeof r||(i=this),e[t](r,i,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(e,u);var h=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var i,o,a,u,c,s,l,f;if(null==t)return this;if("object"==typeof t?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;a=r.unset,c=r.silent,u=[],s=this._changing,this._changing=!0,s||(this._previousAttributes=n.clone(this.attributes),this.changed={}),f=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],n.isEqual(f[i],e)||u.push(i),n.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,a?delete f[i]:f[i]=e;if(!c){u.length&&(this._pending=r);for(var h=0,d=u.length;h<d;h++)this.trigger("change:"+u[h],this,f[u[h]],r)}if(s)return this;if(!c)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)n.isEqual(i[o],e=t[o])||((r||(r={}))[o]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(n){return!!e.set(e.parse(n,t),t)&&(r&&r(e,n,t),void e.trigger("sync",e,n,t))},I(this,t),this.sync("read",this,t)},save:function(t,e,r){var i,o,a,u=this.attributes;if(null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),void 0===r.parse&&(r.parse=!0);var c=this,s=r.success;return r.success=function(t){c.attributes=u;var e=c.parse(t,r);return r.wait&&(e=n.extend(i||{},e)),!(n.isObject(e)&&!c.set(e,r))&&(s&&s(c,t,r),void c.trigger("sync",c,t,r))},I(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=i),a=this.sync(o,this,r),i&&r.wait&&(this.attributes=u),a},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&i(),r&&r(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;I(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1)}});var d=["keys","values","pairs","invert","pick","omit"];n.each(d,function(t){h.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(p.prototype,u,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var r=!n.isArray(t);t=r?[t]:n.clone(t),e||(e={});var i,o,a,u;for(i=0,o=t.length;i<o;i++)u=t[i]=this.get(t[i]),u&&(delete this._byId[u.id],delete this._byId[u.cid],a=this.indexOf(u),this.models.splice(a,1),this.length--,e.silent||(e.index=a,u.trigger("remove",u,this,e)),this._removeReference(u,e));return r?t[0]:t},set:function(t,e){e=n.defaults({},e,v),e.parse&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?t?[t]:[]:n.clone(t);var i,o,a,u,c,s,l,f=e.at,d=this.model,p=this.comparator&&null==f&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=e.add,_=e.merge,x=e.remove,k=!(p||!w||!x)&&[];for(i=0,o=t.length;i<o;i++){if(c=t[i]||{},a=c instanceof h?u=c:c[d.prototype.idAttribute||"id"],s=this.get(a))x&&(b[s.cid]=!0),_&&(c=c===u?u.attributes:c,e.parse&&(c=s.parse(c,e)),s.set(c,e),p&&!l&&s.hasChanged(g)&&(l=!0)),t[i]=s;else if(w){if(u=t[i]=this._prepareModel(c,e),!u)continue;m.push(u),this._addReference(u,e)}u=s||u,!k||!u.isNew()&&b[u.id]||k.push(u),b[u.id]=!0}if(x){for(i=0,o=this.length;i<o;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,e)}if(m.length||k&&k.length)if(p&&(l=!0),this.length+=m.length,null!=f)for(i=0,o=m.length;i<o;i++)this.models.splice(f+i,0,m[i]);else{k&&(this.models.length=0);var E=k||m;for(i=0,o=E.length;i<o;i++)this.models.push(E[i])}if(l&&this.sort({silent:!0}),!e.silent){for(i=0,o=m.length;i<o;i++)(u=m[i]).trigger("add",u,this,e);(l||k&&k.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e(r,n,t),r.trigger("sync",r,n,t)},I(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,i=e.success;return e.success=function(t,n){e.wait&&r.add(t,e),i&&i(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(t){p.prototype[t]=function(e,r){var i=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,i,r)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[t[e]]),r){var i=e.match(w),o=i[1],a=i[2];r=n.bind(r,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,r):this.$el.on(o,a,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className"));var r=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,i){var o=k[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||L()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var u=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),u)return u.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=e.ajax(n.extend(a,i));return r.trigger("request",r,c,i),c};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,S=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,u,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,function(n){var a=o._extractParameters(t,n);o.execute(i,a),o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),e.history.trigger("route",o,r,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(M,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var j=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,N=/msie [\w.]+/,C=/\/$/,O=/#.*$/;j.started=!1,n.extend(j.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(C,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(P,"")},start:function(t){if(j.started)throw new Error("Backbone.history has already been started");j.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,o=N.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(R,"/"),o&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),j.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!j.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(O,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new j;var F=function(t,e){var r,i=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,t&&n.extend(r.prototype,t),r.__super__=i.prototype,r};h.extend=p.extend=E.extend=b.extend=j.extend=F;var L=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return e})},{underscore:20}],2:[function(t,e,n){/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2015, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(){var t,r,i,o,a,u,c,s,l,f,h,d,p,v,g,m,y,b,w,_,x,k,E,M,T,S,A,j,P,R,N,C,O,F,L,I,z,q,D,U,G,H,B,X,W,V,$,Y,K,J,Q,Z,tt,et,nt,rt,it,ot,at,ut,ct,st,lt,ft,ht,dt,pt,vt,gt,mt,yt,bt,wt,_t,xt,kt,Et,Mt=[].slice;wt=function(){var t,e,n,r,i;for(t={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,e=i.length;r<e;r++)n=i[r],t["[object "+n+"]"]=n.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),B=function(t,e,n){return null==e&&(e=0),null==n&&(n=1),t<e&&(t=e),t>n&&(t=n),t},_t=function(t){return t.length>=3?[].slice.call(t):t[0]},b=function(t){var e;for(e in t)e<3?(t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t},i=Math.PI,vt=Math.round,x=Math.cos,S=Math.floor,Z=Math.pow,X=Math.log,mt=Math.sin,yt=Math.sqrt,h=Math.atan2,$=Math.max,f=Math.abs,a=2*i,o=i/3,y=function(){return arguments[0]instanceof t?arguments[0]:function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,arguments,function(){})},l=[],"undefined"!=typeof e&&null!==e&&null!=e.exports&&(e.exports=y),"function"==typeof define&&define.amd?define([],function(){return y}):(pt="undefined"!=typeof n&&null!==n?n:this,pt.chroma=y),y.version="1.0.1",s={},u=[],c=!1,t=function(){function t(){var t,e,n,r,i,o,a,l,f;for(o=this,e=[],l=0,r=arguments.length;l<r;l++)t=arguments[l],null!=t&&e.push(t);if(a=e[e.length-1],null!=s[a])o._rgb=b(s[a](_t(e.slice(0,-1))));else{for(c||(u=u.sort(function(t,e){return e.p-t.p}),c=!0),f=0,i=u.length;f<i&&(n=u[f],!(a=n.test.apply(n,e)));f++);a&&(o._rgb=b(s[a].apply(s,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},t.prototype.toString=function(){return this.name()},t}(),/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
y.brewer=g={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},xt={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},y.colors=_=xt,q=function(){var t,e,n,i,o,a,u,c,s,l,f;return a=_t(arguments),i=a[0],t=a[1],e=a[2],void 0!==i&&3===i.length&&(u=i,i=u[0],t=u[1],e=u[2]),void 0!==i&&3===i.length&&(c=i,i=c[0],t=c[1],e=c[2]),l=(i+16)/116,s=l+t/500,f=l-e/200,s=D(s)*r.X,l=D(l)*r.Y,f=D(f)*r.Z,o=Et(3.2404542*s-1.5371385*l-.4985314*f),n=Et(-.969266*s+1.8760108*l+.041556*f),e=Et(.0556434*s-.2040259*l+1.0572252*f),[B(o,0,255),B(n,0,255),B(e,0,255),1]},D=function(t){return t>.206893034?t*t*t:(t-4/29)/7.787037},Et=function(t){return vt(255*(t<=.00304?12.92*t:1.055*Z(t,1/2.4)-.055))},r={K:18,X:.95047,Y:1,Z:1.08883},at=function(){var t,e,n,r,i,o,a,u;return r=_t(arguments),n=r[0],e=r[1],t=r[2],i=ft(n,e,t),o=i[0],a=i[1],u=i[2],[116*a-16,500*(o-a),200*(a-u)]},ht=function(t){return(t/=255)<=.04045?t/12.92:Z((t+.055)/1.055,2.4)},kt=function(t){return t>.008856?Z(t,1/3):7.787037*t+4/29},ft=function(){var t,e,n,i,o,a,u;return i=_t(arguments),n=i[0],e=i[1],t=i[2],n=ht(n),e=ht(e),t=ht(t),o=kt((.4124564*n+.3575761*e+.1804375*t)/r.X),a=kt((.2126729*n+.7151522*e+.072175*t)/r.Y),u=kt((.0193339*n+.119192*e+.9503041*t)/r.Z),[o,a,u]},y.lab=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["lab"]),function(){})},s.lab=q,t.prototype.lab=function(){return at(this._rgb)},d=function(t){var e,n,r,i,o,a,u,c,s,l,f;return t=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(y(i));return r}(),2===t.length?(s=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(i.lab());return r}(),o=s[0],a=s[1],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push(o[e]+t*(a[e]-o[e]));return r}(),y.lab.apply(y,n)}):3===t.length?(l=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(i.lab());return r}(),o=l[0],a=l[1],u=l[2],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push((1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*u[e]);return r}(),y.lab.apply(y,n)}):4===t.length?(f=function(){var e,n,r;for(r=[],n=0,e=t.length;n<e;n++)i=t[n],r.push(i.lab());return r}(),o=f[0],a=f[1],u=f[2],c=f[3],e=function(t){var e,n;return n=function(){var n,r;for(r=[],e=n=0;n<=2;e=++n)r.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*u[e]+t*t*t*c[e]);return r}(),y.lab.apply(y,n)}):5===t.length&&(n=d(t.slice(0,3)),r=d(t.slice(2,5)),e=function(t){return t<.5?n(2*t):r(2*(t-.5))}),e},y.bezier=d,y.cubehelix=function(t,e,n,r,i){var o,u;return null==t&&(t=300),null==e&&(e=-1.5),null==n&&(n=1),null==r&&(r=1),null==i&&(i=[0,1]),u=i[1]-i[0],"array"===wt(n)?(o=n[1]-n[0],0===o&&(n=n[1])):o=0,function(c){var s,l,f,h,d,p,v,g,m;return s=a*((t+120)/360+e*c),v=Z(i[0]+u*c,r),p=0!==o?n[0]+c*o:n,l=p*v*(1-v)/2,h=x(s),m=mt(s),g=v+l*(-.14861*h+1.78277*m),d=v+l*(-.29227*h-.90649*m),f=v+l*(1.97294*h),y(b([255*g,255*d,255*f]))}},y.random=function(){var e,n,r,i;for(n="0123456789abcdef",e="#",r=i=0;i<6;r=++i)e+=n.charAt(S(16*Math.random()));return new t(e)},s.rgb=function(){var t,e,n,r;e=_t(arguments),n=[];for(t in e)r=e[t],n.push(r);return n},y.rgb=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(){return this._rgb.slice(0,3)},t.prototype.rgba=function(){return this._rgb},u.push({p:15,test:function(t){var e;return e=_t(arguments),"array"===wt(e)&&3===e.length?"rgb":4===e.length&&"number"===wt(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),A=function(t){var e,n,r,i,o,a;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),a=parseInt(t,16),i=a>>16,r=a>>8&255,n=255&a,[i,r,n,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),a=parseInt(t,16),i=a>>24&255,r=a>>16&255,n=a>>8&255,e=vt((255&a)/255*100)/100,[i,r,n,e];if(null!=s.css&&(o=s.css(t)))return o;throw"unknown color: "+t},nt=function(t,e){var n,r,i,o,a,u,c;return null==e&&(e="rgb"),a=t[0],i=t[1],r=t[2],n=t[3],c=a<<16|i<<8|r,u="000000"+c.toString(16),u=u.substr(u.length-6),o="0"+vt(255*n).toString(16),o=o.substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return u+o;case"argb":return o+u;default:return u}}()},s.hex=function(t){return A(t)},y.hex=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(t){return null==t&&(t="rgb"),nt(this._rgb,t)},u.push({p:10,test:function(t){if(1===arguments.length&&"string"===wt(t))return"hex"}}),R=function(){var t,e,n,r,i,o,a,u,c,s,l,f,h,d;if(c=_t(arguments),r=c[0],l=c[1],o=c[2],0===l)u=n=t=255*o;else{for(d=[0,0,0],e=[0,0,0],h=o<.5?o*(1+l):o+l-o*l,f=2*o-h,r/=360,d[0]=r+1/3,d[1]=r,d[2]=r-1/3,i=a=0;a<=2;i=++a)d[i]<0&&(d[i]+=1),d[i]>1&&(d[i]-=1),6*d[i]<1?e[i]=f+6*(h-f)*d[i]:2*d[i]<1?e[i]=h:3*d[i]<2?e[i]=f+(h-f)*(2/3-d[i])*6:e[i]=f;s=[vt(255*e[0]),vt(255*e[1]),vt(255*e[2])],u=s[0],n=s[1],t=s[2]}return 4===arguments.length?[u,n,t,arguments[3]]:[u,n,t]},it=function(t,e,n){var r,i,o,a,u;return void 0!==t&&t.length>=3&&(a=t,t=a[0],e=a[1],n=a[2]),t/=255,e/=255,n/=255,o=Math.min(t,e,n),$=Math.max(t,e,n),i=($+o)/2,$===o?(u=0,r=Number.NaN):u=i<.5?($-o)/($+o):($-o)/(2-$-o),t===$?r=(e-n)/($-o):e===$?r=2+(n-t)/($-o):n===$&&(r=4+(t-e)/($-o)),r*=60,r<0&&(r+=360),[r,u,i]},y.hsl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["hsl"]),function(){})},s.hsl=R,t.prototype.hsl=function(){return it(this._rgb)},N=function(){var t,e,n,r,i,o,a,u,c,s,l,f,h,d,p,v,g,m;if(c=_t(arguments),r=c[0],v=c[1],m=c[2],m*=255,0===v)u=n=t=m;else switch(360===r&&(r=0),r>360&&(r-=360),r<0&&(r+=360),r/=60,i=S(r),e=r-i,o=m*(1-v),a=m*(1-v*e),g=m*(1-v*(1-e)),i){case 0:s=[m,g,o],u=s[0],n=s[1],t=s[2];break;case 1:l=[a,m,o],u=l[0],n=l[1],t=l[2];break;case 2:f=[o,m,g],u=f[0],n=f[1],t=f[2];break;case 3:h=[o,a,m],u=h[0],n=h[1],t=h[2];break;case 4:d=[g,o,m],u=d[0],n=d[1],t=d[2];break;case 5:p=[m,o,a],u=p[0],n=p[1],t=p[2]}return u=vt(u),n=vt(n),t=vt(t),[u,n,t]},ot=function(){var t,e,n,r,i,o,a,u,c;return a=_t(arguments),o=a[0],n=a[1],t=a[2],i=Math.min(o,n,t),$=Math.max(o,n,t),e=$-i,c=$/255,0===$?(r=Number.NaN,u=0):(u=e/$,o===$&&(r=(n-t)/e),n===$&&(r=2+(t-o)/e),t===$&&(r=4+(o-n)/e),r*=60,r<0&&(r+=360)),[r,u,c]},y.hsv=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["hsv"]),function(){})},s.hsv=N,t.prototype.hsv=function(){return ot(this._rgb)},J=function(t){var e,n,r;return"number"===wt(t)&&t>=0&&t<=16777215?(r=t>>16,n=t>>8&255,e=255&t,[r,n,e,1]):(console.warn("unknown num color: "+t),[0,0,0,1])},st=function(){var t,e,n,r;return r=_t(arguments),n=r[0],e=r[1],t=r[2],(n<<16)+(e<<8)+t},y.num=function(e){return new t(e,"num")},t.prototype.num=function(){return st(this._rgb)},s.num=J,u.push({p:10,test:function(t){if(1===arguments.length&&"number"===wt(t)&&t>=0&&t<=16777215)return"num"}}),k=function(t){var e,n,r,i,o,a,u,c;if(t=t.toLowerCase(),null!=y.colors&&y.colors[t])return A(y.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(u=o.slice(1,4),i=a=0;a<=2;i=++a)u[i]=+u[i];u[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(u=o.slice(1,5),i=c=0;c<=3;i=++c)u[i]=+u[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(u=o.slice(1,4),i=e=0;e<=2;i=++e)u[i]=vt(2.55*u[i]);u[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(u=o.slice(1,5),i=n=0;n<=2;i=++n)u[i]=vt(2.55*u[i]);u[3]=+u[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,u=R(r),u[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,u=R(r),u[3]=+o[4]);return u},et=function(t){var e;return e=t[3]<1?"rgba":"rgb","rgb"===e?e+"("+t.slice(0,3).map(vt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(vt).join(",")+","+t[3]+")":void 0},dt=function(t){return vt(100*t)/100},P=function(t,e){var n;return n=e<1?"hsla":"hsl",t[0]=dt(t[0]||0),t[1]=dt(100*t[1])+"%",t[2]=dt(100*t[2])+"%","hsla"===n&&(t[3]=e),n+"("+t.join(",")+")"},s.css=function(t){return k(t)},y.css=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?et(this._rgb):"hsl"===t.slice(0,3)?P(this.hsl(),this.alpha()):void 0},s.named=function(t){return A(xt[t])},u.push({p:20,test:function(t){if(1===arguments.length&&null!=xt[t])return"named"}}),t.prototype.name=function(t){var e,n;arguments.length&&(xt[t]&&(this._rgb=A(xt[t])),this._rgb[3]=1),e=this.hex();for(n in xt)if(e===xt[n])return n;return e},U=function(){var t,e,n,r;return r=_t(arguments),n=r[0],t=r[1],e=r[2],e=e*i/180,[n,x(e)*t,mt(e)*t]},G=function(){var t,e,n,r,i,o,a,u,c,s,l;return c=_t(arguments),a=c[0],r=c[1],o=c[2],s=U(a,r,o),t=s[0],e=s[1],n=s[2],l=q(t,e,n),u=l[0],i=l[1],n=l[2],[B(u,0,255),B(i,0,255),B(n,0,255)]},z=function(){var t,e,n,r,o,a;return a=_t(arguments),o=a[0],t=a[1],e=a[2],n=yt(t*t+e*e),r=(h(e,t)/i*180+360)%360,[o,n,r]},ut=function(){var t,e,n,r,i,o,a;return o=_t(arguments),i=o[0],n=o[1],e=o[2],a=at(i,n,e),r=a[0],t=a[1],e=a[2],z(r,t,e)},y.lch=function(){var e;return e=_t(arguments),new t(e,"lch")},y.hcl=function(){var e;return e=_t(arguments),new t(e,"hcl")},s.lch=G,s.hcl=function(){var t,e,n,r;return r=_t(arguments),e=r[0],t=r[1],n=r[2],G([n,t,e])},t.prototype.lch=function(){return ut(this._rgb)},t.prototype.hcl=function(){return ut(this._rgb).reverse()},tt=function(t){var e,n,r,i,o,a,u,c,s;return null==t&&(t="rgb"),c=_t(arguments),u=c[0],i=c[1],e=c[2],u/=255,i/=255,e/=255,o=1-Math.max(u,Math.max(i,e)),r=o<1?1/(1-o):0,n=(1-u-o)*r,a=(1-i-o)*r,s=(1-e-o)*r,[n,a,s,o]},w=function(){var t,e,n,r,i,o,a,u;return a=_t(arguments),e=a[0],i=a[1],u=a[2],r=a[3],1===r?[0,0,0]:(o=e>=1?0:vt(255*(1-e)*(1-r)),n=i>=1?0:vt(255*(1-i)*(1-r)),t=u>=1?0:vt(255*(1-u)*(1-r)),[o,n,t])},s.cmyk=function(){var t,e,n,r,i;return r=_t(arguments),t=r[0],n=r[1],i=r[2],e=r[3],w(t,n,i,e)},y.cmyk=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return tt(this._rgb)},s.gl=function(){var t,e,n,r,i;for(r=function(){var t,n;t=_t(arguments),n=[];for(e in t)i=t[e],n.push(i);return n}.apply(this,arguments),t=n=0;n<=2;t=++n)r[t]*=255;return r},y.gl=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var t;return t=this._rgb,[t[0]/255,t[1]/255,t[2]/255,t[3]]},ct=function(t,e,n){var r;return r=_t(arguments),t=r[0],e=r[1],n=r[2],t=W(t),e=W(e),n=W(n),.2126*t+.7152*e+.0722*n},W=function(t){return t/=255,t<=.03928?t/12.92:Z((t+.055)/1.055,2.4)},l=[],C=function(t,e,n,r){var i,o,a,u;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==wt(t)&&(t=y(t)),"object"!==wt(e)&&(e=y(e)),a=0,o=l.length;a<o;a++)if(i=l[a],r===i[0]){u=i[1](t,e,n,r);break}if(null==u)throw"color mode "+r+" is not supported";return u.alpha(t.alpha()+n*(e.alpha()-t.alpha())),u},y.interpolate=C,t.prototype.interpolate=function(t,e,n){return C(this,t,e,n)},y.mix=C,t.prototype.mix=t.prototype.interpolate,I=function(e,n,r,i){var o,a;return o=e._rgb,a=n._rgb,new t(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},l.push(["rgb",I]),t.prototype.luminance=function(t,e){var n,r,i,o;return null==e&&(e="rgb"),arguments.length?(0===t?this._rgb=[0,0,0,this._rgb[3]]:1===t?this._rgb=[255,255,255,this._rgb[3]]:(r=1e-7,i=20,o=function(n,a){var u,c;return c=n.interpolate(a,.5,e),u=c.luminance(),Math.abs(t-u)<r||!i--?c:u>t?o(n,c):o(c,a)},n=ct(this._rgb),this._rgb=(n>t?o(y("black"),this):o(this,y("white"))).rgba()),this):ct(this._rgb)},bt=function(t){var e,n,r,i;return i=t/100,i<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*X(n),e=i<20?0:-254.76935184120902+.8274096064007395*(e=i-10)+115.67994401066147*X(e)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*X(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*X(n),e=255),b([r,n,e])},lt=function(){var t,e,n,r,i,o,a,u,c;for(a=_t(arguments),o=a[0],n=a[1],t=a[2],i=1e3,r=4e4,e=.4;r-i>e;)c=.5*(r+i),u=bt(c),u[2]/u[0]>=t/o?r=c:i=c;return vt(c)},y.temperature=y.kelvin=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["temperature"]),function(){})},s.temperature=s.kelvin=s.K=bt,t.prototype.temperature=function(){return lt(this._rgb)},t.prototype.kelvin=t.prototype.temperature,y.contrast=function(e,n){var r,i,o,a;return"string"!==(o=wt(e))&&"number"!==o||(e=new t(e)),"string"!==(a=wt(n))&&"number"!==a||(n=new t(n)),r=e.luminance(),i=n.luminance(),r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)},t.prototype.darken=function(t){var e,n;return null==t&&(t=20),n=this,e=n.lch(),e[0]-=t,y.lch(e).alpha(n.alpha())},t.prototype.darker=t.prototype.darken,t.prototype.brighten=function(t){return null==t&&(t=20),this.darken(-t)},t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(t){var e,n;return null==t&&(t=20),n=this,e=n.lch(),e[1]+=t,e[1]<0&&(e[1]=0),y.lch(e).alpha(n.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=20),this.saturate(-t)},t.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),y(e[0]*t,e[1]*t,e[2]*t,t)},p=function(t,e,n){if(!p[n])throw"unknown blend mode "+n;return p[n](t,e)},v=function(t){return function(e,n){var r,i;return r=y(n).rgb(),i=y(e).rgb(),y(t(r,i),"rgb")}},T=function(t){return function(e,n){var r,i,o;for(o=[],r=i=0;i<=3;r=++i)o[r]=t(e[r],n[r]);return o}},K=function(t,e){return t},Y=function(t,e){return t*e/255},E=function(t,e){return t>e?e:t},H=function(t,e){return t>e?t:e},gt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Q=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},m=function(t,e){return 255*(1-(1-e/255)/(t/255))},M=function(t,e){return 255===t?255:(t=255*(e/255)/(1-t/255),t>255?255:t)},p.normal=v(T(K)),p.multiply=v(T(Y)),p.screen=v(T(gt)),p.overlay=v(T(Q)),p.darken=v(T(E)),p.lighten=v(T(H)),p.dodge=v(T(M)),p.burn=v(T(m)),y.blend=p,y.scale=function(t,e){var n,r,i,o,a,u,c,s,l,f,h,d,p,v,g,m,b,w,_,x,k;return s="rgb",l=y("#ccc"),p=0,a=!1,o=[0,1],r=[],h=!1,d=[],c=0,u=1,i=!1,f=0,n={},_=function(t,e){var n,i,o,a,u,c,s;if(null==t&&(t=["#ddd","#222"]),null!=t&&"string"===wt(t)&&null!=(null!=(a=y.brewer)?a[t]:void 0)&&(t=y.brewer[t]),"array"===wt(t)){for(t=t.slice(0),n=o=0,u=t.length-1;0<=u?o<=u:o>=u;n=0<=u?++o:--o)i=t[n],"string"===wt(i)&&(t[n]=y(i));if(null!=e)d=e;else for(d=[],n=s=0,c=t.length-1;0<=c?s<=c:s>=c;n=0<=c?++s:--s)d.push(n/(t.length-1))}return w(),r=t},x=function(t){return null==t&&(t=[]),o=t,c=t[0],u=t[t.length-1],w(),f=2===t.length?0:t.length-1},m=function(t){var e,n;if(null!=o){for(n=o.length-1,e=0;e<n&&t>=o[e];)e++;return e-1}return 0},k=function(t){return t},v=function(t){var e,n,r,i,a;return a=t,o.length>2&&(i=o.length-1,e=m(t),r=o[0]+(o[1]-o[0])*(0+.5*p),n=o[i-1]+(o[i]-o[i-1])*(1-.5*p),a=c+(o[e]+.5*(o[e+1]-o[e])-r)/(n-r)*(u-c)),a},b=function(t,e){var i,a,h,p,v,g,b,w,_;if(null==e&&(e=!1),isNaN(t))return l;if(e?_=t:o.length>2?(i=m(t),_=i/(f-1)):(_=h=c!==u?(t-c)/(u-c):0,_=h=(t-c)/(u-c),_=Math.min(1,Math.max(0,_))),e||(_=k(_)),v=Math.floor(1e4*_),n[v])a=n[v];else{if("array"===wt(r))for(p=g=0,w=d.length-1;0<=w?g<=w:g>=w;p=0<=w?++g:--g){if(b=d[p],_<=b){a=r[p];break}if(_>=b&&p===d.length-1){a=r[p];break}if(_>b&&_<d[p+1]){_=(_-b)/(d[p+1]-b),a=y.interpolate(r[p],r[p+1],_,s);break}}else"function"===wt(r)&&(a=r(_));n[v]=a}return a},w=function(){return n={}},_(t,e),g=function(t){var e;return e=b(t),h&&e[h]?e[h]():e},g.domain=function(t,e,n,r){var i;return null==n&&(n="e"),arguments.length?(null!=e&&(i=y.analyze(t,r),t=0===e?[i.min,i.max]:y.limits(i,n,e)),x(t),g):o},g.mode=function(t){return arguments.length?(s=t,w(),g):s},g.range=function(t,e){return _(t,e),g},g.out=function(t){return h=t,g},g.spread=function(t){return arguments.length?(p=t,g):p},g.correctLightness=function(t){return arguments.length?(i=t,w(),k=i?function(t){var e,n,r,i,o,a,u,c,s;for(e=b(0,!0).lab()[0],n=b(1,!0).lab()[0],u=e>n,r=b(t,!0).lab()[0],o=e+(n-e)*t,i=r-o,c=0,s=1,a=20;Math.abs(i)>.01&&a-- >0;)!function(){return u&&(i*=-1),i<0?(c=t,t+=.5*(s-t)):(s=t,t+=.5*(c-t)),r=b(t,!0).lab()[0],i=r-o}();return t}:function(t){return t},g):i},g.colors=function(){var e,n,r,i,a,u,c,s,l;if(i=0,a="hex",1===arguments.length&&("string"===wt(arguments[0])?a=arguments[0]:i=arguments[0]),2===arguments.length&&(i=arguments[0],a=arguments[1]),i)return function(){c=[];for(var t=0;0<=i?t<i:t>i;0<=i?t++:t--)c.push(t);return c}.apply(this).map(function(t){return g(t/(i-1))[a]()});if(t=[],s=[],o.length>2)for(n=l=1,u=o.length;1<=u?l<u:l>u;n=1<=u?++l:--l)s.push(.5*(o[n-1]+o[n]));else s=o;for(e=0,r=s.length;e<r;e++)n=s[e],t.push(g(n)[a]());return t},g},null==y.scales&&(y.scales={}),y.scales.cool=function(){return y.scale([y.hsl(180,1,.9),y.hsl(250,.7,.4)])},y.scales.hot=function(){return y.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},y.analyze=function(t,e,n){var r,i,o,a,u,c,s;if(u={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(t){null==t||isNaN(t)||(u.values.push(t),u.sum+=t,t<u.min&&(u.min=t),t>u.max&&(u.max=t),u.count+=1)},s=function(t,i){if(n(t,i))return r(null!=e&&"function"===wt(e)?e(t):null!=e&&"string"===wt(e)||"number"===wt(e)?t[e]:t)},"array"===wt(t))for(a=0,o=t.length;a<o;a++)c=t[a],s(c);else for(i in t)c=t[i],s(c,i);return u.domain=[u.min,u.max],u.limits=function(t,e){return y.limits(u,t,e)},u},y.limits=function(t,e,n){var r,i,o,a,u,c,s,l,h,d,p,v,g,m,b,w,_,x,k,E,M,T,A,j,P,R,N,C,O,F,L,I,z,q,D,U,G,H,B,W,V,Y,K,J,Q,tt,et,nt,rt,it,ot,at,ut,ct,st;if(null==e&&(e="equal"),null==n&&(n=7),"array"===wt(t)&&(t=y.analyze(t)),P=t.min,$=t.max,ot=t.sum,ct=t.values.sort(function(t,e){return t-e}),A=[],"c"===e.substr(0,1)&&(A.push(P),A.push($)),"e"===e.substr(0,1)){for(A.push(P),E=L=1,D=n-1;1<=D?L<=D:L>=D;E=1<=D?++L:--L)A.push(P+E/n*($-P));A.push($)}else if("l"===e.substr(0,1)){if(P<=0)throw"Logarithmic scales are only possible for values > 0";for(R=Math.LOG10E*X(P),j=Math.LOG10E*X($),A.push(P),E=st=1,U=n-1;1<=U?st<=U:st>=U;E=1<=U?++st:--st)A.push(Z(10,R+E/n*(j-R)));A.push($)}else if("q"===e.substr(0,1)){for(A.push(P),E=r=1,Y=n-1;1<=Y?r<=Y:r>=Y;E=1<=Y?++r:--r)I=ct.length*E/n,z=S(I),z===I?A.push(ct[z]):(q=I-z,A.push(ct[z]*q+ct[z+1]*(1-q)));A.push($)}else if("k"===e.substr(0,1)){for(C=ct.length,m=new Array(C),x=new Array(n),it=!0,O=0,w=null,w=[],w.push(P),E=i=1,K=n-1;1<=K?i<=K:i>=K;E=1<=K?++i:--i)w.push(P+E/n*($-P));for(w.push($);it;){for(M=o=0,J=n-1;0<=J?o<=J:o>=J;M=0<=J?++o:--o)x[M]=0;for(E=a=0,Q=C-1;0<=Q?a<=Q:a>=Q;E=0<=Q?++a:--a){for(ut=ct[E],N=Number.MAX_VALUE,M=u=0,tt=n-1;0<=tt?u<=tt:u>=tt;M=0<=tt?++u:--u)k=f(w[M]-ut),k<N&&(N=k,b=M);x[b]++,m[E]=b}for(F=new Array(n),M=c=0,et=n-1;0<=et?c<=et:c>=et;M=0<=et?++c:--c)F[M]=null;for(E=s=0,nt=C-1;0<=nt?s<=nt:s>=nt;E=0<=nt?++s:--s)_=m[E],null===F[_]?F[_]=ct[E]:F[_]+=ct[E];for(M=l=0,rt=n-1;0<=rt?l<=rt:l>=rt;M=0<=rt?++l:--l)F[M]*=1/x[M];for(it=!1,M=h=0,G=n-1;0<=G?h<=G:h>=G;M=0<=G?++h:--h)if(F[M]!==w[E]){it=!0;break}w=F,O++,O>200&&(it=!1)}for(T={},M=d=0,H=n-1;0<=H?d<=H:d>=H;M=0<=H?++d:--d)T[M]=[];for(E=p=0,B=C-1;0<=B?p<=B:p>=B;E=0<=B?++p:--p)_=m[E],T[_].push(ct[E]);for(at=[],M=v=0,W=n-1;0<=W?v<=W:v>=W;M=0<=W?++v:--v)at.push(T[M][0]),at.push(T[M][T[M].length-1]);for(at=at.sort(function(t,e){return t-e}),A.push(at[0]),E=g=1,V=at.length-1;g<=V;E=g+=2)isNaN(at[E])||A.push(at[E])}return A},j=function(t,e,n){var r,i,u,c;return c=_t(arguments),t=c[0],e=c[1],n=c[2],t/=360,t<1/3?(r=(1-e)/3,u=(1+e*x(a*t)/x(o-a*t))/3,i=1-(r+u)):t<2/3?(t-=1/3,u=(1-e)/3,i=(1+e*x(a*t)/x(o-a*t))/3,r=1-(u+i)):(t-=2/3,i=(1-e)/3,r=(1+e*x(a*t)/x(o-a*t))/3,u=1-(i+r)),u=B(n*u*3),i=B(n*i*3),r=B(n*r*3),[255*u,255*i,255*r]},rt=function(){var t,e,n,r,i,o,u,c;return u=_t(arguments),o=u[0],e=u[1],t=u[2],a=2*Math.PI,o/=255,e/=255,t/=255,i=Math.min(o,e,t),r=(o+e+t)/3,c=1-i/r,0===c?n=0:(n=(o-e+(o-t))/2,n/=Math.sqrt((o-e)*(o-e)+(o-t)*(e-t)),n=Math.acos(n),t>e&&(n=a-n),n/=a),[360*n,c,r]},y.hsi=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(t,Mt.call(arguments).concat(["hsi"]),function(){})},s.hsi=j,t.prototype.hsi=function(){return rt(this._rgb)},O=function(e,n,r,i){var o,a,u,c,s,l,f,h,d,p,v,g,m;return"hsl"===i?(g=e.hsl(),m=n.hsl()):"hsv"===i?(g=e.hsv(),m=n.hsv()):"hsi"===i?(g=e.hsi(),m=n.hsi()):"lch"===i&&(g=e.lch(),m=n.lch()),"h"===i.substr(0,1)?(u=g[0],p=g[1],l=g[2],c=m[0],v=m[1],f=m[2]):(l=g[0],p=g[1],u=g[2],f=m[0],v=m[1],c=m[2]),isNaN(u)||isNaN(c)?isNaN(u)?isNaN(c)?a=Number.NaN:(a=c,1!==l&&0!==l||"hsv"===i||(d=v)):(a=u,1!==f&&0!==f||"hsv"===i||(d=p)):(o=c>u&&c-u>180?c-(u+360):c<u&&u-c>180?c+360-u:c-u,a=u+r*o),null==d&&(d=p+r*(v-p)),s=l+r*(f-l),h="h"===i.substr(0,1)?new t(a,d,s,i):new t(s,d,a,i)},l=l.concat(function(){var t,e,n,r;for(n=["hsv","hsl","hsi","lch"],r=[],e=0,t=n.length;e<t;e++)V=n[e],r.push([V,O]);return r}()),L=function(t,e,n,r){var i,o;return i=t.num(),o=e.num(),y.num(i+(o-i)*n,"num")},l.push(["num",L]),F=function(e,n,r,i){var o,a,u;return a=e.lab(),u=n.lab(),o=new t(a[0]+r*(u[0]-a[0]),a[1]+r*(u[1]-a[1]),a[2]+r*(u[2]-a[2]),i)},l.push(["lab",F])}).call(this)},{}],3:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(e,n){return i(t(e),n)}}function n(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=w?i*=10:o>=_?i*=5:o>=x&&(i*=2),e<t?-i:i}function r(t){return t.length}var i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},o=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},a=o(i),u=a.right,c=a.left,s=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},l=function(t){return null===t?NaN:+t},f=function(t,e){var n,r,i=t.length,o=0,a=0,u=-1,c=0;if(null==e)for(;++u<i;)isNaN(n=l(t[u]))||(r=n-o,o+=r/++c,a+=r*(n-o));else for(;++u<i;)isNaN(n=l(e(t[u],u,t)))||(r=n-o,o+=r/++c,a+=r*(n-o));if(c>1)return a/(c-1)},h=function(t,e){var n=f(t,e);return n?Math.sqrt(n):n},d=function(t,e){var n,r,i,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e(t[o],o,t))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e(t[o],o,t))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},p=Array.prototype,v=p.slice,g=p.map,m=function(t){return function(){return t}},y=function(t){return t},b=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},w=Math.sqrt(50),_=Math.sqrt(10),x=Math.sqrt(2),k=function(t,e,r){var i=n(t,e,r);return b(Math.ceil(t/i)*i,Math.floor(e/i)*i+i/2,i)},E=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},M=function(){function t(t){var i,o,a=t.length,c=new Array(a);for(i=0;i<a;++i)c[i]=e(t[i],i,t);var s=n(c),l=s[0],f=s[1],h=r(c,l,f);Array.isArray(h)||(h=k(l,f,h));for(var d=h.length;h[0]<=l;)h.shift(),--d;for(;h[d-1]>=f;)h.pop(),--d;var p,v=new Array(d+1);for(i=0;i<=d;++i)p=v[i]=[],p.x0=i>0?h[i-1]:l,p.x1=i<d?h[i]:f;for(i=0;i<a;++i)o=c[i],l<=o&&o<=f&&v[u(h,o,0,d)].push(t[i]);return v}var e=y,n=d,r=E;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:m(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:m([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:m(Array.isArray(e)?v.call(e):e),t):r},t},T=function(t,e,n){if(null==n&&(n=l),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),u=+n(t[o+1],o+1,t);return a+(u-a)*(i-o)}},S=function(t,e,n){return t=g.call(t,l).sort(i),Math.ceil((n-e)/(2*(T(t,.75)-T(t,.25))*Math.pow(t.length,-1/3)))},A=function(t,e,n){return Math.ceil((n-e)/(3.5*h(t)*Math.pow(t.length,-1/3)))},j=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n},P=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(null==e)for(;++o<i;)isNaN(n=l(t[o]))?--a:r+=n;else for(;++o<i;)isNaN(n=l(e(t[o],o,t)))?--a:r+=n;if(a)return r/a},R=function(t,e){var n,r=[],o=t.length,a=-1;if(null==e)for(;++a<o;)isNaN(n=l(t[a]))||r.push(n);else for(;++a<o;)isNaN(n=l(e(t[a],a,t)))||r.push(n);
return T(r.sort(i),.5)},N=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},C=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&n>r&&(n=r)}return n},O=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},F=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},L=function(t,e){if(n=t.length){var n,r,o=0,a=0,u=t[a];for(e||(e=i);++o<n;)(e(r=t[o],u)<0||0!==e(u,u))&&(u=r,a=o);return 0===e(u,u)?a:void 0}},I=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},z=function(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r},q=function(t){if(!(o=t.length))return[];for(var e=-1,n=C(t,r),i=new Array(n);++e<n;)for(var o,a=-1,u=i[e]=new Array(o);++a<o;)u[a]=t[a][e];return i},D=function(){return q(arguments)};t.bisect=u,t.bisectRight=u,t.bisectLeft=c,t.ascending=i,t.bisector=o,t.descending=s,t.deviation=h,t.extent=d,t.histogram=M,t.thresholdFreedmanDiaconis=S,t.thresholdScott=A,t.thresholdSturges=E,t.max=j,t.mean=P,t.median=R,t.merge=N,t.min=C,t.pairs=O,t.permute=F,t.quantile=T,t.range=b,t.scan=L,t.shuffle=I,t.sum=z,t.ticks=k,t.tickStep=n,t.transpose=q,t.variance=f,t.zip=D,Object.defineProperty(t,"__esModule",{value:!0})})},{}],4:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==n)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(n(i=t[o],o,t),i)}else if(t)for(var u in t)r.set(u,t[u]);return r}function r(){return{}}function i(t,e,n){t[e]=n}function o(){return n()}function a(t,e,n){t.set(e,n)}function u(){}function c(t,e){var n=new u;if(t instanceof u)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}var s="$";e.prototype=n.prototype={constructor:e,has:function(t){return s+t in this},get:function(t){return this[s+t]},set:function(t,e){return this[s+t]=e,this},remove:function(t){var e=s+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===s&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===s&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===s&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===s&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===s&&++t;return t},empty:function(){for(var t in this)if(t[0]===s)return!1;return!0},each:function(t){for(var e in this)e[0]===s&&t(this[e],e.slice(1),this)}};var l=function(){function t(e,r,i,o){if(r>=l.length)return null!=c?c(e):null!=u?e.sort(u):e;for(var a,s,f,h=-1,d=e.length,p=l[r++],v=n(),g=i();++h<d;)(f=v.get(a=p(s=e[h])+""))?f.push(s):v.set(a,[s]);return v.each(function(e,n){o(g,n,t(e,r,i,o))}),g}function e(t,n){if(++n>l.length)return t;var r,i=f[n-1];return null!=c&&n>=l.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r}var u,c,s,l=[],f=[];return s={object:function(e){return t(e,0,r,i)},map:function(e){return t(e,0,o,a)},entries:function(n){return e(t(n,0,o,a),0)},key:function(t){return l.push(t),s},sortKeys:function(t){return f[l.length-1]=t,s},sortValues:function(t){return u=t,s},rollup:function(t){return c=t,s}}},f=n.prototype;u.prototype=c.prototype={constructor:u,has:f.has,add:function(t){return t+="",this[s+t]=t,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};var h=function(t){var e=[];for(var n in t)e.push(n);return e},d=function(t){var e=[];for(var n in t)e.push(t[n]);return e},p=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e};t.nest=l,t.set=c,t.map=n,t.keys=h,t.values=d,t.entries=p,Object.defineProperty(t,"__esModule",{value:!0})})},{}],5:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=C.exec(t))?(e=parseInt(e[1],16),new c(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=O.exec(t))?i(parseInt(e[1],16)):(e=F.exec(t))?new c(e[1],e[2],e[3],1):(e=L.exec(t))?new c(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=I.exec(t))?o(e[1],e[2],e[3],e[4]):(e=z.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=q.exec(t))?s(e[1],e[2]/100,e[3]/100,1):(e=D.exec(t))?s(e[1],e[2]/100,e[3]/100,e[4]):U.hasOwnProperty(t)?i(U[t]):"transparent"===t?new c(NaN,NaN,NaN,0):null}function i(t){return new c(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new c(t,e,n,r)}function a(t){return t instanceof n||(t=r(t)),t?(t=t.rgb(),new c(t.r,t.g,t.b,t.opacity)):new c}function u(t,e,n,r){return 1===arguments.length?a(t):new c(t,e,n,null==r?1:r)}function c(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function s(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new h(t,e,n,r)}function l(t){if(t instanceof h)return new h(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=r(t)),!t)return new h;if(t instanceof h)return t;t=t.rgb();var e=t.r/255,i=t.g/255,o=t.b/255,a=Math.min(e,i,o),u=Math.max(e,i,o),c=NaN,s=u-a,l=(u+a)/2;return s?(c=e===u?(i-o)/s+6*(i<o):i===u?(o-e)/s+2:(e-i)/s+4,s/=l<.5?u+a:2-u-a,c*=60):s=l>0&&l<1?0:c,new h(c,s,l,t.opacity)}function f(t,e,n,r){return 1===arguments.length?l(t):new h(t,e,n,null==r?1:r)}function h(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function d(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function p(t){if(t instanceof g)return new g(t.l,t.a,t.b,t.opacity);if(t instanceof k){var e=t.h*G;return new g(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof c||(t=a(t));var n=w(t.r),r=w(t.g),i=w(t.b),o=m((.4124564*n+.3575761*r+.1804375*i)/X),u=m((.2126729*n+.7151522*r+.072175*i)/W),s=m((.0193339*n+.119192*r+.9503041*i)/V);return new g(116*u-16,500*(o-u),200*(u-s),t.opacity)}function v(t,e,n,r){return 1===arguments.length?p(t):new g(t,e,n,null==r?1:r)}function g(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function m(t){return t>J?Math.pow(t,1/3):t/K+$}function y(t){return t>Y?t*t*t:K*(t-$)}function b(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function w(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _(t){if(t instanceof k)return new k(t.h,t.c,t.l,t.opacity);t instanceof g||(t=p(t));var e=Math.atan2(t.b,t.a)*H;return new k(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function x(t,e,n,r){return 1===arguments.length?_(t):new k(t,e,n,null==r?1:r)}function k(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function E(t){if(t instanceof T)return new T(t.h,t.s,t.l,t.opacity);t instanceof c||(t=a(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ot*r+rt*e-it*n)/(ot+rt-it),o=r-i,u=(nt*(n-i)-tt*o)/et,s=Math.sqrt(u*u+o*o)/(nt*i*(1-i)),l=s?Math.atan2(u,o)*H-120:NaN;return new T(l<0?l+360:l,s,i,t.opacity)}function M(t,e,n,r){return 1===arguments.length?E(t):new T(t,e,n,null==r?1:r)}function T(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}var S=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},A=.7,j=1/A,P="\\s*([+-]?\\d+)\\s*",R="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C=/^#([0-9a-f]{3})$/,O=/^#([0-9a-f]{6})$/,F=new RegExp("^rgb\\("+[P,P,P]+"\\)$"),L=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),I=new RegExp("^rgba\\("+[P,P,P,R]+"\\)$"),z=new RegExp("^rgba\\("+[N,N,N,R]+"\\)$"),q=new RegExp("^hsl\\("+[R,N,N]+"\\)$"),D=new RegExp("^hsla\\("+[R,N,N,R]+"\\)$"),U={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};S(n,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),S(c,u,e(n,{brighter:function(t){return t=null==t?j:Math.pow(j,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?A:Math.pow(A,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),S(h,f,e(n,{brighter:function(t){return t=null==t?j:Math.pow(j,t),new h(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?A:Math.pow(A,t),new h(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new c(d(t>=240?t-240:t+120,i,r),d(t,i,r),d(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var G=Math.PI/180,H=180/Math.PI,B=18,X=.95047,W=1,V=1.08883,$=4/29,Y=6/29,K=3*Y*Y,J=Y*Y*Y;S(g,v,e(n,{brighter:function(t){return new g(this.l+B*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new g(this.l-B*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=W*y(t),e=X*y(e),n=V*y(n),new c(b(3.2404542*e-1.5371385*t-.4985314*n),b(-.969266*e+1.8760108*t+.041556*n),b(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),S(k,x,e(n,{brighter:function(t){return new k(this.h,this.c,this.l+B*(null==t?1:t),this.opacity)},darker:function(t){return new k(this.h,this.c,this.l-B*(null==t?1:t),this.opacity)},rgb:function(){return p(this).rgb()}}));var Q=-.14861,Z=1.78277,tt=-.29227,et=-.90649,nt=1.97294,rt=nt*et,it=nt*Z,ot=Z*tt-et*Q;S(T,M,e(n,{brighter:function(t){return t=null==t?j:Math.pow(j,t),new T(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?A:Math.pow(A,t),new T(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*G,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new c(255*(e+n*(Q*r+Z*i)),255*(e+n*(tt*r+et*i)),255*(e+n*(nt*r)),this.opacity)}})),t.color=r,t.rgb=u,t.hsl=f,t.lab=v,t.hcl=x,t.cubehelix=M,Object.defineProperty(t,"__esModule",{value:!0})})},{}],6:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){for(var t,e=0,r=arguments.length,i={};e<r;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new n(i)}function n(t){this._=t}function r(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function i(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function o(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=a,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}var a={value:function(){}};n.prototype=e.prototype={constructor:n,on:function(t,e){var n,a=this._,u=r(t+"",a),c=-1,s=u.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++c<s;)if(n=(t=u[c]).type)a[n]=o(a[n],t.name,e);else if(null==e)for(n in a)a[n]=o(a[n],t.name,null);return this}for(;++c<s;)if((n=(t=u[c]).type)&&(n=i(a[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new n(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})})},{}],7:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-dispatch"),t("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(){n.event.stopImmediatePropagation()}function i(t,e){var r=t.document.documentElement,i=n.select(t).on("dragstart.drag",null);e&&(i.on("click.drag",s,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function o(t,e,n,r,i,o,a,u,c,s){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=c,this._=s}function a(){return!n.event.button}function u(){return this.parentNode}function c(t){return null==t?{x:n.event.x,y:n.event.y}:t}var s=function(){n.event.preventDefault(),n.event.stopImmediatePropagation()},l=function(t){var e=t.document.documentElement,r=n.select(t).on("dragstart.drag",s,!0);"onselectstart"in e?r.on("selectstart.drag",s,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},f=function(t){return function(){return t}};o.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var h=function(){function t(t){t.on("mousedown.drag",h).on("touchstart.drag",v).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",m).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(){if(!w&&_.apply(this,arguments)){var t=y("mouse",x.apply(this,arguments),n.mouse,this,arguments);t&&(n.select(n.event.view).on("mousemove.drag",d,!0).on("mouseup.drag",p,!0),l(n.event.view),r(),b=!1,t("start"))}}function d(){s(),b=!0,E.mouse("drag")}function p(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null),i(n.event.view,b),s(),E.mouse("end")}function v(){if(_.apply(this,arguments)){var t,e,i=n.event.changedTouches,o=x.apply(this,arguments),a=i.length;for(t=0;t<a;++t)(e=y(i[t].identifier,o,n.touch,this,arguments))&&(r(),e("start"))}}function g(){var t,e,r=n.event.changedTouches,i=r.length;for(t=0;t<i;++t)(e=E[r[t].identifier])&&(s(),e("drag"))}function m(){var t,e,i=n.event.changedTouches,o=i.length;for(w&&clearTimeout(w),w=setTimeout(function(){w=null},500),t=0;t<o;++t)(e=E[i[t].identifier])&&(r(),e("end"))}function y(e,r,i,a,u){var c,s,l,f=i(r,e),h=M.copy();if(n.customEvent(new o(t,"beforestart",c,e,T,f[0],f[1],0,0,h),function(){return null!=(n.event.subject=c=k.apply(a,u))&&(s=c.x-f[0]||0,l=c.y-f[1]||0,!0)}))return function d(p){var v,g=f;switch(p){case"start":E[e]=d,v=T++;break;case"end":delete E[e],--T;case"drag":f=i(r,e),v=T}n.customEvent(new o(t,p,c,e,v,f[0]+s,f[1]+l,f[0]-g[0],f[1]-g[1],h),h.apply,h,[p,a,u])}}var b,w,_=a,x=u,k=c,E={},M=e.dispatch("start","drag","end"),T=0;return t.filter=function(e){return arguments.length?(_="function"==typeof e?e:f(!!e),t):_},t.container=function(e){return arguments.length?(x="function"==typeof e?e:f(e),t):x},t.subject=function(e){return arguments.length?(k="function"==typeof e?e:f(e),t):k},t.on=function(){var e=M.on.apply(M,arguments);return e===M?t:e},t};t.drag=h,t.dragDisable=l,t.dragEnable=i,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":6,"d3-selection":14}],8:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function n(t,n){var r=e(t);return function(e,i){return n(r(e),i,t)}}function r(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function i(t){function i(t,r){var i,a,u=o(t,function(t,o){return i?i(t,o-1):(a=t,void(i=r?n(t,r):e(t)))});return u.columns=a,u}function o(t,e){function n(){if(s>=c)return a;if(i)return i=!1,o;var e,n=s;if(34===t.charCodeAt(n)){for(var r=n;r++<c;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return s=r+2,e=t.charCodeAt(r+1),13===e?(i=!0,10===t.charCodeAt(r+2)&&++s):10===e&&(i=!0),t.slice(n+1,r).replace(/""/g,'"')}for(;s<c;){var u=1;if(e=t.charCodeAt(s++),10===e)i=!0;else if(13===e)i=!0,10===t.charCodeAt(s)&&(++s,++u);else if(e!==f)continue;return t.slice(n,s-u)}return t.slice(n)}for(var r,i,o={},a={},u=[],c=t.length,s=0,l=0;(r=n())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=n();e&&null==(h=e(h,l++))||u.push(h)}return u}function a(e,n){return null==n&&(n=r(e)),[n.map(s).join(t)].concat(e.map(function(e){return n.map(function(t){return s(e[t])}).join(t)})).join("\n")}function u(t){return t.map(c).join("\n")}function c(e){return e.map(s).join(t)}function s(t){return null==t?"":l.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),f=t.charCodeAt(0);return{parse:i,parseRows:o,format:a,formatRows:u}}var o=i(","),a=o.parse,u=o.parseRows,c=o.format,s=o.formatRows,l=i("\t"),f=l.parse,h=l.parseRows,d=l.format,p=l.formatRows;t.dsvFormat=i,t.csvParse=a,t.csvParseRows=u,t.csvFormat=c,t.csvFormatRows=s,t.tsvParse=f,t.tsvParseRows=h,t.tsvFormat=d,t.tsvFormatRows=p,Object.defineProperty(t,"__esModule",{value:!0})})},{}],9:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return+t}function n(t){return t*t}function r(t){return t*(2-t)}function i(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function o(t){return t*t*t}function a(t){return--t*t*t+1}function u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function c(t){return 1-Math.cos(t*M)}function s(t){return Math.sin(t*M)}function l(t){return(1-Math.cos(E*t))/2}function f(t){return Math.pow(2,10*t-10)}function h(t){return 1-Math.pow(2,-10*t)}function d(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function p(t){return 1-Math.sqrt(1-t*t)}function v(t){return Math.sqrt(1- --t*t)}function g(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function m(t){return 1-y(1-t)}function y(t){return(t=+t)<T?F*t*t:t<A?F*(t-=S)*t+j:t<R?F*(t-=P)*t+N:F*(t-=C)*t+O}function b(t){return((t*=2)<=1?1-y(1-t):y(t-1)+1)/2}var w=3,_=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(w),x=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(w),k=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(w),E=Math.PI,M=E/2,T=4/11,S=6/11,A=8/11,j=.75,P=9/11,R=10/11,N=.9375,C=21/22,O=63/64,F=1/T/T,L=1.70158,I=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(L),z=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(L),q=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(L),D=2*Math.PI,U=1,G=.3,H=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=D);return r.amplitude=function(e){return t(e,n*D)},r.period=function(n){return t(e,n)},r}(U,G),B=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=D);return r.amplitude=function(e){return t(e,n*D)},r.period=function(n){return t(e,n)},r}(U,G),X=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=D);return r.amplitude=function(e){return t(e,n*D)},r.period=function(n){return t(e,n)},r}(U,G);t.easeLinear=e,t.easeQuad=i,t.easeQuadIn=n,t.easeQuadOut=r,t.easeQuadInOut=i,t.easeCubic=u,t.easeCubicIn=o,t.easeCubicOut=a,t.easeCubicInOut=u,t.easePoly=k,t.easePolyIn=_,t.easePolyOut=x,t.easePolyInOut=k,t.easeSin=l,t.easeSinIn=c,t.easeSinOut=s,t.easeSinInOut=l,t.easeExp=d,t.easeExpIn=f,t.easeExpOut=h,t.easeExpInOut=d,t.easeCircle=g,t.easeCircleIn=p,t.easeCircleOut=v,t.easeCircleInOut=g,t.easeBounce=y,t.easeBounceIn=m,t.easeBounceOut=y,t.easeBounceInOut=b,t.easeBack=q,t.easeBackIn=I,t.easeBackOut=z,t.easeBackInOut=q,t.easeElastic=B,t.easeElasticIn=H,t.easeElasticOut=B,t.easeElasticInOut=X,Object.defineProperty(t,"__esModule",{value:!0})})},{}],10:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-geo"),t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-geo","d3-array"],i):i(r.d3=r.d3||{},r.d3,r.d3)}(this,function(t,e,n){"use strict";function r(t){return t?t/Math.sin(t):1}function i(t){return t>1?Ye:t<-1?-Ye:Math.asin(t)}function o(t){return t>1?0:t<-1?$e:Math.acos(t)}function a(t){return t>0?Math.sqrt(t):0}function u(t){return t=Le(2*t),(t-1)/(t+1)}function c(t){return(Le(t)-Le(-t))/2}function s(t){return(Le(t)+Le(-t))/2}function l(t){return ze(t+a(t*t+1))}function f(t){return ze(t+a(t*t-1))}function h(t){function e(t,e){var n=Fe(t),i=Fe(e),o=Be(e),a=i*n,u=-((1-a?ze((1+a)/2)/(1-a):-.5)+r/(1+a));return[u*i*Be(t),u*o]}var n=Xe(t/2),r=2*ze(Fe(t/2))/(n*n);return e.invert=function(e,n){var o,u=a(e*e+n*n),c=-t/2,s=50;if(!u)return[0,0];do{var l=c/2,f=Fe(l),h=Be(l),d=Xe(l),p=ze(1/f);c-=o=(2/d*p-r*d-u)/(-p/(h*h)+1-r/(2*f*f))}while(Ne(o)>We&&--s>0);var v=Be(c);return[Oe(e*v,u*Fe(c)),i(n*v/u)]},e}function d(t,e){var n=Fe(e),i=r(o(n*Fe(t/=2)));return[2*n*Be(t)*i,Be(e)*i]}function p(t){function e(t,e){var u=Fe(e),c=Fe(t/=2);return[(1+u)*Be(t),(i*e>-Oe(c,o)-.001?0:10*-i)+a+Be(e)*r-(1+u)*n*c]}var n=Be(t),r=Fe(t),i=t>=0?1:-1,o=Xe(i*t),a=(1+n-r)/2;return e.invert=function(t,e){var u=0,c=0,s=50;do{var l=Fe(u),f=Be(u),h=Fe(c),d=Be(c),p=1+h,v=p*f-t,g=a+d*r-p*n*l-e,m=p*l/2,y=-f*d,b=n*p*f/2,w=r*h+n*l*d,_=y*b-w*m,x=(g*y-v*w)/_/2,k=(v*b-g*m)/_;u-=x,c-=k}while((Ne(x)>We||Ne(k)>We)&&--s>0);return i*c>-Oe(Fe(u),o)-.001?[2*u,c]:null},e}function v(t,e){var n=Xe(e/2),r=a(1-n*n),i=1+r*Fe(t/=2),o=Be(t)*r/i,u=n/i,c=o*o,s=u*u;return[4/3*o*(3+c-3*s),4/3*u*(3+3*c-s)]}function g(t,e){var n=Ne(e);return n<Ke?[t,ze(Xe(Ke+e/2))]:[t*Fe(n)*(2*Qe-1/Be(n)),He(e)*(2*Qe*(n-Ke)-ze(Xe(n/2)))]}function m(t){function n(t,n){var o=e.geoAzimuthalEquidistantRaw(t,n);if(Ne(t)>Ye){var u=Oe(o[1],o[0]),c=a(o[0]*o[0]+o[1]*o[1]),s=r*Ge((u-Ye)/r)+Ye,l=Oe(Be(u-=s),2-Fe(u));u=s+i($e/c*Be(l))-l,o[0]=c*Fe(u),o[1]=c*Be(u)}return o}var r=2*$e/t;return n.invert=function(t,n){var i=a(t*t+n*n);if(i>Ye){var u=Oe(n,t),c=r*Ge((u-Ye)/r)+Ye,s=u>c?-1:1,l=i*Fe(c-u),f=1/Xe(s*o((l-$e)/a($e*($e-2*l)+i*i)));u=c+2*Ce((f+s*a(f*f-3))/3),t=i*Fe(u),n=i*Be(u)}return e.geoAzimuthalEquidistantRaw.invert(t,n)},n}function y(t,e){var n,r=t*Be(e),i=30;do e-=n=(e+Be(e)-r)/(1+Fe(e));while(Ne(n)>We&&--i>0);return e/2}function b(t,e,n){function r(r,i){return[t*r*Fe(i=y(n,i)),e*Be(i)]}return r.invert=function(r,o){return o=i(o/e),[r/(t*Fe(o)),i((2*o+Be(2*o))/n)]},r}function w(t,e){var n=y($e,e);return[pn*t/(1/Fe(e)+vn/Fe(n)),(e+Qe*Be(n))/pn]}function _(t,e){return[t*Fe(e),e]}function x(t){function e(e,r){var i=n+t-r,o=i?e*Fe(r)/i:i;return[i*Be(o),n-i*Fe(o)]}if(!t)return _;var n=1/Xe(t);return e.invert=function(e,r){var i=a(e*e+(r=n-r)*r),o=n+t-i;return[i/Fe(o)*Oe(e,r),o]},e}function k(t){function e(e,n){var r=Ye-n,i=r?e*t*Be(r)/r:r;return[r*Be(i)/t,Ye-r*Fe(i)]}return e.invert=function(e,n){var r=e*t,i=Ye-n,o=a(r*r+i*i),u=Oe(r,i);return[(o?o/Be(o):1)*u/t,Ye-o]},e}function E(t,e,n,r,u,c){var s,l=Fe(c);if(Ne(t)>1||Ne(c)>1)s=o(n*u+e*r*l);else{var f=Be(t/2),h=Be(c/2);s=2*i(a(f*f+e*r*h*h))}return Ne(s)>We?[s,Oe(r*Be(c),e*u-n*r*l)]:[0,0]}function M(t,e,n){return o((t*t+e*e-n*n)/(2*t*e))}function T(t){return t-2*$e*Ie((t+$e)/(2*$e))}function S(t,e,n){function r(t,e){var n,r=Be(e),i=Fe(e),a=new Array(3);for(n=0;n<3;++n){var u=o[n];if(a[n]=E(e-u[1],u[3],u[2],i,r,t-u[0]),!a[n][0])return u.point;a[n][1]=T(a[n][1]-u.v[1])}var c=f.slice();for(n=0;n<3;++n){var h=2==n?0:n+1,d=M(o[n].v[0],a[n][0],a[h][0]);a[n][1]<0&&(d=-d),n?1==n?(d=s-d,c[0]-=a[n][0]*Fe(d),c[1]-=a[n][0]*Be(d)):(d=l-d,c[0]+=a[n][0]*Fe(d),c[1]+=a[n][0]*Be(d)):(c[0]+=a[n][0]*Fe(d),c[1]-=a[n][0]*Be(d))}return c[0]/=3,c[1]/=3,c}for(var i,o=[[t[0],t[1],Be(t[1]),Fe(t[1])],[e[0],e[1],Be(e[1]),Fe(e[1])],[n[0],n[1],Be(n[1]),Fe(n[1])]],a=o[2],u=0;u<3;++u,a=i)i=o[u],a.v=E(i[1]-a[1],a[3],a[2],i[3],i[2],i[0]-a[0]),a.point=[0,0];var c=M(o[0].v[0],o[2].v[0],o[1].v[0]),s=M(o[0].v[0],o[1].v[0],o[2].v[0]),l=$e-c;o[2].point[1]=0,o[0].point[0]=-(o[1].point[0]=o[0].v[0]/2);var f=[o[2].point[0]=o[0].point[0]+o[2].v[0]*Fe(c),2*(o[0].point[1]=o[1].point[1]=o[2].v[0]*Be(c))];return r}function A(t){return t[0]*=nn,t[1]*=nn,t}function j(){return P([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function P(t,n,r){var i=e.geoCentroid({type:"MultiPoint",coordinates:[t,n,r]}),o=[-i[0],-i[1]],a=e.geoRotation(o),u=e.geoProjection(S(A(a(t)),A(a(n)),A(a(r)))).rotate(o),c=u.center;return delete u.rotate,u.center=function(t){return arguments.length?c(a(t)):a.invert(c())},u.clipAngle(90)}function R(t,e){var n=a(1-Be(e));return[2/Ze*t*n,Ze*(1-n)]}function N(t){function e(t,e){return[t,(t?t/Be(t):1)*(Be(e)*Fe(t)-n*Fe(e))]}var n=Xe(t);return e.invert=n?function(t,e){t&&(e*=Be(t)/t);var r=Fe(t);return[t,2*Oe(a(r*r+n*n-e*e)-r,n-e)]}:function(t,e){return[t,i(t?e*Xe(t)/t:e)]},e}function C(t,e){return[Mn*t*(2*Fe(2*e/3)-1)/Ze,Mn*Ze*Be(e/3)]}function O(t){function e(t,e){return[t*n,Be(e)/n]}var n=Fe(t);return e.invert=function(t,e){return[t/n,i(e*n)]},e}function F(t){function e(t,e){return[t*n,(1+n)*Xe(e/2)]}var n=Fe(t);return e.invert=function(t,e){return[t/n,2*Ce(e/(1+n))]},e}function L(t,e){var n=a(8/(3*$e));return[n*t*(1-Ne(e)/$e),n*e]}function I(t,e){var n=a(4-3*Be(Ne(e)));return[2/a(6*$e)*t*n,He(e)*a(2*$e/3)*(2-n)]}function z(t,e){var n=a($e*(4+$e));return[2/n*t*(1+a(1-4*e*e/($e*$e))),4/n*e]}function q(t,e){var n=(2+Ye)*Be(e);e/=2;for(var r=0,i=1/0;r<10&&Ne(i)>We;r++){var o=Fe(e);e-=i=(e+Be(e)*(o+2)-n)/(2*o*(1+o))}return[2/a($e*(4+$e))*t*(1+Fe(e)),2*a($e/(4+$e))*Be(e)]}function D(t,e){return[t*(1+Fe(e))/a(2+$e),2*e/a(2+$e)]}function U(t,e){for(var n=(1+Ye)*Be(e),r=0,i=1/0;r<10&&Ne(i)>We;r++)e-=i=(e+Be(e)-n)/(1+Fe(e));return n=a(2+$e),[t*(1+Fe(e))/n,2*e/n]}function G(t,e){var n=Be(t/=2),r=Fe(t),i=a(Fe(e)),o=Fe(e/=2),u=Be(e)/(o+Qe*r*i),c=a(2/(1+u*u)),s=a((Qe*o+(r+n)*i)/(Qe*o+(r-n)*i));return[Fn*(c*(s-1/s)-2*ze(s)),Fn*(c*u*(s+1/s)-2*Ce(u))]}function H(t,e){var n=Xe(e/2);return[t*In*a(1-n*n),(1+In)*n]}function B(t,e){var n=e/2,r=Fe(n);return[2*t/Ze*Fe(e)*r*r,Ze*Xe(n)]}function X(t){return[t[0]/2,i(Xe(t[1]/2*nn))*en]}function W(t){return[2*t[0],2*Ce(Be(t[1]*nn))*en]}function V(t,n){function r(n,r){var u=e.geoAzimuthalEquidistantRaw(n,r),c=u[0],s=u[1],l=c*c+s*s;if(l>o){var f=a(l),h=Oe(s,c),d=i*Ge(h/i),p=h-d,v=t*Fe(p),g=(t*Be(p)-p*Be(v))/(Ye-v),m=$(p,g),y=($e-t)/Y(m,v,$e);c=f;var b,w=50;do c-=b=(t+Y(m,v,c)*y-f)/(m(c)*y);while(Ne(b)>We&&--w>0);s=p*Be(c),c<Ye&&(s-=g*(c-Ye));var _=Be(d),x=Fe(d);u[0]=c*x-s*_,u[1]=c*_+s*x}return u}var i=2*$e/n,o=t*t;return r.invert=function(n,r){var u=n*n+r*r;if(u>o){var c=a(u),s=Oe(r,n),l=i*Ge(s/i),f=s-l;n=c*Fe(f),r=c*Be(f);for(var h=n-Ye,d=Be(n),p=r/d,v=n<Ye?1/0:0,g=10;;){var m=t*Be(p),y=t*Fe(p),b=Be(y),w=Ye-y,_=(m-p*b)/w,x=$(p,_);if(Ne(v)<Ve||!--g)break;p-=v=(p*d-_*h-r)/(d-2*h*(w*(y+p*m*Fe(y)-b)-m*(m-p*b))/(w*w))}c=t+Y(x,y,n)*($e-t)/Y(x,y,$e),s=l+p,n=c*Fe(s),r=c*Be(s)}return e.geoAzimuthalEquidistantRaw.invert(n,r)},r}function $(t,e){return function(n){var r=t*Fe(n);return n<Ye&&(r-=e),a(1+r*r)}}function Y(t,e,n){for(var r=50,i=(n-e)/r,o=t(e)+t(n),a=1,u=e;a<r;++a)o+=2*t(u+=i);return.5*o*i}function K(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}function J(t,e){var n=He(t),r=He(e),o=Fe(e),a=Fe(t)*o,u=Be(t)*o,c=Be(r*e);t=Ne(Oe(u,c)),e=i(a),Ne(t-Ye)>We&&(t%=Ye);var s=Q(t>$e/4?Ye-t:t,e);return t>$e/4&&(c=s[0],s[0]=-s[1],s[1]=-c),s[0]*=n,s[1]*=-r,s}function Q(t,e){if(e===Ye)return[0,0];var n,r,o=Be(e),u=o*o,c=u*u,s=1+c,l=1+3*c,f=1-c,h=i(1/a(s)),d=f+u*s*h,p=(1-o)/d,v=a(p),g=p*s,m=a(g),y=v*f;if(0===t)return[0,-(y+u*m)];var b,w=Fe(e),_=1/w,x=2*o*w,k=(-3*u+h*l)*x,E=(-d*w-(1-o)*k)/(d*d),M=.5*E/v,T=f*M-2*u*v*x,S=u*s*E+p*l*x,A=-_*x,j=-_*S,P=-2*_*T,R=4*t/$e;if(t>.222*$e||e<$e/4&&t>.175*$e){if(n=(y+u*a(g*(1+c)-y*y))/(1+c),t>$e/4)return[n,n];var N=n,C=.5*n;n=.5*(C+N),r=50;do{var O=a(g-n*n),F=n*(P+A*O)+j*i(n/m)-R;if(!F)break;F<0?C=n:N=n,n=.5*(C+N)}while(Ne(N-C)>We&&--r>0)}else{n=We,r=25;do{var L=n*n,I=a(g-L),z=P+A*I,q=n*z+j*i(n/m)-R,D=z+(j-A*L)/I;n-=b=I?q/D:0}while(Ne(b)>We&&--r>0)}return[n,-y-u*a(g-n*n)]}function Z(t,e){for(var n=0,r=1,o=.5,u=50;;){var c=o*o,s=a(o),l=i(1/a(1+c)),f=1-c+o*(1+c)*l,h=(1-s)/f,d=a(h),p=h*(1+c),v=d*(1-c),g=p-t*t,m=a(g),y=e+v+o*m;
if(Ne(r-n)<Ve||0===--u||0===y)break;y>0?n=o:r=o,o=.5*(n+r)}if(!u)return null;var b=i(s),w=Fe(b),_=1/w,x=2*s*w,k=(-3*o+l*(1+3*c))*x,E=(-f*w-(1-s)*k)/(f*f),M=.5*E/d,T=(1-c)*M-2*o*d*x,S=-2*_*T,A=-_*x,j=-_*(o*(1+c)*E+h*(1+3*c)*x);return[$e/4*(t*(S+A*m)+j*i(t/a(p))),b]}function tt(t,e,n){var r,i,o;return t?(r=et(t,n),e?(i=et(e,1-n),o=i[1]*i[1]+n*r[0]*r[0]*i[0]*i[0],[[r[0]*i[2]/o,r[1]*r[2]*i[0]*i[1]/o],[r[1]*i[1]/o,-r[0]*r[2]*i[0]*i[2]/o],[r[2]*i[1]*i[2]/o,-n*r[0]*r[1]*i[0]/o]]):[[r[0],0],[r[1],0],[r[2],0]]):(i=et(e,1-n),[[0,i[0]/i[1]],[1/i[1],0],[i[2]/i[1],0]])}function et(t,e){var n,r,o,l,f;if(e<We)return l=Be(t),r=Fe(t),n=e*(t-l*r)/4,[l-n*r,r+n*l,1-e*l*l/2,t-n];if(e>=1-We)return n=(1-e)/4,r=s(t),l=u(t),o=1/r,f=r*c(t),[l+n*(f-t)/(r*r),o-n*l*o*(f-t),o+n*l*o*(f+t),2*Ce(Le(t))-Ye+n*(f-t)/r];var h=[1,0,0,0,0,0,0,0,0],d=[a(e),0,0,0,0,0,0,0,0],p=0;for(r=a(1-e),f=1;Ne(d[p]/h[p])>We&&p<8;)n=h[p++],d[p]=(n-r)/2,h[p]=(n+r)/2,r=a(n*r),f*=2;o=f*h[p]*t;do l=d[p]*Be(r=o)/h[p],o=(i(l)+o)/2;while(--p);return[Be(o),l=Fe(o),l/Fe(o-r),o]}function nt(t,e,n){var r=Ne(t),i=Ne(e),o=c(i);if(r){var u=1/Be(r),s=1/(Xe(r)*Xe(r)),l=-(s+n*(o*o*u*u)-1+n),f=(n-1)*s,h=(-l+a(l*l-4*f))/2;return[rt(Ce(1/a(h)),n)*He(t),rt(Ce(a((h/s-1)/n)),1-n)*He(e)]}return[0,rt(Ce(o),1-n)*He(e)]}function rt(t,e){if(!e)return t;if(1===e)return ze(Xe(t/2+Ke));for(var n=1,r=a(1-e),i=a(e),o=0;Ne(i)>We;o++){if(t%$e){var u=Ce(r*Xe(t)/n);u<0&&(u+=$e),t+=u+~~(t/$e)*$e}else t+=t;i=(n+r)/2,r=a(n*r),i=((n=i)-r)/2}return t/(Ue(2,o)*n)}function it(t,e){var n=(Qe-1)/(Qe+1),r=a(1-n*n),i=rt(Ye,r*r),o=-1,u=ze(Xe($e/4+Ne(e)/2)),c=Le(o*u)/a(n),s=ot(c*Fe(o*t),c*Be(o*t)),l=nt(s[0],s[1],r*r);return[-l[1],(e>=0?1:-1)*(.5*i-l[0])]}function ot(t,e){var n=t*t,r=e+1,i=1-n-e*e;return[.5*((t>=0?Ye:-Ye)-Oe(i,2*t)),-.25*ze(i*i+4*n)+.5*ze(r*r+n)]}function at(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function ut(t,n){function r(r,i){var o=e.geoAzimuthalEqualAreaRaw(r/n,i);return o[0]*=t,o}return arguments.length<2&&(n=t),1===n?e.geoAzimuthalEqualAreaRaw:n===1/0?ct:(r.invert=function(r,i){var o=e.geoAzimuthalEqualAreaRaw.invert(r/t,i);return o[0]*=n,o},r)}function ct(t,e){return[t*Fe(e)/Fe(e/=2),2*Be(e)]}function st(t){function e(t,e){var a=i(t,e);t=a[0],e=a[1];var u=Be(e),c=Fe(e),s=Fe(t),l=o(n*u+r*c*s),f=Be(l),h=Ne(f)>We?l/f:1;return[h*r*Be(t),(Ne(t)>Ye?h:-h)*(n*c-r*u*s)]}var n=Be(t),r=Fe(t),i=lt(t);return i.invert=lt(-t),e.invert=function(t,e){var r=a(t*t+e*e),o=-Be(r),u=Fe(r),c=r*u,s=-e*o,l=r*n,f=a(c*c+s*s-l*l),h=Oe(c*l+s*f,s*l-c*f),d=(r>Ye?-1:1)*Oe(t*o,r*Fe(h)*u+e*Be(h)*o);return i.invert(d,h)},e}function lt(t){var e=Be(t),n=Fe(t);return function(t,r){var o=Fe(r),a=Fe(t)*o,u=Be(t)*o,c=Be(r);return[Oe(u,a*n-c*e),i(c*n+a*e)]}}function ft(t){function e(e,l){var f,h=Ne(l);if(h>n){var d=De(t-1,qe(0,Ie((e+$e)/u)));e+=$e*(t-1)/t-d*u,f=R(e,h),f[0]=f[0]*tn/r-tn*(t-1)/(2*t)+d*tn/t,f[1]=i+4*(f[1]-o)*a/tn,l<0&&(f[1]=-f[1])}else f=ir(e,l);return f[0]*=c,f[1]/=s,f}var n=rr*nn,r=R($e,n)[0]-R(-$e,n)[0],i=ir(0,n)[1],o=R(0,n)[1],a=Ze-o,u=tn/t,c=4/tn,s=i+a*a*4/tn;return e.invert=function(e,n){e/=c,n*=s;var l=Ne(n);if(l>i){var f=De(t-1,qe(0,Ie((e+$e)/u)));e=(e+$e*(t-1)/t-f*u)*r/tn;var h=R.invert(e,.25*(l-i)*tn/a+o);return h[0]-=$e*(t-1)/t-f*u,n<0&&(h[1]=-h[1]),h}return ir.invert(e,n)},e}function ht(t){return{type:"Polygon",coordinates:[n.range(-180,180+t/2,t).map(function(t,e){return[t,1&e?90-1e-6:rr]}).concat(n.range(180,-180-t/2,-t).map(function(t,e){return[t,1&e?-90+1e-6:-rr]}))]}}function dt(t){function e(e,i){var o,u,d=1-Be(i);if(d&&d<2){var p,v=Ye-i,g=25;do{var m=Be(v),y=Fe(v),b=c+Oe(m,r-y),w=1+h-2*r*y;v-=p=(v-f*c-r*m+w*b-.5*d*n)/(2*r*m*b)}while(Ne(p)>Ve&&--g>0);o=s*a(w),u=e*b/$e}else o=s*(t+d),u=e*c/$e;return[o*Be(u),l-o*Fe(u)]}var n,r=1+t,u=Be(1/r),c=i(u),s=2*a($e/(n=$e+4*c*r)),l=.5*s*(r+a(t*(2+t))),f=t*t,h=r*r;return e.invert=function(t,e){var u=t*t+(e-=l)*e,d=(1+h-u/(s*s))/(2*r),p=o(d),v=Be(p),g=c+Oe(v,r-d);return[i(t/a(u))*$e/g,i(1-2*(p-f*c-r*v+(1+h-2*r*d)*g)/n)]},e}function pt(t,e){return e>-ur?(t=hn(t,e),t[1]+=cr,t):_(t,e)}function vt(t,e){return Ne(e)>ur?(t=hn(t,e),t[1]-=e>0?cr:-cr,t):_(t,e)}function gt(t,e){return Ne(t[0]-e[0])<We&&Ne(t[1]-e[1])<We}function mt(t,e){for(var n,r,i,o=-1,a=t.length,u=t[0],c=[];++o<a;){n=t[o],r=(n[0]-u[0])/e,i=(n[1]-u[1])/e;for(var s=0;s<e;++s)c.push([u[0]+s*r,u[1]+s*i]);u=n}return c.push(n),c}function yt(t){var e,r,i,o,a,u,c,s=[],l=t[0].length;for(c=0;c<l;++c)e=t[0][c],r=e[0][0],i=e[0][1],o=e[1][1],a=e[2][0],u=e[2][1],s.push(mt([[r+We,i+We],[r+We,o-We],[a-We,o-We],[a-We,u+We]],30));for(c=t[1].length-1;c>=0;--c)e=t[1][c],r=e[0][0],i=e[0][1],o=e[1][1],a=e[2][0],u=e[2][1],s.push(mt([[a-We,u-We],[a-We,o+We],[r+We,o+We],[r+We,i-We]],30));return{type:"Polygon",coordinates:[n.merge(s)]}}function bt(t,e){return[3/tn*t*a($e*$e/3-e*e),e]}function wt(t){function e(e,n){if(Ne(Ne(n)-Ye)<We)return[0,n<0?-2:2];var r=Be(n),i=Ue((1+r)/(1-r),t/2),o=.5*(i+1/i)+Fe(e*=t);return[2*Be(e)/o,(i-1/i)/o]}return e.invert=function(e,n){var r=Ne(n);if(Ne(r-2)<We)return e?null:[0,He(n)*Ye];if(r>2)return null;e/=2,n/=2;var o=e*e,a=n*n,u=2*n/(1+o+a);return u=Ue((1+u)/(1-u),1/t),[Oe(2*e,1-o-a)/t,i((u-1)/(u+1))]},e}function _t(t,e){return[t*(1+a(Fe(e)))/2,e/(Fe(e/2)*Fe(t/6))]}function xt(t,e){var n=t*t,r=e*e;return[t*(.975534+r*(-.119161+n*-.0143059+r*-.0547009)),e*(1.00384+n*(.0802894+r*-.02855+199025e-9*n)+r*(.0998909+r*-.0491032))]}function kt(t,e){return[Be(t)/Fe(e),Xe(e)*Fe(t)]}function Et(t){function e(e,i){var o=i-t,a=Ne(o)<We?e*n:Ne(a=Ke+i/2)<We||Ne(Ne(a)-Ye)<We?0:e*o/ze(Xe(a)/r);return[a,o]}var n=Fe(t),r=Xe(Ke+t/2);return e.invert=function(e,i){var o,a=i+t;return[Ne(i)<We?e/n:Ne(o=Ke+a/2)<We||Ne(Ne(o)-Ye)<We?0:e*ze(Xe(o)/r)/i,a]},e}function Mt(t,e){return[t,1.25*ze(Xe(Ke+.4*e))]}function Tt(t){function e(e,r){for(var i,o=Fe(r),a=2/(1+o*Fe(e)),u=a*o*Be(e),c=a*Be(r),s=n,l=t[s],f=l[0],h=l[1];--s>=0;)l=t[s],f=l[0]+u*(i=f)-c*h,h=l[1]+u*h+c*i;return f=u*(i=f)-c*h,h=u*h+c*i,[f,h]}var n=t.length-1;return e.invert=function(e,r){var o=20,u=e,c=r;do{for(var s,l=n,f=t[l],h=f[0],d=f[1],p=0,v=0;--l>=0;)f=t[l],p=h+u*(s=p)-c*v,v=d+u*v+c*s,h=f[0]+u*(s=h)-c*d,d=f[1]+u*d+c*s;p=h+u*(s=p)-c*v,v=d+u*v+c*s,h=u*(s=h)-c*d-e,d=u*d+c*s-r;var g,m,y=p*p+v*v;u-=g=(h*p+d*v)/y,c-=m=(d*p-h*v)/y}while(Ne(g)+Ne(m)>We*We&&--o>0);if(o){var b=a(u*u+c*c),w=2*Ce(.5*b),_=Be(w);return[Oe(u*_,b*Fe(w)),b?i(c*_/b):0]}},e}function St(){return Nt(Nr,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function At(){return Nt(Cr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function jt(){return Nt(Or,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Pt(){return Nt(Fr,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Rt(){return Nt(Lr,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Nt(t,n){var r=e.geoProjection(Tt(t)).rotate(n).clipAngle(90),i=e.geoRotation(n),o=r.center;return delete r.rotate,r.center=function(t){return arguments.length?o(i(t)):i.invert(o())},r}function Ct(t,e){var n=i(7*Be(e)/(3*Ir));return[Ir*t*(2*Fe(2*n/3)-1)/zr,9*Be(n/3)/zr]}function Ot(t,e){for(var n,r=(1+Je)*Be(e),i=e,o=0;o<25&&(i-=n=(Be(i/2)+Be(i)-r)/(.5*Fe(i/2)+Fe(i)),!(Ne(n)<We));o++);return[t*(1+2*Fe(i)/Fe(i/2))/(3*Qe),2*a(3)*Be(i/2)/a(2+Qe)]}function Ft(t,e){for(var n,r=a(6/(4+$e)),i=(1+$e/4)*Be(e),o=e/2,u=0;u<25&&(o-=n=(o/2+Be(o)-i)/(.5+Fe(o)),!(Ne(n)<We));u++);return[r*(.5+Fe(o))*t/1.5,r*o]}function Lt(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}function It(t,e){return[t*(1+Fe(e))/2,2*(e-Xe(e/2))]}function zt(t,e){var n=e*e;return[t,e*(Br+n*n*(Xr+n*(Wr+Vr*n)))]}function qt(t,e){if(Ne(e)<We)return[t,0];var n=Xe(e),r=t*Be(e);return[Be(r)/n,e+(1-Fe(r))/n]}function Dt(t){var e=1/(t[0]*t[4]-t[1]*t[3]);return[e*t[4],-e*t[1],e*(t[1]*t[5]-t[2]*t[4]),-e*t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]}function Ut(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]}function Gt(t,e){return[t[0]-e[0],t[1]-e[1]]}function Ht(t){return a(t[0]*t[0]+t[1]*t[1])}function Bt(t,e){return Oe(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])}function Xt(t,n,r){var i,o,a=n.edges,u=a.length,c={type:"MultiPoint",coordinates:n.face},s=n.face.filter(function(t){return 90!==Ne(t[1])}),l=e.geoBounds({type:"MultiPoint",coordinates:s}),f=!1,h=-1,d=l[1][0]-l[0][0],p=180===d||360===d?[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]:e.geoCentroid(c);if(r)for(;++h<u&&a[h]!==r;);++h;for(var v=0;v<u;++v)o=a[(v+h)%u],Array.isArray(o)?(f||(t.point((i=e.geoInterpolate(o[0],p)(We))[0],i[1]),f=!0),t.point((i=e.geoInterpolate(o[1],p)(We))[0],i[1])):(f=!1,o!==r&&Xt(t,o,n))}function Wt(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function Vt(t,e){for(var n,r,i=t.length,o=null,a=0;a<i;++a){n=t[a];for(var u=e.length;--u>=0;)if(r=e[u],n[0]===r[0]&&n[1]===r[1]){if(o)return[o,n];o=n}}}function $t(t){for(var e=t.length,n=[],r=t[e-1],i=0;i<e;++i)n.push([r,r=t[i]]);return n}function Yt(t){return t.project.invert||t.children&&t.children.some(Yt)}function Kt(t,e){var n=R(t,e);return[n[0]*ai,n[1]]}function Jt(t,e){for(var n=0,r=t.length,i=0;n<r;++n)i+=t[n]*e[n];return i}function Qt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Zt(t){return[Oe(t[1],t[0])*en,i(qe(-1,De(1,t[2])))*en]}function te(t){var e=t[0]*nn,n=t[1]*nn,r=Fe(n);return[r*Fe(e),r*Be(e),Be(n)]}function ee(t,e){return{type:"FeatureCollection",features:t.features.map(function(t){return ne(t,e)})}}function ne(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:ie(t.geometry,e)}}function re(t,e){return{type:"GeometryCollection",geometries:t.geometries.map(function(t){return ie(t,e)})}}function ie(t,n){if(!t)return null;if("GeometryCollection"===t.type)return re(t,n);var r;switch(t.type){case"Point":r=vi;break;case"MultiPoint":r=vi;break;case"LineString":r=gi;break;case"MultiLineString":r=gi;break;case"Polygon":r=mi;break;case"MultiPolygon":r=mi;break;case"Sphere":r=mi;break;default:return null}return e.geoStream(t,n(r)),r.result()}function oe(t){function e(e,r){var i=n?Xe(e*n/2)/n:e/2;if(!r)return[2*i,-t];var o=2*Ce(i*Be(r)),a=1/Xe(r);return[Be(o)*a,r+(1-Fe(o))*a-t]}var n=Be(t);return e.invert=function(e,r){if(Ne(r+=t)<We)return[n?2*Ce(n*e/2)/n:e,0];var a,u=e*e+r*r,c=0,s=10;do{var l=Xe(c),f=1/Fe(c),h=u-2*r*c+c*c;c-=a=(l*h+2*(c-r))/(2+h*f*f+2*(c-r)*l)}while(Ne(a)>We&&--s>0);var d=e*(l=Xe(c)),p=Xe(Ne(r)<Ne(c+1/l)?.5*i(d):.5*o(d)+$e/4)/Be(c);return[n?2*Ce(n*p)/n:2*p,c]},e}function ae(t,e){var n,r=De(18,36*Ne(e)/$e),i=Ie(r),o=r-i,a=(n=ki[i])[0],u=n[1],c=(n=ki[++i])[0],s=n[1],l=(n=ki[De(19,++i)])[0],f=n[1];return[t*(c+o*(l-a)/2+o*o*(l-2*c+a)/2),(e>0?Ye:-Ye)*(s+o*(f-u)/2+o*o*(f-2*s+u)/2)]}function ue(t){function e(e,n){var r=Fe(n),i=(t-1)/(t-r*Fe(e));return[i*r*Be(e),i*Be(n)]}return e.invert=function(e,n){var r=e*e+n*n,o=a(r),u=(t-a(1-r*(t+1)/(t-1)))/((t-1)/o+o/(t-1));return[Oe(e*u,o*a(1-u*u)),o?i(n*u/o):0]},e}function ce(t,e){function n(e,n){var a=r(e,n),u=a[1],c=u*o/(t-1)+i;return[a[0]*i/c,u/c]}var r=ue(t);if(!e)return r;var i=Fe(e),o=Be(e);return n.invert=function(e,n){var a=(t-1)/(t-1-n*o);return r.invert(a*e,a*n*i)},n}function se(t){return Math.floor(t*Si)/Si}function le(t){return t===Ni||t===Oi?[0,t]:[Ai,se(t)]}function fe(t){t[0]<=ji?t[0]=Ai:t[0]>=Ri&&(t[0]=Pi),t[1]<=Ci?t[1]=Ni:t[1]>=Fi&&(t[1]=Oi)}function he(t){t.forEach(fe)}function de(t,e){for(var n=0,r=t.length;n<r;++n){var i=t[n];i.polygon=t,e.push(i);for(var o=0,a=i.length;o<a;++o){var u=i[o],c=u[0],s=u[1];if(c<=ji||c>=Ri||s<=Ci||s>=Fi){fe(u);for(var l=o+1;l<a;++l){var f=i[l],h=f[0],d=f[1];if(h>ji&&h<Ri&&d>Ci&&d<Fi)break}if(l===o+1)continue;if(o){var p=i.slice(0,o+1);p.polygon=t,p[p.length-1]=le(s),e[e.length-1]=p}else e.pop();if(l>=a)break;e.push(i=i.slice(l-1)),i[0]=le(i[0][1]),i.polygon=t,o=-1,a=i.length}}}t.length=0}function pe(t){var e,n,r,i,o,a,u=t.length,c={},s={};for(e=0;e<u;++e)n=t[e],r=n[0],o=n[n.length-1],r[0]!==o[0]||r[1]!==o[1]?(n.index=e,c[r]=s[o]=n):(n.polygon.push(n),t[e]=null);for(e=0;e<u;++e)if(n=t[e]){if(r=n[0],o=n[n.length-1],i=s[r],a=c[o],delete c[r],delete s[o],r[0]===o[0]&&r[1]===o[1]){n.polygon.push(n);continue}i?(delete s[r],delete c[i[0]],i.pop(),t[i.index]=null,n=i.concat(n),n.polygon=i.polygon,i===a?n.polygon.push(n):(n.index=u++,t.push(c[n[0]]=s[n[n.length-1]]=n))):a?(delete c[o],delete s[a[a.length-1]],n.pop(),n=n.concat(a),n.polygon=a.polygon,n.index=u++,t[a.index]=null,t.push(c[n[0]]=s[n[n.length-1]]=n)):(n.push(n[0]),n.polygon.push(n))}}function ve(t){ge(t.geometry)}function ge(t){if(t){var e,n,r;switch(t.type){case"GeometryCollection":return void t.geometries.forEach(ge);case"Point":fe(t.coordinates);break;case"MultiPoint":case"LineString":he(t.coordinates);break;case"MultiLineString":t.coordinates.forEach(he);break;case"Polygon":de(t.coordinates,e=[]);break;case"MultiPolygon":for(e=[],n=-1,r=t.coordinates.length;++n<r;)de(t.coordinates[n],e);break;default:return}pe(e)}}function me(t,e){var n=Xe(e/2),r=Be(Ke*n);return[t*(.74482-.34588*r*r),1.70711*n]}function ye(t){function n(t,n){var i=e.geoGnomonicRaw(t,n);return i[0]*=r,i}var r=Fe(t);return n.invert=function(t,n){return e.geoGnomonicRaw.invert(t/r,n)},n}function be(){return we([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function we(t,e){return zi(ye,t,e)}function _e(t){function n(e,n){var c=o(Fe(n)*Fe(e-r)),s=o(Fe(n)*Fe(e-i)),l=n<0?-1:1;return c*=c,s*=s,[(c-s)/(2*t),l*a(4*u*s-(u-c+s)*(u-c+s))/(2*t)]}if(!(t*=2))return e.geoAzimuthalEquidistantRaw;var r=-t/2,i=-r,u=t*t,c=Xe(i),s=.5/Be(i);return n.invert=function(t,e){var n,u,l=e*e,f=Fe(a(l+(n=t+r)*n)),h=Fe(a(l+(n=t+i)*n));return[Oe(u=f-h,n=(f+h)*c),(e<0?-1:1)*o(a(n*n+u*u)*s)]},n}function xe(){return ke([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ke(t,e){return zi(_e,t,e)}function Ee(t,e){if(Ne(e)<We)return[t,0];var n=Ne(e/Ye),r=i(n);if(Ne(t)<We||Ne(Ne(e)-Ye)<We)return[0,He(e)*$e*Xe(r/2)];var o=Fe(r),u=Ne($e/t-t/$e)/2,c=u*u,s=o/(n+o-1),l=s*(2/n-1),f=l*l,h=f+c,d=s-f,p=c+s;return[He(t)*$e*(u*d+a(c*d*d-h*(s*s-f)))/h,He(e)*$e*(l*p-u*a((c+1)*h-p*p))/h]}function Me(t,e){if(Ne(e)<We)return[t,0];var n=Ne(e/Ye),r=i(n);if(Ne(t)<We||Ne(Ne(e)-Ye)<We)return[0,He(e)*$e*Xe(r/2)];var o=Fe(r),u=Ne($e/t-t/$e)/2,c=u*u,s=o*(a(1+c)-u*o)/(1+c*n*n);return[He(t)*$e*s,He(e)*$e*a(1-s*(2*u+s))]}function Te(t,e){if(Ne(e)<We)return[t,0];var n=e/Ye,r=i(n);if(Ne(t)<We||Ne(Ne(e)-Ye)<We)return[0,$e*Xe(r/2)];var o=($e/t-t/$e)/2,u=n/(1+Fe(r));return[$e*(He(t)*a(o*o+1-u*u)-o),$e*u]}function Se(t,e){if(!e)return[t,0];var n=Ne(e);if(!t||n===Ye)return[0,e];var r=n/Ye,i=r*r,o=(8*r-i*(i+2)-5)/(2*i*(r-1)),u=o*o,c=r*o,s=i+u+2*c,l=r+3*o,f=t/Ye,h=f+1/f,d=He(Ne(t)-Ye)*a(h*h-4),p=d*d,v=s*(i+u*p-1)+(1-i)*(i*(l*l+4*u)+12*c*u+4*u*u),g=(d*(s+u-1)+2*a(v))/(4*s+p);return[He(t)*Ye*g,He(e)*Ye*a(1+d*Ne(g)-g*g)]}function Ae(t,e){return[t*a(1-3*e*e/($e*$e)),e]}function je(t,e){var n=.90631*Be(e),r=a(1-n*n),i=a(2/(1+r*Fe(t/=3)));return[2.66723*r*i*Be(t),1.24104*n*i]}function Pe(t,e){var n=Fe(e),r=Fe(t)*n,i=1-r,o=Fe(t=Oe(Be(t)*n,-Be(e))),u=Be(t);return n=a(1-r*r),[u*n-o*i,-o*n-u*i]}function Re(t,e){var n=d(t,e);return[(n[0]+t/Ye)/2,(n[1]+e)/2]}var Ne=Math.abs,Ce=Math.atan,Oe=Math.atan2,Fe=Math.cos,Le=Math.exp,Ie=Math.floor,ze=Math.log,qe=Math.max,De=Math.min,Ue=Math.pow,Ge=Math.round,He=Math.sign||function(t){return t>0?1:t<0?-1:0},Be=Math.sin,Xe=Math.tan,We=1e-6,Ve=1e-12,$e=Math.PI,Ye=$e/2,Ke=$e/4,Je=Math.SQRT1_2,Qe=a(2),Ze=a($e),tn=2*$e,en=180/$e,nn=$e/180,rn=function(){var t=Ye,n=e.geoProjectionMutator(h),r=n(t);return r.radius=function(e){return arguments.length?n(t=e*nn):t*en},r.scale(179.976).clipAngle(147)};d.invert=function(t,e){if(!(t*t+4*e*e>$e*$e+We)){var n=t,r=e,i=25;do{var u,c=Be(n),s=Be(n/2),l=Fe(n/2),f=Be(r),h=Fe(r),d=Be(2*r),p=f*f,v=h*h,g=s*s,m=1-v*l*l,y=m?o(h*l)*a(u=1/m):u=0,b=2*y*h*s-t,w=y*f-e,_=u*(v*g+y*h*l*p),x=u*(.5*c*d-2*y*f*s),k=.25*u*(d*s-y*f*v*c),E=u*(p*l+y*g*h),M=x*k-E*_;if(!M)break;var T=(w*x-b*E)/M,S=(b*k-w*_)/M;n-=T,r-=S}while((Ne(T)>We||Ne(S)>We)&&--i>0);return[n,r]}};var on=function(){return e.geoProjection(d).scale(152.63)},an=function(){var t=20*nn,n=t>=0?1:-1,r=Xe(n*t),i=e.geoProjectionMutator(p),o=i(t),a=o.stream;return o.parallel=function(e){return arguments.length?(r=Xe((n=(t=e*nn)>=0?1:-1)*t),i(t)):t*en},o.stream=function(e){var i=o.rotate(),u=a(e),c=(o.rotate([0,0]),a(e));return o.rotate(i),u.sphere=function(){c.polygonStart(),c.lineStart();for(var e=n*-180;n*e<180;e+=90*n)c.point(e,90*n);for(;n*(e-=t)>=-180;)c.point(e,n*-Oe(Fe(e*nn/2),r)*en);c.lineEnd(),c.polygonEnd()},u},o.scale(218.695).center([0,28.0974])};v.invert=function(t,e){if(t*=3/8,e*=3/8,!t&&Ne(e)>1)return null;var n=t*t,r=e*e,o=1+n+r,u=a((o-a(o*o-4*e*e))/2),h=i(u)/3,d=u?f(Ne(e/u))/3:l(Ne(t))/3,p=Fe(h),v=s(d),g=v*v-p*p;return[2*He(t)*Oe(c(d)*p,.25-g),2*He(e)*Oe(v*Be(h),.25+g)]};var un=function(){return e.geoProjection(v).scale(66.1603)},cn=a(8),sn=ze(1+Qe);g.invert=function(t,e){if((r=Ne(e))<sn)return[t,2*Ce(Le(e))-Ye];var n,r,i=Ke,o=25;do{var a=Fe(i/2),u=Xe(i/2);i-=n=(cn*(i-Ke)-ze(u)-r)/(cn-a*a/(2*u))}while(Ne(n)>Ve&&--o>0);return[t/(Fe(i)*(cn-1/Be(i))),He(e)*i]};var ln=function(){return e.geoProjection(g).scale(112.314)},fn=function(){var t=5,n=e.geoProjectionMutator(m),r=n(t),o=r.stream,a=.01,u=-Fe(a*nn),c=Be(a*nn);return r.lobes=function(e){return arguments.length?n(t=+e):t},r.stream=function(e){var n=r.rotate(),s=o(e),l=(r.rotate([0,0]),o(e));return r.rotate(n),s.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,n=360/t,r=2*$e/t,o=90-180/t,s=Ye;e<t;++e,o-=n,s-=r)l.point(Oe(c*Fe(s),u)*en,i(c*Be(s))*en),o<-90?(l.point(-90,-180-o-a),l.point(-90,-180-o+a)):(l.point(90,o+a),l.point(90,o-a));l.lineEnd(),l.polygonEnd()},s},r.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},hn=b(Qe/Ye,Qe,$e),dn=function(){return e.geoProjection(hn).scale(169.529)},pn=2.00276,vn=1.11072;w.invert=function(t,e){var n,r,i=pn*e,o=e<0?-Ke:Ke,a=25;do r=i-Qe*Be(o),o-=n=(Be(2*o)+2*o-$e*Be(r))/(2*Fe(2*o)+2+$e*Fe(r)*Qe*Fe(o));while(Ne(n)>We&&--a>0);return r=i-Qe*Be(o),[t*(1/Fe(r)+vn/Fe(o))/pn,r]};var gn=function(){return e.geoProjection(w).scale(160.857)},mn=function(t){var n=0,r=e.geoProjectionMutator(t),i=r(n);return i.parallel=function(t){return arguments.length?r(n=t*nn):n*en},i};_.invert=function(t,e){return[t/Fe(e),e]};var yn=function(){return e.geoProjection(_).scale(152.63)},bn=function(){return mn(x).scale(123.082).center([0,26.1441]).parallel(45)},wn=function(){var t=.5,n=e.geoProjectionMutator(k),r=n(t);return r.fraction=function(e){return arguments.length?n(t=+e):t},r.scale(158.837)},_n=b(1,4/$e,$e),xn=function(){return e.geoProjection(_n).scale(152.63)};R.invert=function(t,e){var n=(n=e/Ze-1)*n;return[n>0?t*a($e/n)/2:0,i(1-n)]};var kn=function(){return e.geoProjection(R).scale(95.6464).center([0,30])},En=function(){return mn(N).scale(249.828).clipAngle(90)},Mn=a(3);C.invert=function(t,e){var n=3*i(e/(Mn*Ze));return[Ze*t/(Mn*(2*Fe(2*n/3)-1)),n]};var Tn=function(){return e.geoProjection(C).scale(156.19)},Sn=function(){return mn(O).parallel(38.58).scale(195.044)},An=function(){return mn(F).scale(124.75)};L.invert=function(t,e){var n=a(8/(3*$e)),r=e/n;return[t/(n*(1-Ne(r)/$e)),r]};var jn=function(){return e.geoProjection(L).scale(165.664)};I.invert=function(t,e){var n=2-Ne(e)/a(2*$e/3);return[t*a(6*$e)/(2*n),He(e)*i((4-n*n)/3)]};var Pn=function(){return e.geoProjection(I).scale(165.664)};z.invert=function(t,e){var n=a($e*(4+$e))/2;return[t*n/(1+a(1-e*e*(4+$e)/(4*$e))),e*n/2]};var Rn=function(){return e.geoProjection(z).scale(180.739)};q.invert=function(t,e){var n=e*a((4+$e)/$e)/2,r=i(n),o=Fe(r);return[t/(2/a($e*(4+$e))*(1+o)),i((r+n*(o+2))/(2+Ye))]};var Nn=function(){return e.geoProjection(q).scale(180.739)};D.invert=function(t,e){var n=a(2+$e),r=e*n/2;return[n*t/(1+Fe(r)),r]};var Cn=function(){return e.geoProjection(D).scale(173.044)};U.invert=function(t,e){var n=1+Ye,r=a(n/2);return[2*t*r/(1+Fe(e*=r)),i((e+Be(e))/n)]};var On=function(){return e.geoProjection(U).scale(173.044)},Fn=3+2*Qe;G.invert=function(t,e){if(!(n=v.invert(t/1.2,1.065*e)))return null;var n,r=n[0],i=n[1],o=20;t/=Fn,e/=Fn;do{var u=r/2,c=i/2,s=Be(u),l=Fe(u),f=Be(c),h=Fe(c),d=Fe(i),p=a(d),g=f/(h+Qe*l*p),m=g*g,y=a(2/(1+m)),b=Qe*h+(l+s)*p,w=Qe*h+(l-s)*p,_=b/w,x=a(_),k=x-1/x,E=x+1/x,M=y*k-2*ze(x)-t,T=y*g*E-2*Ce(g)-e,S=f&&Je*p*s*m/f,A=(Qe*l*h+p)/(2*(h+Qe*l*p)*(h+Qe*l*p)*p),j=-.5*g*y*y*y,P=j*S,R=j*A,N=(N=2*h+Qe*p*(l-s))*N*x,C=(Qe*l*h*p+d)/N,O=-(Qe*s*f)/(p*N),F=k*P-2*C/x+y*(C+C/_),L=k*R-2*O/x+y*(O+O/_),I=g*E*P-2*S/(1+m)+y*E*S+y*g*(C-C/_),z=g*E*R-2*A/(1+m)+y*E*A+y*g*(O-O/_),q=L*I-z*F;if(!q)break;var D=(T*L-M*z)/q,U=(M*I-T*F)/q;r-=D,i=qe(-Ye,De(Ye,i-U))}while((Ne(D)>We||Ne(U)>We)&&--o>0);return Ne(Ne(i)-Ye)<We?[0,i]:o&&[r,i]};var Ln=function(){return e.geoProjection(G).scale(62.5271)},In=Fe(35*nn);H.invert=function(t,e){var n=e/(1+In);return[t&&t/(In*a(1-n*n)),2*Ce(n)]};var zn=function(){return e.geoProjection(H).scale(137.152)};B.invert=function(t,e){var n=Ce(e/Ze),r=Fe(n),i=2*n;return[t*Ze/2/(Fe(i)*r*r),i]};var qn=function(){return e.geoProjection(B).scale(135.264)},Dn=function(t){function n(t){return o(X(t))}function r(t){n[t]=function(e){return arguments.length?(o[t](e),n):o[t]()}}null==t&&(t=e.geoOrthographic);var o=t(),a=e.geoEquirectangular().scale(en).precision(0).clipAngle(null).translate([0,0]);return o.invert&&(n.invert=function(t){return W(o.invert(t))}),n.stream=function(t){var e=o.stream(t),n=a.stream({point:function(t,n){e.point(t/2,i(Xe(-n/2*nn))*en)},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}});return n.sphere=e.sphere,n},n.rotate=function(t){return arguments.length?(a.rotate(t),n):a.rotate()},n.center=function(t){return arguments.length?(o.center(X(t)),n):W(o.center())},r("clipAngle"),r("clipExtent"),r("scale"),r("translate"),r("precision"),n.scale(249.5)},Un=function(){var t=6,n=30*nn,r=Fe(n),o=Be(n),a=e.geoProjectionMutator(V),u=a(n,t),c=u.stream,s=.01,l=-Fe(s*nn),f=Be(s*nn);return u.radius=function(e){return arguments.length?(r=Fe(n=e*nn),o=Be(n),a(n,t)):n*en},u.lobes=function(e){return arguments.length?a(n,t=+e):t},u.stream=function(e){var n=u.rotate(),a=c(e),s=(u.rotate([0,0]),c(e));return u.rotate(n),a.sphere=function(){s.polygonStart(),s.lineStart();for(var e=0,n=2*$e/t,a=0;e<t;++e,a-=n)s.point(Oe(f*Fe(a),l)*en,i(f*Be(a))*en),s.point(Oe(o*Fe(a-n/2),r)*en,i(o*Be(a-n/2))*en);s.lineEnd(),s.polygonEnd()},a},u.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},Gn=function(t,e,n,r,o,u,c,s){function l(a,l){if(!l)return[t*a/$e,0];var f=l*l,h=t+f*(e+f*(n+f*r)),d=l*(o-1+f*(u-s+f*c)),p=(h*h+d*d)/(2*d),v=a*i(h/p)/$e;return[p*Be(v),l*(1+f*s)+p*(1-Fe(v))]}return arguments.length<8&&(s=0),l.invert=function(l,f){var h,d,p=$e*l/t,v=f,g=50;do{var m=v*v,y=t+m*(e+m*(n+m*r)),b=v*(o-1+m*(u-s+m*c)),w=y*y+b*b,_=2*b,x=w/_,k=x*x,E=i(y/x)/$e,M=p*E,T=y*y,S=(2*e+m*(4*n+6*m*r))*v,A=o+m*(3*u+5*m*c),j=2*(y*S+b*(A-1)),P=2*(A-1),R=(j*_-w*P)/(_*_),N=Fe(M),C=Be(M),O=x*N,F=x*C,L=p/$e*(1/a(1-T/k))*(S*x-y*R)/k,I=F-l,z=v*(1+m*s)+x-O-f,q=R*C+O*L,D=O*E,U=1+R-(R*N-F*L),G=F*E,H=q*G-U*D;if(!H)break;p-=h=(z*q-I*U)/H,v-=d=(I*G-z*D)/H}while((Ne(h)>We||Ne(d)>We)&&--g>0);return[p,v]},l},Hn=Gn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Bn=function(){return e.geoProjection(Hn).scale(149.995)},Xn=Gn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Wn=function(){return e.geoProjection(Xn).scale(153.93)},Vn=Gn(5/6*$e,-.62636,-.0344,0,1.3493,-.05524,0,.045),$n=function(){return e.geoProjection(Vn).scale(130.945)};K.invert=function(t,e){var n,r=t,i=e,o=50;do{var a=i*i;i-=n=(i*(1+a/12)-e)/(1+a/4)}while(Ne(n)>We&&--o>0);o=50,t/=1-.162388*a;do{var u=(u=r*r)*u;r-=n=(r*(.87-952426e-9*u)-t)/(.87-.00476213*u)}while(Ne(n)>We&&--o>0);return[r,i]};var Yn=function(){return e.geoProjection(K).scale(131.747)},Kn=Gn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),Jn=function(){return e.geoProjection(Kn).scale(131.087)},Qn=function(t){function e(e,r){var i=e>0?-.5:.5,o=t(e+i*$e,r);return o[0]-=i*n,o}var n=t(Ye,0)[0]-t(-Ye,0)[0];return t.invert&&(e.invert=function(e,r){var i=e>0?-.5:.5,o=t.invert(e+i*n,r),a=o[0]-i*$e;return a<-$e?a+=2*$e:a>$e&&(a-=2*$e),o[0]=a,o}),e};J.invert=function(t,e){var n=He(t),r=He(e),o=-n*t,a=-r*e,u=a/o<1,c=Z(u?a:o,u?o:a),s=c[0],l=c[1],f=Fe(l);return u&&(s=-Ye-s),[n*(Oe(Be(s)*f,-Be(l))+$e),r*i(Fe(s)*f)]};var Zn=function(){return e.geoProjection(Qn(J)).scale(239.75)};it.invert=function(t,e){var n=(Qe-1)/(Qe+1),r=a(1-n*n),i=rt(Ye,r*r),o=-1,u=tt(.5*i-e,-t,r*r),c=at(u[0],u[1]),s=Oe(c[1],c[0])/o;return[s,2*Ce(Le(.5/o*ze(n*c[0]*c[0]+n*c[1]*c[1])))-Ye]};var tr=function(){return e.geoProjection(Qn(it)).scale(151.496)};ct.invert=function(t,e){var n=2*i(e/2);return[t*Fe(n/2)/Fe(n),n]};var er=function(){var t=2,n=e.geoProjectionMutator(ut),r=n(t);return r.coefficient=function(e){return arguments.length?n(t=+e):t},r.scale(169.529)},nr=function(){var t=0,n=e.geoProjectionMutator(st),r=n(t),i=r.rotate,o=r.stream,a=e.geoCircle();return r.parallel=function(e){if(!arguments.length)return t*en;var i=r.rotate();return n(t=e*nn).rotate(i)},r.rotate=function(e){return arguments.length?(i.call(r,[e[0],e[1]-t*en]),a.center([-e[0],-e[1]]),r):(e=i.call(r),e[1]+=t*en,e)},r.stream=function(t){return t=o(t),t.sphere=function(){t.polygonStart();var e,n=.01,r=a.radius(90-n)().coordinates[0],i=r.length-1,o=-1;for(t.lineStart();++o<i;)t.point((e=r[o])[0],e[1]);for(t.lineEnd(),r=a.radius(90+n)().coordinates[0],i=r.length-1,t.lineStart();--o>=0;)t.point((e=r[o])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},r.scale(79.4187).parallel(45).clipAngle(179.999)},rr=41+48/36+37/3600,ir=O(0),or=function(){var t=4,n=e.geoProjectionMutator(ft),r=n(t),i=r.stream;return r.lobes=function(e){return arguments.length?n(t=+e):t},r.stream=function(n){var o=r.rotate(),a=i(n),u=(r.rotate([0,0]),i(n));return r.rotate(o),a.sphere=function(){e.geoStream(ht(180/t),u)},a},r.scale(239.75)},ar=function(){var t=1,n=e.geoProjectionMutator(dt),r=n(t);return r.ratio=function(e){return arguments.length?n(t=+e):t},r.scale(167.774).center([0,18.67])},ur=.7109889596207567,cr=.0528035274542;pt.invert=function(t,e){return e>-ur?hn.invert(t,e-cr):_.invert(t,e)};var sr=function(){return e.geoProjection(pt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};vt.invert=function(t,e){return Ne(e)>ur?hn.invert(t,e+(e>0?cr:-cr)):_.invert(t,e)};var lr=function(){return e.geoProjection(vt).scale(152.63)},fr=function(t,n){function r(e,r){for(var i=r<0?-1:1,o=n[+(r<0)],a=0,u=o.length-1;a<u&&e>o[a][2][0];++a);var c=t(e-o[a][1][0],r);return c[0]+=t(o[a][1][0],i*r>i*o[a][0][1]?o[a][0][1]:r)[0],c}var i=yt(n);n=n.map(function(t){return t.map(function(t){return[[t[0][0]*nn,t[0][1]*nn],[t[1][0]*nn,t[1][1]*nn],[t[2][0]*nn,t[2][1]*nn]]})});var o=n.map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],o=t(e[1][0],e[0][1])[1],a=t(e[1][0],e[1][1])[1];return o>a&&(n=o,o=a,a=n),[[r,o],[i,a]]})}),a=e.geoProjection(r),u=a.stream;return t.invert&&(r.invert=function(e,i){for(var a=o[+(i<0)],u=n[+(i<0)],c=0,s=a.length;c<s;++c){var l=a[c];if(l[0][0]<=e&&e<l[1][0]&&l[0][1]<=i&&i<l[1][1]){var f=t.invert(e-t(u[c][1][0],0)[0],i);return f[0]+=u[c][1][0],gt(r(f[0],f[1]),[e,i])?f:null}}}),a.stream=function(t){var n=a.rotate(),r=u(t),o=(a.rotate([0,0]),u(t));return a.rotate(n),r.sphere=function(){e.geoStream(i,o)},r},a},hr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],dr=function(){return fr(w,hr).scale(160.857)},pr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],vr=function(){return fr(vt,pr).scale(152.63)},gr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],mr=function(){return fr(hn,gr).scale(169.529)},yr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],br=function(){return fr(hn,yr).scale(169.529).rotate([20,0])},wr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],_r=function(){return fr(pt,wr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},xr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],kr=function(){return fr(_,xr).scale(152.63).rotate([-20,0])};bt.invert=function(t,e){return[tn/3*t/a($e*$e/3-e*e),e]};var Er=function(){return e.geoProjection(bt).scale(158.837)},Mr=function(){var t=.5,n=e.geoProjectionMutator(wt),r=n(t);return r.spacing=function(e){return arguments.length?n(t=+e):t},r.scale(124.75)},Tr=$e/Qe;_t.invert=function(t,e){var n=Ne(t),r=Ne(e),i=We,u=Ye;r<Tr?u*=r/Tr:i+=6*o(Tr/r);for(var c=0;c<25;c++){var s=Be(u),l=a(Fe(u)),f=Be(u/2),h=Fe(u/2),d=Be(i/6),p=Fe(i/6),v=.5*i*(1+l)-n,g=u/(h*p)-r,m=l?-.25*i*s/l:0,y=.5*(1+l),b=(1+.5*u*f/h)/(h*p),w=u/h*(d/6)/(p*p),_=m*w-b*y,x=(v*w-g*y)/_,k=(g*m-v*b)/_;if(u-=x,i-=k,Ne(x)<We&&Ne(k)<We)break}return[t<0?-i:i,e<0?-u:u]};var Sr=function(){return e.geoProjection(_t).scale(97.2672)};xt.invert=function(t,e){var n=He(t)*$e,r=e/2,i=50;do{var o=n*n,a=r*r,u=n*r,c=n*(.975534+a*(-.119161+o*-.0143059+a*-.0547009))-t,s=r*(1.00384+o*(.0802894+a*-.02855+199025e-9*o)+a*(.0998909+a*-.0491032))-e,l=.975534-a*(.119161+3*o*.0143059+.0547009*a),f=-u*(.238322+.2188036*a+.0286118*o),h=u*(.1605788+7961e-7*o+-.0571*a),d=1.00384+o*(.0802894+199025e-9*o)+a*(3*(.0998909-.02855*o)-.245516*a),p=f*h-d*l,v=(s*f-c*d)/p,g=(c*h-s*l)/p;n-=v,r-=g}while((Ne(v)>We||Ne(g)>We)&&--i>0);return i&&[n,r]};var Ar=function(){return e.geoProjection(xt).scale(139.98)};kt.invert=function(t,e){var n=t*t,r=e*e,u=r+1,c=t?Je*a((u-a(n*n+2*n*(r-1)+u*u))/n+1):1/a(u);return[i(t*c),He(e)*o(c)]};var jr=function(){return e.geoProjection(kt).scale(144.049).clipAngle(89.999)},Pr=function(){return mn(Et).parallel(40).scale(158.837)};Mt.invert=function(t,e){return[t,2.5*Ce(Le(.8*e))-.625*$e]};var Rr=function(){return e.geoProjection(Mt).scale(108.318)},Nr=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Cr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Or=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Fr=[[.9245,0],[0,0],[.01943,0]],Lr=[[.721316,0],[0,0],[-.00881625,-.00617325]],Ir=a(6),zr=a(7);Ct.invert=function(t,e){var n=3*i(e*zr/9);return[t*zr/(Ir*(2*Fe(2*n/3)-1)),i(3*Be(n)*Ir/7)]};var qr=function(){return e.geoProjection(Ct).scale(164.859)};Ot.invert=function(t,e){var n=e*a(2+Qe)/(2*a(3)),r=2*i(n);return[3*Qe*t/(1+2*Fe(r)/Fe(r/2)),i((n+Be(r))/(1+Je))]};var Dr=function(){return e.geoProjection(Ot).scale(188.209)};Ft.invert=function(t,e){var n=a(6/(4+$e)),r=e/n;return Ne(Ne(r)-Ye)<We&&(r=r<0?-Ye:Ye),[1.5*t/(n*(.5+Fe(r))),i((r/2+Be(r))/(1+$e/4))]};var Ur=function(){return e.geoProjection(Ft).scale(166.518)};Lt.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-e)/(1.007226+o*(.045255+a*(-.311325+.259866*o-.005916*11*a)))}while(Ne(n)>We&&--i>0);return[t/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]};var Gr=function(){return e.geoProjection(Lt).scale(175.295)};It.invert=function(t,e){for(var n=e/2,r=0,i=1/0;r<10&&Ne(i)>We;++r){var o=Fe(e/2);e-=i=(e-Xe(e/2)-n)/(1-.5/(o*o))}return[2*t/(1+Fe(e)),e]};var Hr=function(){return e.geoProjection(It).scale(152.63)},Br=1.0148,Xr=.23185,Wr=-.14499,Vr=.02406,$r=Br,Yr=5*Xr,Kr=7*Wr,Jr=9*Vr,Qr=1.790857183;zt.invert=function(t,e){e>Qr?e=Qr:e<-Qr&&(e=-Qr);
var n,r=e;do{var i=r*r;r-=n=(r*(Br+i*i*(Xr+i*(Wr+Vr*i)))-e)/($r+i*i*(Yr+i*(Kr+Jr*i)))}while(Ne(n)>We);return[t,r]};var Zr=function(){return e.geoProjection(zt).scale(139.319)};qt.invert=function(t,e){if(Ne(e)<We)return[t,0];var n,r=t*t+e*e,a=.5*e,u=10;do{var c=Xe(a),s=1/Fe(a),l=r-2*e*a+a*a;a-=n=(c*l+2*(a-e))/(2+l*s*s+2*(a-e)*c)}while(Ne(n)>We&&--u>0);return c=Xe(a),[(Ne(e)<Ne(a+1/c)?i(t*c):He(t)*(o(Ne(t*c))+Ye))/Be(a),a]};var ti=function(){return e.geoProjection(qt).scale(103.74)},ei=function(t,e){var n=Gt(t[1],t[0]),r=Gt(e[1],e[0]),i=Bt(n,r),o=Ht(n)/Ht(r);return Ut([1,0,t[0][0],0,1,t[0][1]],Ut([o,0,0,0,o,0],Ut([Fe(i),Be(i),0,-Be(i),Fe(i),0],[1,0,-e[0][0],0,1,-e[0][1]])))},ni=function(t,n,r){function i(t,e){if(t.edges=$t(t.face),e)if(e.face){var n=t.shared=Vt(t.face,e.face),r=ei(n.map(e.project),n.map(t.project));t.transform=e.transform?Ut(e.transform,r):r;for(var o=e.edges,a=0,u=o.length;a<u;++a)Wt(n[0],o[a][1])&&Wt(n[1],o[a][0])&&(o[a]=t),Wt(n[0],o[a][0])&&Wt(n[1],o[a][1])&&(o[a]=t);for(o=t.edges,a=0,u=o.length;a<u;++a)Wt(n[0],o[a][0])&&Wt(n[1],o[a][1])&&(o[a]=e),Wt(n[0],o[a][1])&&Wt(n[1],o[a][0])&&(o[a]=e)}else t.transform=e.transform;return t.children&&t.children.forEach(function(e){i(e,t)}),t}function o(t,e){var r,i=n(t,e),o=i.project([t*en,e*en]);return(r=i.transform)?[r[0]*o[0]+r[1]*o[1]+r[2],-(r[3]*o[0]+r[4]*o[1]+r[5])]:(o[1]=-o[1],o)}function a(t,e){var n=t.project.invert,r=t.transform,i=e;if(r&&(r=Dt(r),i=[r[0]*i[0]+r[1]*i[1]+r[2],r[3]*i[0]+r[4]*i[1]+r[5]]),n&&t===u(o=n(i)))return o;for(var o,c=t.children,s=0,l=c&&c.length;s<l;++s)if(o=a(c[s],e))return o}function u(t){return n(t[0]*nn,t[1]*nn)}r=null==r?-$e/6:r,i(t,{transform:[Fe(r),Be(r),0,-Be(r),Fe(r),0]}),Yt(t)&&(o.invert=function(e,n){var r=a(t,[e,-n]);return r&&(r[0]*=nn,r[1]*=nn,r)});var c=e.geoProjection(o),s=c.stream;return c.stream=function(e){var n=c.rotate(),r=s(e),i=(c.rotate([0,0]),s(e));return c.rotate(n),r.sphere=function(){i.polygonStart(),i.lineStart(),Xt(i,t),i.lineEnd(),i.polygonEnd()},r},c},ri=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],ii=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return ri[t]})}),oi=function(t){t=t||function(t){var n=e.geoCentroid({type:"MultiPoint",coordinates:t});return e.geoGnomonic().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=ii.map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,e){var r=n[t];r&&(r.children||(r.children=[])).push(n[e])}),ni(n[0],function(t,e){return n[t<-$e/2?e<0?6:4:t<0?e<0?2:0:t<$e/2?e<0?3:1:e<0?7:5]}).scale(101.858).center([0,45])},ai=2/a(3);Kt.invert=function(t,e){return R.invert(t/ai,e)};var ui=function(t){t=t||function(t){var n=e.geoCentroid({type:"MultiPoint",coordinates:t});return e.geoProjection(Kt).translate([0,0]).scale(1).rotate(n[1]>0?[-n[0],0]:[180-n[0],180])};var n=ii.map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,e){var r=n[t];r&&(r.children||(r.children=[])).push(n[e])}),ni(n[0],function(t,e){return n[t<-$e/2?e<0?6:4:t<0?e<0?2:0:t<$e/2?e<0?3:1:e<0?7:5]}).scale(121.906).center([0,48.5904])},ci=function(t){function n(t,e){var n=Fe(e),r=[n*Fe(t),n*Be(t),Be(e)],o=t<-$e/2?e<0?6:4:t<0?e<0?2:0:t<$e/2?e<0?3:1:e<0?7:5,u=i[o];return a[Jt(u[0],r)<0?8+3*o:Jt(u[1],r)<0?8+3*o+1:Jt(u[2],r)<0?8+3*o+2:o]}t=t||function(t){var n=6===t.length?e.geoCentroid({type:"MultiPoint",coordinates:t}):t[0];return e.geoGnomonic().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var r=ii.map(function(t){for(var e,n=t.map(te),r=n.length,i=n[r-1],o=[],a=0;a<r;++a)e=n[a],o.push(Zt([.9486832980505138*i[0]+.31622776601683794*e[0],.9486832980505138*i[1]+.31622776601683794*e[1],.9486832980505138*i[2]+.31622776601683794*e[2]]),Zt([.9486832980505138*e[0]+.31622776601683794*i[0],.9486832980505138*e[1]+.31622776601683794*i[1],.9486832980505138*e[2]+.31622776601683794*i[2]])),i=e;return o}),i=[],o=[-1,0,0,1,0,1,4,5];r.forEach(function(t,e){for(var n=ii[e],a=n.length,u=i[e]=[],c=0;c<a;++c)r.push([n[c],t[(2*c+2)%(2*a)],t[(2*c+1)%(2*a)]]),o.push(e),u.push(Qt(te(t[(2*c+2)%(2*a)]),te(t[(2*c+1)%(2*a)])))});var a=r.map(function(e){return{project:t(e),face:e}});return o.forEach(function(t,e){var n=a[t];n&&(n.children||(n.children=[])).push(a[e])}),ni(a[0],n).scale(110.625).center([0,45])},si=function(){},li=function(t){if((e=t.length)<4)return!1;for(var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0},fi=function(t,e){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length,u=a-1;o<a;u=o++){var c=t[o],s=c[0],l=c[1],f=t[u],h=f[0],d=f[1];l>r^d>r&&n<(h-s)*(r-l)/(d-l)+s&&(i=!i)}return i},hi=function(t,e){var n,r=e.stream;if(!r)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=ne;break;case"FeatureCollection":n=ee;break;default:n=ie}return n(t,r)},di=[],pi=[],vi={point:function(t,e){di.push([t,e])},result:function(){var t=di.length?di.length<2?{type:"Point",coordinates:di[0]}:{type:"MultiPoint",coordinates:di}:null;return di=[],t}},gi={lineStart:si,point:function(t,e){di.push([t,e])},lineEnd:function(){di.length&&(pi.push(di),di=[])},result:function(){var t=pi.length?pi.length<2?{type:"LineString",coordinates:pi[0]}:{type:"MultiLineString",coordinates:pi}:null;return pi=[],t}},mi={polygonStart:si,lineStart:si,point:function(t,e){di.push([t,e])},lineEnd:function(){var t=di.length;if(t){do di.push(di[0].slice());while(++t<4);pi.push(di),di=[]}},polygonEnd:si,result:function(){if(!pi.length)return null;var t=[],e=[];return pi.forEach(function(n){li(n)?t.push([n]):e.push(n)}),e.forEach(function(e){var n=e[0];t.some(function(t){if(fi(t[0],n))return t.push(e),!0})||t.push([e])}),pi=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},yi=function(t){function n(e,n){var i=Ne(e)<Ye,o=t(i?e:e>0?e-$e:e+$e,n),a=(o[0]-o[1])*Je,u=(o[0]+o[1])*Je;if(i)return[a,u];var c=r*Je,s=a>0^u>0?-1:1;return[s*a-He(u)*c,s*u-He(a)*c]}var r=t(Ye,0)[0]-t(-Ye,0)[0];return t.invert&&(n.invert=function(e,n){var i=(e+n)*Je,o=(n-e)*Je,a=Ne(i)<.5*r&&Ne(o)<.5*r;if(!a){var u=r*Je,c=i>0^o>0?-1:1,s=-c*(e+(o>0?1:-1)*u),l=-c*(n+(i>0?1:-1)*u);i=(-s-l)*Je,o=(s-l)*Je}var f=t.invert(i,o);return a||(f[0]+=i>0?$e:-$e),f}),e.geoProjection(n).rotate([-90,-90,45]).clipAngle(179.999)},bi=function(){return yi(J).scale(176.423)},wi=function(){return yi(it).scale(111.48)},_i=function(t,e){function n(t){t[0]=+t[0].toFixed(e),t[1]=+t[1].toFixed(e)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}function o(t){if(t)switch(t.type){case"GeometryCollection":t.geometries.forEach(o);break;case"Point":n(t.coordinates);break;case"MultiPoint":case"LineString":r(t.coordinates);break;case"MultiLineString":case"Polygon":i(t.coordinates);break;case"MultiPolygon":t.coordinates.forEach(i);break;default:return}}function a(t){o(t.geometry)}if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");if(t)switch(t.type){case"Feature":a(t);break;case"FeatureCollection":t.features.forEach(a);break;default:o(t)}return t},xi=function(){return mn(oe).scale(131.215)},ki=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ki.forEach(function(t){t[1]*=1.0144}),ae.invert=function(t,e){var n=e/Ye,r=90*n,i=De(18,Ne(r/5)),o=qe(0,Ie(i));do{var a=ki[o][1],u=ki[o+1][1],c=ki[De(19,o+2)][1],s=c-a,l=c-2*u+a,f=2*(Ne(n)-u)/s,h=l/s,d=f*(1-h*f*(1-2*h*f));if(d>=0||1===o){r=(e>=0?5:-5)*(d+i);var p,v=50;do i=De(18,Ne(r)/5),o=Ie(i),d=i-o,a=ki[o][1],u=ki[o+1][1],c=ki[De(19,o+2)][1],r-=(p=(e>=0?Ye:-Ye)*(u+d*(c-a)/2+d*d*(c-2*u+a)/2)-e)*en;while(Ne(p)>Ve&&--v>0);break}}while(--o>=0);var g=ki[o][0],m=ki[o+1][0],y=ki[De(19,o+2)][0];return[t/(m+d*(y-g)/2+d*d*(y-2*m+g)/2),r*nn]};var Ei=function(){return e.geoProjection(ae).scale(152.63)},Mi=function(){var t=2,n=0,r=e.geoProjectionMutator(ce),i=r(t,n);return i.distance=function(e){return arguments.length?r(t=+e,n):t},i.tilt=function(e){return arguments.length?r(t,n=e*nn):n*en},i.scale(432.147).clipAngle(o(1/t)*en-1e-6)},Ti=1e-4,Si=1e4,Ai=-180,ji=Ai+Ti,Pi=180,Ri=Pi-Ti,Ni=-90,Ci=Ni+Ti,Oi=90,Fi=Oi-Ti,Li=function(t){if(t)switch(t.type){case"Feature":ve(t);break;case"FeatureCollection":t.features.forEach(ve);break;default:ge(t)}return t};me.invert=function(t,e){var n=e/1.70711,r=Be(Ke*n);return[t/(.74482-.34588*r*r),2*Ce(n)]};var Ii=function(){return e.geoProjection(me).scale(146.153)},zi=function(t,n,r){var o=e.geoInterpolate(n,r),a=o(.5),u=e.geoRotation([-a[0],-a[1]])(n),c=o.distance/2,s=-i(Be(u[1]*nn)/Be(c)),l=[-a[0],-a[1],-(u[0]>0?$e-s:s)*en],f=e.geoProjection(t(c)).rotate(l),h=e.geoRotation(l),d=f.center;return delete f.rotate,f.center=function(t){return arguments.length?d(h(t)):h.invert(d())},f.clipAngle(90)};Ee.invert=function(t,e){if(Ne(e)<We)return[t,0];if(Ne(t)<We)return[0,Ye*Be(2*Ce(e/$e))];var n=(t/=$e)*t,r=(e/=$e)*e,i=n+r,u=i*i,c=-Ne(e)*(1+i),s=c-2*r+n,l=-2*c+1+2*r+u,f=r/l+(2*s*s*s/(l*l*l)-9*c*s/(l*l))/27,h=(c-s*s/(3*l))/l,d=2*a(-h/3),p=o(3*f/(h*d))/3;return[$e*(i-1+a(1+2*(n-r)+u))/(2*t),He(e)*$e*(-d*Fe(p+$e/3)-s/(3*l))]};var qi=function(){return e.geoProjection(Ee).scale(79.4183)};Me.invert=function(t,e){if(!t)return[0,Ye*Be(2*Ce(e/$e))];var n=Ne(t/$e),r=(1-n*n-(e/=$e)*e)/(2*n),i=r*r,o=a(i+1);return[He(t)*$e*(o-r),He(e)*Ye*Be(2*Oe(a((1-2*r*n)*(r+o)-n),a(o+r+n)))]};var Di=function(){return e.geoProjection(Me).scale(79.4183)};Te.invert=function(t,e){if(!e)return[t,0];var n=e/$e,r=($e*$e*(1-n*n)-t*t)/(2*$e*t);return[t?$e*(He(t)*a(r*r+1)-r):0,Ye*Be(2*Ce(n))]};var Ui=function(){return e.geoProjection(Te).scale(79.4183)};Se.invert=function(t,e){var n;if(!t||!e)return[t,e];e/=$e;var r=He(t)*t/Ye,i=(r*r-1+4*e*e)/Ne(r),o=i*i,u=2*e,c=50;do{var s=u*u,l=(8*u-s*(s+2)-5)/(2*s*(u-1)),f=(3*u-s*u-10)/(2*s*u),h=l*l,d=u*l,p=u+l,v=p*p,g=u+3*l,m=v*(s+h*o-1)+(1-s)*(s*(g*g+4*h)+h*(12*d+4*h)),y=-2*p*(4*d*h+(1-4*s+3*s*s)*(1+f)+h*(-6+14*s-o+(-8+8*s-2*o)*f)+d*(-8+12*s+(-10+10*s-o)*f)),b=a(m),w=i*(v+h-1)+2*b-r*(4*v+o),_=i*(2*l*f+2*p*(1+f))+y/b-8*p*(i*(-1+h+v)+2*b)*(1+f)/(o+4*v);u-=n=w/_}while(n>We&&--c>0);return[He(t)*(a(i*i+4)+i)*$e/4,Ye*u]};var Gi=function(){return e.geoProjection(Se).scale(127.16)},Hi=4*$e+3*a(3),Bi=2*a(2*$e*a(3)/Hi),Xi=b(Bi*a(3)/$e,Bi,Hi/6),Wi=function(){return e.geoProjection(Xi).scale(176.84)};Ae.invert=function(t,e){return[t/a(1-3*e*e/($e*$e)),e]};var Vi=function(){return e.geoProjection(Ae).scale(152.63)};je.invert=function(t,e){var n=t/2.66723,r=e/1.24104,o=a(n*n+r*r),u=2*i(o/2);return[3*Oe(t*Xe(u),2.66723*o),o&&i(e*Be(u)/(1.24104*.90631*o))]};var $i=function(){return e.geoProjection(je).scale(172.632)};Pe.invert=function(t,e){var n=(t*t+e*e)/-2,r=a(-n*(2+n)),o=e*n+t*r,u=t*n-e*r,c=a(u*u+o*o);return[Oe(r*o,c*(1+n)),c?-i(r*u/c):0]};var Yi=function(){return e.geoProjection(Pe).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)};Re.invert=function(t,e){var n=t,r=e,i=25;do{var u,c=Fe(r),s=Be(r),l=Be(2*r),f=s*s,h=c*c,d=Be(n),p=Fe(n/2),v=Be(n/2),g=v*v,m=1-h*p*p,y=m?o(c*p)*a(u=1/m):u=0,b=.5*(2*y*c*v+n/Ye)-t,w=.5*(y*s+r)-e,_=.5*u*(h*g+y*c*p*f)+.5/Ye,x=u*(d*l/4-y*s*v),k=.125*u*(l*v-y*s*h*d),E=.5*u*(f*p+y*g*c)+.5,M=x*k-E*_,T=(w*x-b*E)/M,S=(b*k-w*_)/M;n-=T,r-=S}while((Ne(T)>We||Ne(S)>We)&&--i>0);return[n,r]};var Ki=function(){return e.geoProjection(Re).scale(158.837)};t.geoAiry=rn,t.geoAiryRaw=h,t.geoAitoff=on,t.geoAitoffRaw=d,t.geoArmadillo=an,t.geoArmadilloRaw=p,t.geoAugust=un,t.geoAugustRaw=v,t.geoBaker=ln,t.geoBakerRaw=g,t.geoBerghaus=fn,t.geoBerghausRaw=m,t.geoBoggs=gn,t.geoBoggsRaw=w,t.geoBonne=bn,t.geoBonneRaw=x,t.geoBottomley=wn,t.geoBottomleyRaw=k,t.geoBromley=xn,t.geoBromleyRaw=_n,t.geoChamberlin=P,t.geoChamberlinRaw=S,t.geoChamberlinAfrica=j,t.geoCollignon=kn,t.geoCollignonRaw=R,t.geoCraig=En,t.geoCraigRaw=N,t.geoCraster=Tn,t.geoCrasterRaw=C,t.geoCylindricalEqualArea=Sn,t.geoCylindricalEqualAreaRaw=O,t.geoCylindricalStereographic=An,t.geoCylindricalStereographicRaw=F,t.geoEckert1=jn,t.geoEckert1Raw=L,t.geoEckert2=Pn,t.geoEckert2Raw=I,t.geoEckert3=Rn,t.geoEckert3Raw=z,t.geoEckert4=Nn,t.geoEckert4Raw=q,t.geoEckert5=Cn,t.geoEckert5Raw=D,t.geoEckert6=On,t.geoEckert6Raw=U,t.geoEisenlohr=Ln,t.geoEisenlohrRaw=G,t.geoFahey=zn,t.geoFaheyRaw=H,t.geoFoucaut=qn,t.geoFoucautRaw=B,t.geoGilbert=Dn,t.geoGingery=Un,t.geoGingeryRaw=V,t.geoGinzburg4=Bn,t.geoGinzburg4Raw=Hn,t.geoGinzburg5=Wn,t.geoGinzburg5Raw=Xn,t.geoGinzburg6=$n,t.geoGinzburg6Raw=Vn,t.geoGinzburg8=Yn,t.geoGinzburg8Raw=K,t.geoGinzburg9=Jn,t.geoGinzburg9Raw=Kn,t.geoGringorten=Zn,t.geoGringortenRaw=J,t.geoGuyou=tr,t.geoGuyouRaw=it,t.geoHammer=er,t.geoHammerRaw=ut,t.geoHammerRetroazimuthal=nr,t.geoHammerRetroazimuthalRaw=st,t.geoHealpix=or,t.geoHealpixRaw=ft,t.geoHill=ar,t.geoHillRaw=dt,t.geoHomolosine=lr,t.geoHomolosineRaw=vt,t.geoInterrupt=fr,t.geoInterruptedBoggs=dr,t.geoInterruptedHomolosine=vr,t.geoInterruptedMollweide=mr,t.geoInterruptedMollweideHemispheres=br,t.geoInterruptedSinuMollweide=_r,t.geoInterruptedSinusoidal=kr,t.geoKavrayskiy7=Er,t.geoKavrayskiy7Raw=bt,t.geoLagrange=Mr,t.geoLagrangeRaw=wt,t.geoLarrivee=Sr,t.geoLarriveeRaw=_t,t.geoLaskowski=Ar,t.geoLaskowskiRaw=xt,t.geoLittrow=jr,t.geoLittrowRaw=kt,t.geoLoximuthal=Pr,t.geoLoximuthalRaw=Et,t.geoMiller=Rr,t.geoMillerRaw=Mt,t.geoModifiedStereographic=Nt,t.geoModifiedStereographicRaw=Tt,t.geoModifiedStereographicAlaska=St,t.geoModifiedStereographicGs48=At,t.geoModifiedStereographicGs50=jt,t.geoModifiedStereographicMiller=Pt,t.geoModifiedStereographicLee=Rt,t.geoMollweide=dn,t.geoMollweideRaw=hn,t.geoMtFlatPolarParabolic=qr,t.geoMtFlatPolarParabolicRaw=Ct,t.geoMtFlatPolarQuartic=Dr,t.geoMtFlatPolarQuarticRaw=Ot,t.geoMtFlatPolarSinusoidal=Ur,t.geoMtFlatPolarSinusoidalRaw=Ft,t.geoNaturalEarth=Gr,t.geoNaturalEarthRaw=Lt,t.geoNellHammer=Hr,t.geoNellHammerRaw=It,t.geoPatterson=Zr,t.geoPattersonRaw=zt,t.geoPolyconic=ti,t.geoPolyconicRaw=qt,t.geoPolyhedral=ni,t.geoPolyhedralButterfly=oi,t.geoPolyhedralCollignon=ui,t.geoPolyhedralWaterman=ci,t.geoProject=hi,t.geoGringortenQuincuncial=bi,t.geoPeirceQuincuncial=wi,t.geoPierceQuincuncial=wi,t.geoQuantize=_i,t.geoQuincuncial=yi,t.geoRectangularPolyconic=xi,t.geoRectangularPolyconicRaw=oe,t.geoRobinson=Ei,t.geoRobinsonRaw=ae,t.geoSatellite=Mi,t.geoSatelliteRaw=ce,t.geoSinuMollweide=sr,t.geoSinuMollweideRaw=pt,t.geoSinusoidal=yn,t.geoSinusoidalRaw=_,t.geoStitch=Li,t.geoTimes=Ii,t.geoTimesRaw=me,t.geoTwoPointAzimuthal=we,t.geoTwoPointAzimuthalRaw=ye,t.geoTwoPointAzimuthalUsa=be,t.geoTwoPointEquidistant=ke,t.geoTwoPointEquidistantRaw=_e,t.geoTwoPointEquidistantUsa=xe,t.geoVanDerGrinten=qi,t.geoVanDerGrintenRaw=Ee,t.geoVanDerGrinten2=Di,t.geoVanDerGrinten2Raw=Me,t.geoVanDerGrinten3=Ui,t.geoVanDerGrinten3Raw=Te,t.geoVanDerGrinten4=Gi,t.geoVanDerGrinten4Raw=Se,t.geoWagner4=Wi,t.geoWagner4Raw=Xi,t.geoWagner6=Vi,t.geoWagner6Raw=Ae,t.geoWagner7=$i,t.geoWagner7Raw=je,t.geoWiechel=Yi,t.geoWiechelRaw=Pe,t.geoWinkel3=Ki,t.geoWinkel3Raw=Re,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":3,"d3-geo":11}],11:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(){this.reset()}function r(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function i(t){return t>1?0:t<-1?Oe:Math.acos(t)}function o(t){return t>1?Fe:t<-1?-Fe:Math.asin(t)}function a(t){return(t=$e(t/2))*t}function u(){}function c(t,e){t&&Ze.hasOwnProperty(t.type)&&Ze[t.type](t,e)}function s(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function l(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)s(t[n],e,1);e.polygonEnd()}function f(){rn.point=d}function h(){p(te,ee)}function d(t,e){rn.point=p,te=t,ee=e,t*=qe,e*=qe,ne=t,re=He(e=e/2+Le),ie=$e(e)}function p(t,e){t*=qe,e*=qe,e=e/2+Le;var n=t-ne,r=n>=0?1:-1,i=r*n,o=He(e),a=$e(e),u=ie*a,c=re*o+u*He(i),s=u*r*$e(i);en.add(Ge(s,c)),ne=t,re=o,ie=a}function v(t){return[Ge(t[1],t[0]),o(t[2])]}function g(t){var e=t[0],n=t[1],r=He(n);return[r*He(e),r*$e(e),$e(n)]}function m(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function y(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function b(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function w(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function _(t){var e=Ke(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function x(t,e){de.push(pe=[oe=t,ue=t]),e<ae&&(ae=e),e>ce&&(ce=e)}function k(t,e){var n=g([t*qe,e*qe]);if(he){var r=y(he,n),i=[r[1],-r[0],0],o=y(i,r);_(o),o=v(o);var a,u=t-se,c=u>0?1:-1,s=o[0]*ze*c,l=De(u)>180;l^(c*se<s&&s<c*t)?(a=o[1]*ze,a>ce&&(ce=a)):(s=(s+360)%360-180,l^(c*se<s&&s<c*t)?(a=-o[1]*ze,a<ae&&(ae=a)):(e<ae&&(ae=e),e>ce&&(ce=e))),l?t<se?j(oe,t)>j(oe,ue)&&(ue=t):j(t,ue)>j(oe,ue)&&(oe=t):ue>=oe?(t<oe&&(oe=t),t>ue&&(ue=t)):t>se?j(oe,t)>j(oe,ue)&&(ue=t):j(t,ue)>j(oe,ue)&&(oe=t)}else x(t,e);he=n,se=t}function E(){un.point=k}function M(){pe[0]=oe,pe[1]=ue,un.point=x,he=null}function T(t,e){if(he){var n=t-se;an.add(De(n)>180?n+(n>0?360:-360):n)}else le=t,fe=e;rn.point(t,e),k(t,e)}function S(){rn.lineStart()}function A(){T(le,fe),rn.lineEnd(),De(an)>Ne&&(oe=-(ue=180)),pe[0]=oe,pe[1]=ue,he=null}function j(t,e){return(e-=t)<0?e+360:e}function P(t,e){return t[0]-e[0]}function R(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function N(t,e){t*=qe,e*=qe;var n=He(e);C(n*He(t),n*$e(t),$e(e))}function C(t,e,n){++ve,me+=(t-me)/ve,ye+=(e-ye)/ve,be+=(n-be)/ve}function O(){sn.point=F}function F(t,e){t*=qe,e*=qe;var n=He(e);Ae=n*He(t),je=n*$e(t),Pe=$e(e),sn.point=L,C(Ae,je,Pe)}function L(t,e){t*=qe,e*=qe;var n=He(e),r=n*He(t),i=n*$e(t),o=$e(e),a=Ge(Ke((a=je*o-Pe*i)*a+(a=Pe*r-Ae*o)*a+(a=Ae*i-je*r)*a),Ae*r+je*i+Pe*o);ge+=a,we+=a*(Ae+(Ae=r)),_e+=a*(je+(je=i)),xe+=a*(Pe+(Pe=o)),C(Ae,je,Pe)}function I(){sn.point=N}function z(){sn.point=D}function q(){U(Te,Se),sn.point=N}function D(t,e){Te=t,Se=e,t*=qe,e*=qe,sn.point=U;var n=He(e);Ae=n*He(t),je=n*$e(t),Pe=$e(e),C(Ae,je,Pe)}function U(t,e){t*=qe,e*=qe;var n=He(e),r=n*He(t),o=n*$e(t),a=$e(e),u=je*a-Pe*o,c=Pe*r-Ae*a,s=Ae*o-je*r,l=Ke(u*u+c*c+s*s),f=Ae*r+je*o+Pe*a,h=l&&-i(f)/l,d=Ge(l,f);ke+=h*u,Ee+=h*c,Me+=h*s,ge+=d,we+=d*(Ae+(Ae=r)),_e+=d*(je+(je=o)),xe+=d*(Pe+(Pe=a)),C(Ae,je,Pe)}function G(t,e){return[t>Oe?t-Ie:t<-Oe?t+Ie:t,e]}function H(t,e,n){return(t%=Ie)?e||n?hn(X(t),W(e,n)):X(t):e||n?W(e,n):G}function B(t){return function(e,n){return e+=t,[e>Oe?e-Ie:e<-Oe?e+Ie:e,n]}}function X(t){var e=B(t);return e.invert=B(-t),e}function W(t,e){function n(t,e){var n=He(e),c=He(t)*n,s=$e(t)*n,l=$e(e),f=l*r+c*i;return[Ge(s*a-f*u,c*r-l*i),o(f*a+s*u)]}var r=He(t),i=$e(t),a=He(e),u=$e(e);return n.invert=function(t,e){var n=He(e),c=He(t)*n,s=$e(t)*n,l=$e(e),f=l*a-s*u;return[Ge(s*a+l*u,c*r+f*i),o(f*r-c*i)]},n}function V(t,e,n,r,i,o){if(n){var a=He(e),u=$e(e),c=r*n;null==i?(i=e+r*Ie,o=e-c/2):(i=$(a,i),o=$(a,o),(r>0?i<o:i>o)&&(i+=r*Ie));for(var s,l=i;r>0?l>o:l<o;l-=c)s=v([a,-u*He(l),-u*$e(l)]),t.point(s[0],s[1])}}function $(t,e){e=g(e),e[0]-=t,_(e);var n=i(-e[1]);return((-e[2]<0?-n:n)+Ie-Ne)%Ie}function Y(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function K(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function J(t,n,r,i){function o(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function a(e,o,a,c){var l=0,f=0;if(null==e||(l=u(e,a))!==(f=u(o,a))||s(e,o)<0^a>0){do c.point(0===l||3===l?t:r,l>1?i:n);while((l=(l+a+4)%4)!==f)}else c.point(o[0],o[1])}function u(e,i){return De(e[0]-t)<Ne?i>0?0:3:De(e[0]-r)<Ne?i>0?2:1:De(e[1]-n)<Ne?i>0?1:0:i>0?3:2}function c(t,e){return s(t.x,e.x)}function s(t,e){var n=u(t,1),r=u(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(u){function s(t,e){o(t,e)&&S.point(t,e)}function l(){for(var e=0,n=0,r=m.length;n<r;++n)for(var o,a,u=m[n],c=1,s=u.length,l=u[0],f=l[0],h=l[1];c<s;++c)o=f,a=h,l=u[c],f=l[0],h=l[1],a<=i?h>i&&(f-o)*(i-a)>(h-a)*(t-o)&&++e:h<=i&&(f-o)*(i-a)<(h-a)*(t-o)&&--e;return e}function f(){S=A,g=[],m=[],T=!0}function h(){var t=l(),n=T&&t,r=(g=e.merge(g)).length;(n||r)&&(u.polygonStart(),n&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),r&&jn(g,c,t,a,u),u.polygonEnd()),S=u,g=m=y=null}function d(){j.point=v,m&&m.push(y=[]),M=!0,E=!1,x=k=NaN}function p(){g&&(v(b,w),_&&E&&A.rejoin(),g.push(A.result())),j.point=s,E&&S.lineEnd()}function v(e,a){var u=o(e,a);if(m&&y.push([e,a]),M)b=e,w=a,_=u,M=!1,u&&(S.lineStart(),S.point(e,a));else if(u&&E)S.point(e,a);else{var c=[x=Math.max(Rn,Math.min(Pn,x)),k=Math.max(Rn,Math.min(Pn,k))],s=[e=Math.max(Rn,Math.min(Pn,e)),a=Math.max(Rn,Math.min(Pn,a))];Sn(c,s,t,n,r,i)?(E||(S.lineStart(),S.point(c[0],c[1])),S.point(s[0],s[1]),u||S.lineEnd(),T=!1):u&&(S.lineStart(),S.point(e,a),T=!1)}x=e,k=a,E=u}var g,m,y,b,w,_,x,k,E,M,T,S=u,A=Tn(),j={point:s,lineStart:d,lineEnd:p,polygonStart:f,polygonEnd:h};return j}}function Q(){On.point=tt,On.lineEnd=Z}function Z(){On.point=On.lineEnd=u}function tt(t,e){t*=qe,e*=qe,dn=t,pn=$e(e),vn=He(e),On.point=et}function et(t,e){t*=qe,e*=qe;var n=$e(e),r=He(e),i=De(t-dn),o=He(i),a=$e(i),u=r*a,c=vn*n-pn*r*o,s=pn*n+vn*r*o;Cn.add(Ge(Ke(u*u+c*c),s)),dn=t,pn=n,vn=r}function nt(t,n,r){var i=e.range(t,n-Ne,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function rt(t,n,r){var i=e.range(t,n-Ne,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function it(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return e.range(Be(a/m)*m,o,m).map(d).concat(e.range(Be(l/y)*y,s,y).map(p)).concat(e.range(Be(i/v)*v,r,v).filter(function(t){return De(t%m)>Ne}).map(f)).concat(e.range(Be(c/g)*g,u,g).filter(function(t){return De(t%y)>Ne}).map(h))}var r,i,o,a,u,c,s,l,f,h,d,p,v=10,g=v,m=90,y=360,b=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(p(s).slice(1),d(o).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],o=+e[1][0],l=+e[0][1],s=+e[1][1],a>o&&(e=a,a=o,o=e),l>s&&(e=l,l=s,s=e),t.precision(b)):[[a,l],[o,s]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],c=+e[0][1],u=+e[1][1],i>r&&(e=i,i=r,r=e),c>u&&(e=c,c=u,u=e),t.precision(b)):[[i,c],[r,u]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.stepMinor=function(e){return arguments.length?(v=+e[0],g=+e[1],t):[v,g]},t.precision=function(e){return arguments.length?(b=+e,f=nt(c,u,90),h=rt(i,r,b),d=nt(l,s,90),p=rt(a,o,b),t):b},t.extentMajor([[-180,-90+Ne],[180,90-Ne]]).extentMinor([[-180,-80-Ne],[180,80+Ne]])}function ot(){return it()()}function at(){Hn.point=ut}function ut(t,e){Hn.point=ct,gn=yn=t,mn=bn=e}function ct(t,e){Gn.add(bn*t-yn*e),yn=t,bn=e}function st(){ct(gn,mn)}function lt(t,e){t<Bn&&(Bn=t),t>Wn&&(Wn=t),e<Xn&&(Xn=e),e>Vn&&(Vn=e)}function ft(t,e){Yn+=t,Kn+=e,++Jn}function ht(){ir.point=dt}function dt(t,e){ir.point=pt,ft(xn=t,kn=e)}function pt(t,e){var n=t-xn,r=e-kn,i=Ke(n*n+r*r);Qn+=i*(xn+t)/2,Zn+=i*(kn+e)/2,tr+=i,ft(xn=t,kn=e)}function vt(){ir.point=ft}function gt(){ir.point=yt}function mt(){bt(wn,_n)}function yt(t,e){ir.point=bt,ft(wn=xn=t,_n=kn=e)}function bt(t,e){var n=t-xn,r=e-kn,i=Ke(n*n+r*r);Qn+=i*(xn+t)/2,Zn+=i*(kn+e)/2,tr+=i,i=kn*t-xn*e,er+=i*(xn+t),nr+=i*(kn+e),rr+=3*i,ft(xn=t,kn=e)}function wt(t){this._context=t}function _t(){this._string=[]}function xt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function kt(t){return t.length>1}function Et(t,e){return((t=t.x)[0]<0?t[1]-Fe-Ne:Fe-t[1])-((e=e.x)[0]<0?e[1]-Fe-Ne:Fe-e[1])}function Mt(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var u=o>0?Oe:-Oe,c=De(o-n);De(c-Oe)<Ne?(t.point(n,r=(r+a)/2>0?Fe:-Fe),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):i!==u&&c>=Oe&&(De(n-i)<Ne&&(n-=i*Ne),De(o-u)<Ne&&(o-=u*Ne),r=Tt(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=a),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Tt(t,e,n,r){var i,o,a=$e(t-n);return De(a)>Ne?Ue(($e(e)*(o=He(r))*$e(n)-$e(r)*(i=He(e))*$e(t))/(i*o*a)):(e+r)/2}function St(t,e,n,r){var i;if(null==t)i=n*Fe,r.point(-Oe,i),r.point(0,i),r.point(Oe,i),r.point(Oe,0),r.point(Oe,-i),r.point(0,-i),r.point(-Oe,-i),r.point(-Oe,0),r.point(-Oe,i);else if(De(t[0]-e[0])>Ne){var o=t[0]<e[0]?Oe:-Oe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function At(t){return function(e){var n=new jt;for(var r in t)n[r]=t[r];return n.stream=e,n}}function jt(){}function Pt(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),tn(n,t.stream($n));var a=$n.result(),u=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),c=+e[0][0]+(r-u*(a[1][0]+a[0][0]))/2,s=+e[0][1]+(i-u*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*u).translate([c,s])}function Rt(t,e,n){return Pt(t,[[0,0],e],n)}function Nt(t){return At({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Ct(t,e){function n(r,i,a,u,c,s,l,f,h,d,p,v,g,m){var y=l-r,b=f-i,w=y*y+b*b;if(w>4*e&&g--){var _=u+d,x=c+p,k=s+v,E=Ke(_*_+x*x+k*k),M=o(k/=E),T=De(De(k)-1)<Ne||De(a-h)<Ne?(a+h)/2:Ge(x,_),S=t(T,M),A=S[0],j=S[1],P=A-r,R=j-i,N=b*P-y*R;(N*N/w>e||De((y*P+b*R)/w-.5)>.3||u*d+c*p+s*v<dr)&&(n(r,i,a,u,c,s,A,j,T,_/=E,x/=E,k,g,m),m.point(A,j),n(A,j,T,_,x,k,l,f,h,d,p,v,g,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,k.point=o,e.lineStart()}function o(r,i){var o=g([r,i]),a=t(r,i);n(y,b,m,w,_,x,y=a[0],b=a[1],m=r,w=o[0],_=o[1],x=o[2],hr,e),e.point(y,b)}function a(){k.point=r,e.lineEnd()}function u(){i(),k.point=c,k.lineEnd=s}function c(t,e){o(l=t,e),f=y,h=b,d=w,p=_,v=x,k.point=o}function s(){n(y,b,m,w,_,x,f,h,l,d,p,v,hr,e),k.lineEnd=a,a()}var l,f,h,d,p,v,m,y,b,w,_,x,k={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),k.lineStart=u},polygonEnd:function(){e.polygonEnd(),k.lineStart=i}};return k}}function Ot(t){return Ft(function(){return t})()}function Ft(t){function e(t){return t=l(t[0]*qe,t[1]*qe),[t[0]*g+u,c-t[1]*g]}function n(t){return t=l.invert((t[0]-u)/g,(c-t[1])/g),t&&[t[0]*ze,t[1]*ze]}function r(t,e){return t=a(t,e),[t[0]*g+u,c-t[1]*g]}function i(){l=hn(s=H(_,x,k),a);var t=a(b,w);return u=m-t[0]*g,c=y+t[1]*g,o()}function o(){return p=v=null,e}var a,u,c,s,l,f,h,d,p,v,g=150,m=480,y=250,b=0,w=0,_=0,x=0,k=0,E=null,M=sr,T=null,S=Dn,A=.5,j=pr(r,A);return e.stream=function(t){return p&&v===t?p:p=vr(M(s,j(S(v=t))))},e.clipAngle=function(t){return arguments.length?(M=+t?lr(E=t*qe,6*qe):(E=null,sr),o()):E*ze},e.clipExtent=function(t){return arguments.length?(S=null==t?(T=f=h=d=null,Dn):J(T=+t[0][0],f=+t[0][1],h=+t[1][0],d=+t[1][1]),o()):null==T?null:[[T,f],[h,d]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],i()):[m,y]},e.center=function(t){return arguments.length?(b=t[0]%360*qe,w=t[1]%360*qe,i()):[b*ze,w*ze]},e.rotate=function(t){return arguments.length?(_=t[0]%360*qe,x=t[1]%360*qe,k=t.length>2?t[2]%360*qe:0,i()):[_*ze,x*ze,k*ze]},e.precision=function(t){return arguments.length?(j=pr(r,A=t*t),o()):Ke(A)},e.fitExtent=function(t,n){return Pt(e,t,n)},e.fitSize=function(t,n){return Rt(e,t,n)},function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function Lt(t){var e=0,n=Oe/3,r=Ft(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*qe,n=t[1]*qe):[e*ze,n*ze]},i}function It(t){function e(t,e){return[t*n,$e(e)/n]}var n=He(t);return e.invert=function(t,e){return[t/n,o(e*n)]},e}function zt(t,e){function n(t,e){var n=Ke(a-2*i*$e(e))/i;return[n*$e(t*=i),u-n*He(t)]}var r=$e(t),i=(r+$e(e))/2;if(De(i)<Ne)return It(t);var a=1+r*(2*i-r),u=Ke(a)/i;return n.invert=function(t,e){var n=u-e;return[Ge(t,De(n))/i*Ye(n),o((a-(t*t+n*n)*i*i)/(2*i))]},n}function qt(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Dt(t){return function(e,n){var r=He(e),i=He(n),o=t(r*i);return[o*i*$e(e),o*$e(n)]}}function Ut(t){return function(e,n){var r=Ke(e*e+n*n),i=t(r),a=$e(i),u=He(i);return[Ge(e*a,r*u),o(r&&n*a/r)]}}function Gt(t,e){return[t,We(Je((Fe+e)/2))]}function Ht(t){var e,n=Ot(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.translate=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.clipExtent=function(t){if(!arguments.length)return e?null:o();if(e=null==t){var a=Oe*r(),u=i();t=[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]}return o(t),n},n.clipExtent(null)}function Bt(t){return Je((Fe+t)/2)}function Xt(t,e){function n(t,e){o>0?e<-Fe+Ne&&(e=-Fe+Ne):e>Fe-Ne&&(e=Fe-Ne);var n=o/Ve(Bt(e),i);return[n*$e(i*t),o-n*He(i*t)]}var r=He(t),i=t===e?$e(t):We(r/He(e))/We(Bt(e)/Bt(t)),o=r*Ve(Bt(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=Ye(i)*Ke(t*t+n*n);return[Ge(t,De(n))/i*Ye(n),2*Ue(Ve(o/r,1/i))-Fe]},n):Gt}function Wt(t,e){return[t,e]}function Vt(t,e){function n(t,e){var n=o-e,r=i*t;return[n*$e(r),o-n*He(r)]}var r=He(t),i=t===e?$e(t):(r-He(e))/(e-t),o=r/i+t;return De(i)<Ne?Wt:(n.invert=function(t,e){var n=o-e;return[Ge(t,De(n))/i*Ye(n),o-Ye(i)*Ke(t*t+n*n)]},n)}function $t(t,e){var n=He(e),r=He(t)*n;return[n*$e(t)/r,$e(e)/r]}function Yt(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?Dn:At({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function Kt(t,e){return[He(e)*$e(t),$e(e)]}function Jt(t,e){var n=He(e),r=1+He(t)*n;return[n*$e(t)/r,$e(e)/r]}function Qt(t,e){return[We(Je((Fe+e)/2)),-t]}var Zt=function(){return new n};n.prototype={constructor:n,reset:function(){this.s=this.t=0},add:function(t){r(Re,t,this.t),r(this,Re.s,this.s),this.s?this.t+=Re.t:this.s=Re.t},valueOf:function(){return this.s}};var te,ee,ne,re,ie,oe,ae,ue,ce,se,le,fe,he,de,pe,ve,ge,me,ye,be,we,_e,xe,ke,Ee,Me,Te,Se,Ae,je,Pe,Re=new n,Ne=1e-6,Ce=1e-12,Oe=Math.PI,Fe=Oe/2,Le=Oe/4,Ie=2*Oe,ze=180/Oe,qe=Oe/180,De=Math.abs,Ue=Math.atan,Ge=Math.atan2,He=Math.cos,Be=Math.ceil,Xe=Math.exp,We=Math.log,Ve=Math.pow,$e=Math.sin,Ye=Math.sign||function(t){return t>0?1:t<0?-1:0},Ke=Math.sqrt,Je=Math.tan,Qe={Feature:function(t,e){c(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)c(n[r].geometry,e)}},Ze={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){s(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)s(n[r],e,0)},Polygon:function(t,e){l(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)l(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)c(n[r],e)}},tn=function(t,e){t&&Qe.hasOwnProperty(t.type)?Qe[t.type](t,e):c(t,e)},en=Zt(),nn=Zt(),rn={point:u,lineStart:u,lineEnd:u,polygonStart:function(){en.reset(),rn.lineStart=f,rn.lineEnd=h},polygonEnd:function(){var t=+en;nn.add(t<0?Ie+t:t),this.lineStart=this.lineEnd=this.point=u},sphere:function(){nn.add(Ie)}},on=function(t){return nn.reset(),tn(t,rn),2*nn},an=Zt(),un={point:x,lineStart:E,lineEnd:M,polygonStart:function(){un.point=T,un.lineStart=S,un.lineEnd=A,an.reset(),rn.polygonStart()},polygonEnd:function(){rn.polygonEnd(),un.point=x,
un.lineStart=E,un.lineEnd=M,en<0?(oe=-(ue=180),ae=-(ce=90)):an>Ne?ce=90:an<-Ne&&(ae=-90),pe[0]=oe,pe[1]=ue}},cn=function(t){var e,n,r,i,o,a,u;if(ce=ue=-(oe=ae=1/0),de=[],tn(t,un),n=de.length){for(de.sort(P),e=1,r=de[0],o=[r];e<n;++e)i=de[e],R(r,i[0])||R(r,i[1])?(j(r[0],i[1])>j(r[0],r[1])&&(r[1]=i[1]),j(i[0],r[1])>j(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-(1/0),n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(u=j(r[1],i[0]))>a&&(a=u,oe=i[0],ue=r[1])}return de=pe=null,oe===1/0||ae===1/0?[[NaN,NaN],[NaN,NaN]]:[[oe,ae],[ue,ce]]},sn={sphere:u,point:N,lineStart:O,lineEnd:I,polygonStart:function(){sn.lineStart=z,sn.lineEnd=q},polygonEnd:function(){sn.lineStart=O,sn.lineEnd=I}},ln=function(t){ve=ge=me=ye=be=we=_e=xe=ke=Ee=Me=0,tn(t,sn);var e=ke,n=Ee,r=Me,i=e*e+n*n+r*r;return i<Ce&&(e=we,n=_e,r=xe,ge<Ne&&(e=me,n=ye,r=be),i=e*e+n*n+r*r,i<Ce)?[NaN,NaN]:[Ge(n,e)*ze,o(r/Ke(i))*ze]},fn=function(t){return function(){return t}},hn=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};G.invert=G;var dn,pn,vn,gn,mn,yn,bn,wn,_n,xn,kn,En=function(t){function e(e){return e=t(e[0]*qe,e[1]*qe),e[0]*=ze,e[1]*=ze,e}return t=H(t[0]*qe,t[1]*qe,t.length>2?t[2]*qe:0),e.invert=function(e){return e=t.invert(e[0]*qe,e[1]*qe),e[0]*=ze,e[1]*=ze,e},e},Mn=function(){function t(t,e){n.push(t=r(t,e)),t[0]*=ze,t[1]*=ze}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*qe,c=a.apply(this,arguments)*qe;return n=[],r=H(-t[0]*qe,-t[1]*qe,0).invert,V(u,e,c,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=fn([0,0]),o=fn(90),a=fn(6),u={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:fn([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:fn(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:fn(+t),e):a},e},Tn=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:u,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Sn=function(t,e,n,r,i,o){var a,u=t[0],c=t[1],s=e[0],l=e[1],f=0,h=1,d=s-u,p=l-c;if(a=n-u,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>f&&(f=a)}if(a=i-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<h&&(h=a)}if(a=r-c,p||!(a>0)){if(a/=p,p<0){if(a<f)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=o-c,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<h&&(h=a)}return f>0&&(t[0]=u+f*d,t[1]=c+f*p),h<1&&(e[0]=u+h*d,e[1]=c+h*p),!0}}}}},An=function(t,e){return De(t[0]-e[0])<Ne&&De(t[1]-e[1])<Ne},jn=function(t,e,n,r,i){var o,a,u=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(An(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}u.push(n=new Y(r,t,null,!0)),c.push(n.o=new Y(r,null,n,!1)),u.push(n=new Y(a,t,null,!1)),c.push(n.o=new Y(a,null,n,!0))}}),u.length){for(c.sort(e),K(u),K(c),o=0,a=c.length;o<a;++o)c[o].e=n=!n;for(var s,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=s.length;o<a;++o)i.point((l=s[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((l=s[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,s=h.z,d=!d}while(!h.v);i.lineEnd()}}},Pn=1e9,Rn=-Pn,Nn=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=J(r,i,o,a)(e=n)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=e=null,n):[[r,i],[o,a]]}}},Cn=Zt(),On={sphere:u,point:u,lineStart:Q,lineEnd:u,polygonStart:u,polygonEnd:u},Fn=function(t){return Cn.reset(),tn(t,On),+Cn},Ln=[null,null],In={type:"LineString",coordinates:Ln},zn=function(t,e){return Ln[0]=t,Ln[1]=e,Fn(In)},qn=function(t,e){var n=t[0]*qe,r=t[1]*qe,i=e[0]*qe,u=e[1]*qe,c=He(r),s=$e(r),l=He(u),f=$e(u),h=c*He(n),d=c*$e(n),p=l*He(i),v=l*$e(i),g=2*o(Ke(a(u-r)+c*l*a(i-n))),m=$e(g),y=g?function(t){var e=$e(t*=g)/m,n=$e(g-t)/m,r=n*h+e*p,i=n*d+e*v,o=n*s+e*f;return[Ge(i,r)*ze,Ge(o,Ke(r*r+i*i))*ze]}:function(){return[n*ze,r*ze]};return y.distance=g,y},Dn=function(t){return t},Un=Zt(),Gn=Zt(),Hn={point:u,lineStart:u,lineEnd:u,polygonStart:function(){Hn.lineStart=at,Hn.lineEnd=st},polygonEnd:function(){Hn.lineStart=Hn.lineEnd=Hn.point=u,Un.add(De(Gn)),Gn.reset()},result:function(){var t=Un/2;return Un.reset(),t}},Bn=1/0,Xn=Bn,Wn=-Bn,Vn=Wn,$n={point:lt,lineStart:u,lineEnd:u,polygonStart:u,polygonEnd:u,result:function(){var t=[[Bn,Xn],[Wn,Vn]];return Wn=Vn=-(Xn=Bn=1/0),t}},Yn=0,Kn=0,Jn=0,Qn=0,Zn=0,tr=0,er=0,nr=0,rr=0,ir={point:ft,lineStart:ht,lineEnd:vt,polygonStart:function(){ir.lineStart=gt,ir.lineEnd=mt},polygonEnd:function(){ir.point=ft,ir.lineStart=ht,ir.lineEnd=vt},result:function(){var t=rr?[er/rr,nr/rr]:tr?[Qn/tr,Zn/tr]:Jn?[Yn/Jn,Kn/Jn]:[NaN,NaN];return Yn=Kn=Jn=Qn=Zn=tr=er=nr=rr=0,t}};wt.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ie)}},result:u},_t.prototype={_circle:xt(4.5),pointRadius:function(t){return this._circle=xt(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var or=function(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),tn(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return tn(t,r(Hn)),Hn.result()},n.bounds=function(t){return tn(t,r($n)),$n.result()},n.centroid=function(t){return tn(t,r(ir)),ir.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,Dn):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new _t):new wt(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)},ar=Zt(),ur=function(t,e){var n=e[0],r=e[1],i=[$e(n),-He(n),0],a=0,u=0;ar.reset();for(var c=0,s=t.length;c<s;++c)if(f=(l=t[c]).length)for(var l,f,h=l[f-1],d=h[0],p=h[1]/2+Le,v=$e(p),m=He(p),b=0;b<f;++b,d=x,v=E,m=M,h=w){var w=l[b],x=w[0],k=w[1]/2+Le,E=$e(k),M=He(k),T=x-d,S=T>=0?1:-1,A=S*T,j=A>Oe,P=v*E;if(ar.add(Ge(P*S*$e(A),m*M+P*He(A))),a+=j?T+S*Ie:T,j^d>=n^x>=n){var R=y(g(h),g(w));_(R);var N=y(i,R);_(N);var C=(j^T>=0?-1:1)*o(N[2]);(r>C||r===C&&(R[0]||R[1]))&&(u+=j^T>=0?1:-1)}}return(a<-Ne||a<Ne&&ar<-Ne)^1&u},cr=function(t,n,r,i){return function(o,a){function u(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function c(t,e){var n=o(t,e);m.point(n[0],n[1])}function s(){x.point=c,m.lineStart()}function l(){x.point=u,m.lineEnd()}function f(t,e){g.push([t,e]);var n=o(t,e);w.point(n[0],n[1])}function h(){w.lineStart(),g=[]}function d(){f(g[0][0],g[0][1]),w.lineEnd();var t,e,n,r,i=w.clean(),o=b.result(),u=o.length;if(g.pop(),p.push(g),g=null,u)if(1&i){if(n=o[0],(e=n.length-1)>0){for(_||(a.polygonStart(),_=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else u>1&&2&i&&o.push(o.pop().concat(o.shift())),v.push(o.filter(kt))}var p,v,g,m=n(a),y=o.invert(i[0],i[1]),b=Tn(),w=n(b),_=!1,x={point:u,lineStart:s,lineEnd:l,polygonStart:function(){x.point=f,x.lineStart=h,x.lineEnd=d,v=[],p=[]},polygonEnd:function(){x.point=u,x.lineStart=s,x.lineEnd=l,v=e.merge(v);var t=ur(p,y);v.length?(_||(a.polygonStart(),_=!0),jn(v,Et,t,r,a)):t&&(_||(a.polygonStart(),_=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),_&&(a.polygonEnd(),_=!1),v=p=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return x}},sr=cr(function(){return!0},Mt,St,[-Oe,-Fe]),lr=function(t,e){function n(n,r,i,o){V(o,t,e,i,n,r)}function r(t,e){return He(t)*He(e)>u}function i(t){var e,n,i,u,l;return{lineStart:function(){u=i=!1,l=1},point:function(f,h){var d,p=[f,h],v=r(f,h),g=c?v?0:a(f,h):v?a(f+(f<0?Oe:-Oe),h):0;if(!e&&(u=i=v)&&t.lineStart(),v!==i&&(d=o(e,p),(An(e,d)||An(p,d))&&(p[0]+=Ne,p[1]+=Ne,v=r(p[0],p[1]))),v!==i)l=0,v?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(s&&e&&c^v){var m;g&n||!(m=o(p,e,!0))||(l=0,c?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&An(e,p)||t.point(p[0],p[1]),e=p,i=v,n=g},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return l|(u&&i)<<1}}}function o(t,e,n){var r=g(t),i=g(e),o=[1,0,0],a=y(r,i),c=m(a,a),s=a[0],l=c-s*s;if(!l)return!n&&t;var f=u*c/l,h=-u*s/l,d=y(o,a),p=w(o,f),_=w(a,h);b(p,_);var x=d,k=m(p,x),E=m(x,x),M=k*k-E*(m(p,p)-1);if(!(M<0)){var T=Ke(M),S=w(x,(-k-T)/E);if(b(S,p),S=v(S),!n)return S;var A,j=t[0],P=e[0],R=t[1],N=e[1];P<j&&(A=j,j=P,P=A);var C=P-j,O=De(C-Oe)<Ne,F=O||C<Ne;if(!O&&N<R&&(A=R,R=N,N=A),F?O?R+N>0^S[1]<(De(S[0]-j)<Ne?R:N):R<=S[1]&&S[1]<=N:C>Oe^(j<=S[0]&&S[0]<=P)){var L=w(x,(-k+T)/E);return b(L,p),[S,v(L)]}}}function a(e,n){var r=c?t:Oe-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var u=He(t),c=u>0,s=De(u)>Ne;return cr(r,i,n,c?[0,-t]:[-Oe,t-Oe])},fr=function(t){return{stream:At(t)}};jt.prototype={constructor:jt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var hr=16,dr=He(30*qe),pr=function(t,e){return+e?Ct(t,e):Nt(t)},vr=At({point:function(t,e){this.stream.point(t*qe,e*qe)}}),gr=function(){return Lt(zt).scale(155.424).center([0,33.6442])},mr=function(){return gr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},yr=function(){function t(t){var e=t[0],n=t[1];return u=null,i.point(e,n),u||(o.point(e,n),u)||(a.point(e,n),u)}function e(){return n=r=null,t}var n,r,i,o,a,u,c=mr(),s=gr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=gr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,e){u=[t,e]}};return t.invert=function(t){var e=c.scale(),n=c.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:c).invert(t)},t.stream=function(t){return n&&r===t?n:n=qt([c.stream(r=t),s.stream(t),l.stream(t)])},t.precision=function(t){return arguments.length?(c.precision(t),s.precision(t),l.precision(t),e()):c.precision()},t.scale=function(e){return arguments.length?(c.scale(e),s.scale(.35*e),l.scale(e),t.translate(c.translate())):c.scale()},t.translate=function(t){if(!arguments.length)return c.translate();var n=c.scale(),r=+t[0],u=+t[1];return i=c.translate(t).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(f),o=s.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+Ne,u+.12*n+Ne],[r-.214*n-Ne,u+.234*n-Ne]]).stream(f),a=l.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+Ne,u+.166*n+Ne],[r-.115*n-Ne,u+.234*n-Ne]]).stream(f),e()},t.fitExtent=function(e,n){return Pt(t,e,n)},t.fitSize=function(e,n){return Rt(t,e,n)},t.scale(1070)},br=Dt(function(t){return Ke(2/(1+t))});br.invert=Ut(function(t){return 2*o(t/2)});var wr=function(){return Ot(br).scale(124.75).clipAngle(179.999)},_r=Dt(function(t){return(t=i(t))&&t/$e(t)});_r.invert=Ut(function(t){return t});var xr=function(){return Ot(_r).scale(79.4188).clipAngle(179.999)};Gt.invert=function(t,e){return[t,2*Ue(Xe(e))-Fe]};var kr=function(){return Ht(Gt).scale(961/Ie)},Er=function(){return Lt(Xt).scale(109.5).parallels([30,30])};Wt.invert=Wt;var Mr=function(){return Ot(Wt).scale(152.63)},Tr=function(){return Lt(Vt).scale(131.154).center([0,13.9389])};$t.invert=Ut(Ue);var Sr=function(){return Ot($t).scale(144.049).clipAngle(60)},Ar=function(){function t(){return i=o=null,a}var e,n,r,i,o,a,u=1,c=0,s=0,l=1,f=1,h=Dn,d=null,p=Dn;return a={stream:function(t){return i&&o===t?i:i=h(p(o=t))},clipExtent:function(i){return arguments.length?(p=null==i?(d=e=n=r=null,Dn):J(d=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==d?null:[[d,e],[n,r]]},scale:function(e){return arguments.length?(h=Yt((u=+e)*l,u*f,c,s),t()):u},translate:function(e){return arguments.length?(h=Yt(u*l,u*f,c=+e[0],s=+e[1]),t()):[c,s]},reflectX:function(e){return arguments.length?(h=Yt(u*(l=e?-1:1),u*f,c,s),t()):l<0},reflectY:function(e){return arguments.length?(h=Yt(u*l,u*(f=e?-1:1),c,s),t()):f<0},fitExtent:function(t,e){return Pt(a,t,e)},fitSize:function(t,e){return Rt(a,t,e)}}};Kt.invert=Ut(o);var jr=function(){return Ot(Kt).scale(249.5).clipAngle(90+Ne)};Jt.invert=Ut(function(t){return 2*Ue(t)});var Pr=function(){return Ot(Jt).scale(250).clipAngle(142)};Qt.invert=function(t,e){return[-e,2*Ue(Xe(t))-Fe]};var Rr=function(){var t=Ht(Qt),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.geoArea=on,t.geoBounds=cn,t.geoCentroid=ln,t.geoCircle=Mn,t.geoClipExtent=Nn,t.geoDistance=zn,t.geoGraticule=it,t.geoGraticule10=ot,t.geoInterpolate=qn,t.geoLength=Fn,t.geoPath=or,t.geoAlbers=mr,t.geoAlbersUsa=yr,t.geoAzimuthalEqualArea=wr,t.geoAzimuthalEqualAreaRaw=br,t.geoAzimuthalEquidistant=xr,t.geoAzimuthalEquidistantRaw=_r,t.geoConicConformal=Er,t.geoConicConformalRaw=Xt,t.geoConicEqualArea=gr,t.geoConicEqualAreaRaw=zt,t.geoConicEquidistant=Tr,t.geoConicEquidistantRaw=Vt,t.geoEquirectangular=Mr,t.geoEquirectangularRaw=Wt,t.geoGnomonic=Sr,t.geoGnomonicRaw=$t,t.geoIdentity=Ar,t.geoProjection=Ot,t.geoProjectionMutator=Ft,t.geoMercator=kr,t.geoMercatorRaw=Gt,t.geoOrthographic=jr,t.geoOrthographicRaw=Kt,t.geoStereographic=Pr,t.geoStereographicRaw=Jt,t.geoTransverseMercator=Rr,t.geoTransverseMercatorRaw=Qt,t.geoRotation=En,t.geoStream=tn,t.geoTransform=fr,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":3}],12:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):S(isNaN(t)?e:t)}function a(t){return 1===(t=+t)?u:function(e,n){return n-e?i(e,n,t):S(isNaN(e)?n:e)}}function u(t,e){var n=e-t;return n?r(t,n):S(isNaN(t)?e:t)}function c(t){return function(n){var r,i,o=n.length,a=new Array(o),u=new Array(o),c=new Array(o);for(r=0;r<o;++r)i=e.rgb(n[r]),a[r]=i.r||0,u[r]=i.g||0,c[r]=i.b||0;return a=t(a),u=t(u),c=t(c),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=c(t),i+""}}}function s(t){return function(){return t}}function l(t){return function(e){return t(e)+""}}function f(t){return"none"===t?U:(_||(_=document.createElement("DIV"),x=document.documentElement,k=document.defaultView),_.style.transform=t,t=k.getComputedStyle(x.appendChild(_),null).getPropertyValue("transform"),x.removeChild(_),t=t.slice(7,-1).split(","),G(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function h(t){return null==t?U:(E||(E=document.createElementNS("http://www.w3.org/2000/svg","g")),E.setAttribute("transform",t),(t=E.transform.baseVal.consolidate())?(t=t.matrix,G(t.a,t.b,t.c,t.d,t.e,t.f)):U)}function d(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,e,null,n);u.push({i:c-4,x:C(t,i)},{i:c-2,x:C(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:C(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function u(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:C(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function c(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:C(t,n)},{i:u-2,x:C(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),u(e.skewX,n.skewX,r,i),c(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function p(t){return((t=Math.exp(t))+1/t)/2}function v(t){return((t=Math.exp(t))-1/t)/2}function g(t){return((t=Math.exp(2*t))-1)/(t+1)}function m(t){return function(n,r){var i=t((n=e.hsl(n)).h,(r=e.hsl(r)).h),o=u(n.s,r.s),a=u(n.l,r.l),c=u(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(t),n.opacity=c(t),n+""}}}function y(t,n){var r=u((t=e.lab(t)).l,(n=e.lab(n)).l),i=u(t.a,n.a),o=u(t.b,n.b),a=u(t.opacity,n.opacity);return function(e){return t.l=r(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}}function b(t){return function(n,r){var i=t((n=e.hcl(n)).h,(r=e.hcl(r)).h),o=u(n.c,r.c),a=u(n.l,r.l),c=u(n.opacity,r.opacity);return function(t){return n.h=i(t),n.c=o(t),n.l=a(t),n.opacity=c(t),n+""}}}function w(t){return function n(r){function i(n,i){var o=t((n=e.cubehelix(n)).h,(i=e.cubehelix(i)).h),a=u(n.s,i.s),c=u(n.l,i.l),s=u(n.opacity,i.opacity);return function(t){return n.h=o(t),n.s=a(t),n.l=c(Math.pow(t,r)),n.opacity=s(t),n+""}}return r=+r,i.gamma=n,i}(1)}var _,x,k,E,M=function(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[i],a=t[i+1],u=i>0?t[i-1]:2*o-a,c=i<e-1?t[i+2]:2*a-o;return n((r-i/e)*e,u,o,a,c)}},T=function(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),o=t[(i+e-1)%e],a=t[i%e],u=t[(i+1)%e],c=t[(i+2)%e];return n((r-i/e)*e,o,a,u,c)}},S=function(t){return function(){return t}},A=function t(n){function r(t,n){var r=i((t=e.rgb(t)).r,(n=e.rgb(n)).r),o=i(t.g,n.g),a=i(t.b,n.b),u=i(t.opacity,n.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}var i=a(n);return r.gamma=t,r}(1),j=c(M),P=c(T),R=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=z(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},N=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},C=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},O=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=z(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},F=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L=new RegExp(F.source,"g"),I=function(t,e){var n,r,i,o=F.lastIndex=L.lastIndex=0,a=-1,u=[],c=[];for(t+="",e+="";(n=F.exec(t))&&(r=L.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:C(n,r)})),o=L.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?l(c[0].x):s(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)u[(n=c[r]).i]=n.x(t);return u.join("")})},z=function(t,n){var r,i=typeof n;return null==n||"boolean"===i?S(n):("number"===i?C:"string"===i?(r=e.color(n))?(n=r,A):I:n instanceof e.color?A:n instanceof Date?N:Array.isArray(n)?R:isNaN(n)?O:C)(t,n)},q=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},D=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},G=function(t,e,n,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*D,skewX:Math.atan(c)*D,scaleX:a,scaleY:u}},H=d(f,"px, ","px)","deg)"),B=d(h,", ",")",")"),X=Math.SQRT2,W=2,V=4,$=1e-12,Y=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[0],c=e[1],s=e[2],l=u-i,f=c-o,h=l*l+f*f;if(h<$)r=Math.log(s/a)/X,n=function(t){return[i+t*l,o+t*f,a*Math.exp(X*t*r)]};else{var d=Math.sqrt(h),m=(s*s-a*a+V*h)/(2*a*W*d),y=(s*s-a*a-V*h)/(2*s*W*d),b=Math.log(Math.sqrt(m*m+1)-m),w=Math.log(Math.sqrt(y*y+1)-y);r=(w-b)/X,n=function(t){var e=t*r,n=p(b),u=a/(W*d)*(n*g(X*e+b)-v(b));return[i+u*l,o+u*f,a*n/p(X*e+b)]}}return n.duration=1e3*r,n},K=m(o),J=m(u),Q=b(o),Z=b(u),tt=w(o),et=w(u),nt=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};t.interpolate=z,t.interpolateArray=R,t.interpolateBasis=M,t.interpolateBasisClosed=T,t.interpolateDate=N,t.interpolateNumber=C,t.interpolateObject=O,t.interpolateRound=q,t.interpolateString=I,t.interpolateTransformCss=H,t.interpolateTransformSvg=B,t.interpolateZoom=Y,t.interpolateRgb=A,t.interpolateRgbBasis=j,t.interpolateRgbBasisClosed=P,t.interpolateHsl=K,t.interpolateHslLong=J,t.interpolateLab=y,t.interpolateHcl=Q,t.interpolateHclLong=Z,t.interpolateCubehelix=tt,t.interpolateCubehelixLong=et,t.quantize=nt,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":5}],13:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-collection"),t("d3-dispatch"),t("d3-dsv")):"function"==typeof define&&define.amd?define(["exports","d3-collection","d3-dispatch","d3-dsv"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3)}(this,function(t,e,n,r){"use strict";function i(t){return function(e,n){t(null==e?n:null)}}function o(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function a(t,e){return function(n){return t(n.responseText,e)}}var u=function(t,r){function a(t){var e,n=d.status;if(!n&&o(d)||n>=200&&n<300||304===n){if(s)try{e=s.call(u,d)}catch(t){return void f.call("error",u,t)}else e=d;f.call("load",u,e)}else f.call("error",u,t)}var u,c,s,l,f=n.dispatch("beforesend","progress","load","error"),h=e.map(),d=new XMLHttpRequest,p=null,v=null,g=0;if("undefined"==typeof XDomainRequest||"withCredentials"in d||!/^(http(s)?:)?\/\//.test(t)||(d=new XDomainRequest),"onload"in d?d.onload=d.onerror=d.ontimeout=a:d.onreadystatechange=function(t){d.readyState>3&&a(t)},d.onprogress=function(t){f.call("progress",u,t)},u={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?h.get(t):(null==e?h.remove(t):h.set(t,e+""),u)},mimeType:function(t){return arguments.length?(c=null==t?null:t+"",u):c},responseType:function(t){return arguments.length?(l=t,u):l},timeout:function(t){return arguments.length?(g=+t,u):g},user:function(t){return arguments.length<1?p:(p=null==t?null:t+"",u)},password:function(t){return arguments.length<1?v:(v=null==t?null:t+"",u)},response:function(t){return s=t,u},get:function(t,e){return u.send("GET",t,e)},post:function(t,e){return u.send("POST",t,e)},send:function(e,n,r){return d.open(e,t,!0,p,v),null==c||h.has("accept")||h.set("accept",c+",*/*"),d.setRequestHeader&&h.each(function(t,e){d.setRequestHeader(e,t)}),null!=c&&d.overrideMimeType&&d.overrideMimeType(c),null!=l&&(d.responseType=l),g>0&&(d.timeout=g),null==r&&"function"==typeof n&&(r=n,n=null),null!=r&&1===r.length&&(r=i(r)),null!=r&&u.on("error",r).on("load",function(t){r(null,t)}),f.call("beforesend",u,d),d.send(null==n?null:n),u},abort:function(){return d.abort(),u},on:function(){var t=f.on.apply(f,arguments);return t===f?u:t}},null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return u.get(r)}return u},c=function(t,e){return function(n,r){var i=u(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},s=c("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),l=c("application/json",function(t){return JSON.parse(t.responseText)}),f=c("text/plain",function(t){return t.responseText}),h=c("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),d=function(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=u(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(a(e,r=t)):r},o.row(r),i?o.get(i):o}},p=d("text/csv",r.csvParse),v=d("text/tab-separated-values",r.tsvParse);t.request=u,t.html=s,t.json=l,t.text=f,t.xml=h,t.csv=p,t.tsv=v,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-collection":4,"d3-dispatch":6,"d3-dsv":8}],14:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Q&&e.documentElement.namespaceURI===Q?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){return new i}function i(){this._="@"+(++nt).toString(36)}function o(t,e,n){return t=a(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function a(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function u(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function c(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function s(t,e,n){var r=ut.hasOwnProperty(t.type)?o:a;return function(i,o,a){var u,c=this.__on,s=r(e,o,a);if(c)for(var l=0,f=c.length;l<f;++l)if((u=c[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=s,u.capture=n),void(u.value=e);this.addEventListener(t.type,s,n),u={type:t.type,name:t.name,value:e,listener:s,capture:n},c?c.push(u):this.__on=[u]}}function l(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function f(){}function h(){return[]}function d(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function p(t,e,n,r,i,o){for(var a,u=0,c=e.length,s=o.length;u<s;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new d(t,o[u]);for(;u<c;++u)(a=e[u])&&(i[u]=a)}function v(t,e,n,r,i,o,a){var u,c,s,l={},f=e.length,h=o.length,p=new Array(f);for(u=0;u<f;++u)(c=e[u])&&(p[u]=s=_t+a.call(c,c.__data__,u,e),s in l?i[u]=c:l[s]=c);for(u=0;u<h;++u)s=_t+a.call(t,o[u],u,o),(c=l[s])?(r[u]=c,c.__data__=o[u],l[s]=null):n[u]=new d(t,o[u]);for(u=0;u<f;++u)(c=e[u])&&l[p[u]]===c&&(i[u]=c)}function g(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function m(t){return function(){this.removeAttribute(t)}}function y(t){return function(){this.removeAttributeNS(t.space,t.local)}}function b(t,e){return function(){this.setAttribute(t,e)}}function w(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function k(t){return function(){this.style.removeProperty(t)}}function E(t,e,n){return function(){this.style.setProperty(t,e,n)}}function M(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function T(t){return function(){delete this[t]}}function S(t,e){return function(){this[t]=e}}function A(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function j(t){return t.trim().split(/^|\s+/)}function P(t){return t.classList||new R(t)}function R(t){this._node=t,this._names=j(t.getAttribute("class")||"")}function N(t,e){for(var n=P(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function C(t,e){for(var n=P(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function O(t){return function(){N(this,t)}}function F(t){return function(){C(this,t)}}function L(t,e){return function(){(e.apply(this,arguments)?N:C)(this,t)}}function I(){this.textContent=""}function z(t){return function(){this.textContent=t}}function q(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function D(){this.innerHTML=""}function U(t){return function(){this.innerHTML=t}}function G(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function H(){this.nextSibling&&this.parentNode.appendChild(this)}function B(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function X(){return null}function W(){var t=this.parentNode;t&&t.removeChild(this)}function V(t,e,n){var r=Ot(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function $(t,e){return function(){return V(this,t,e)}}function Y(t,e){return function(){return V(this,t,e.apply(this,arguments))}}function K(t,e){this._groups=t,this._parents=e}function J(){return new K([[document.documentElement]],Vt)}var Q="http://www.w3.org/1999/xhtml",Z={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Z.hasOwnProperty(e)?{space:Z[e],local:t}:t},et=function(t){var r=tt(t);return(r.local?n:e)(r)},nt=0;i.prototype=r.prototype={constructor:i,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var rt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var it=document.documentElement;if(!it.matches){var ot=it.webkitMatchesSelector||it.msMatchesSelector||it.mozMatchesSelector||it.oMatchesSelector;rt=function(t){return function(){return ot.call(this,t)}}}}var at=rt,ut={};if(t.event=null,"undefined"!=typeof document){var ct=document.documentElement;"onmouseenter"in ct||(ut={mouseenter:"mouseover",mouseleave:"mouseout"})}var st=function(t,e,n){var r,i,o=u(t+""),a=o.length;{if(!(arguments.length<2)){for(l=e?s:c,null==n&&(n=!1),r=0;r<a;++r)this.each(l(o[r],e,n));return this}var l=this.node().__on;if(l)for(var f,h=0,d=l.length;h<d;++h)for(r=0,f=l[h];r<a;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value}},lt=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},ft=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},ht=function(t){var e=lt();return e.changedTouches&&(e=e.changedTouches[0]),ft(t,e)},dt=function(t){return null==t?f:function(){return this.querySelector(t)}},pt=function(t){"function"!=typeof t&&(t=dt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],c=u.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=u[l])&&(a=t.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),
s[l]=a);return new K(r,this._parents)},vt=function(t){return null==t?h:function(){return this.querySelectorAll(t)}},gt=function(t){"function"!=typeof t&&(t=vt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],c=u.length,s=0;s<c;++s)(a=u[s])&&(r.push(t.call(a,a.__data__,s,u)),i.push(a));return new K(r,i)},mt=function(t){"function"!=typeof t&&(t=at(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new K(r,this._parents)},yt=function(t){return new Array(t.length)},bt=function(){return new K(this._enter||this._groups.map(yt),this._parents)};d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var wt=function(t){return function(){return t}},_t="$",xt=function(t,e){if(!t)return d=new Array(this.size()),s=-1,this.each(function(t){d[++s]=t}),d;var n=e?v:p,r=this._parents,i=this._groups;"function"!=typeof t&&(t=wt(t));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,d=t.call(l,l&&l.__data__,s,r),g=d.length,m=u[s]=new Array(g),y=a[s]=new Array(g),b=c[s]=new Array(h);n(l,f,m,y,b,d,e);for(var w,_,x=0,k=0;x<g;++x)if(w=m[x]){for(x>=k&&(k=x+1);!(_=y[k])&&++k<g;);w._next=_||null}}return a=new K(a,r),a._enter=u,a._exit=c,a},kt=function(){return new K(this._exit||this._groups.map(yt),this._parents)},Et=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=e[u],l=n[u],f=s.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=s[d]||l[d])&&(h[d]=c);for(;u<r;++u)a[u]=e[u];return new K(a,this._parents)},Mt=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Tt=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=g);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],c=u.length,s=i[o]=new Array(c),l=0;l<c;++l)(a=u[l])&&(s[l]=a);s.sort(e)}return new K(i,this._parents).order()},St=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},At=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},jt=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},Pt=function(){var t=0;return this.each(function(){++t}),t},Rt=function(){return!this.node()},Nt=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},Ct=function(t,e){var n=tt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?y:m:"function"==typeof e?n.local?x:_:n.local?w:b)(n,e))},Ot=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Ft=function(t,e,n){var r;return arguments.length>1?this.each((null==e?k:"function"==typeof e?M:E)(t,e,null==n?"":n)):Ot(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},Lt=function(t,e){return arguments.length>1?this.each((null==e?T:"function"==typeof e?A:S)(t,e)):this.node()[t]};R.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var It=function(t,e){var n=j(t+"");if(arguments.length<2){for(var r=P(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?L:e?O:F)(n,e))},zt=function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?q:z)(t)):this.node().textContent},qt=function(t){return arguments.length?this.each(null==t?D:("function"==typeof t?G:U)(t)):this.node().innerHTML},Dt=function(){return this.each(H)},Ut=function(){return this.each(B)},Gt=function(t){var e="function"==typeof t?t:et(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},Ht=function(t,e){var n="function"==typeof t?t:et(t),r=null==e?X:"function"==typeof e?e:dt(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},Bt=function(){return this.each(W)},Xt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Wt=function(t,e){return this.each(("function"==typeof e?Y:$)(t,e))},Vt=[null];K.prototype=J.prototype={constructor:K,select:pt,selectAll:gt,filter:mt,data:xt,enter:bt,exit:kt,merge:Et,order:Mt,sort:Tt,call:St,nodes:At,node:jt,size:Pt,empty:Rt,each:Nt,attr:Ct,style:Ft,property:Lt,classed:It,text:zt,html:qt,raise:Dt,lower:Ut,append:Gt,insert:Ht,remove:Bt,datum:Xt,on:st,dispatch:Wt};var $t=function(t){return"string"==typeof t?new K([[document.querySelector(t)]],[document.documentElement]):new K([[t]],Vt)},Yt=function(t){return"string"==typeof t?new K([document.querySelectorAll(t)],[document.documentElement]):new K([null==t?[]:t],Vt)},Kt=function(t,e,n){arguments.length<3&&(n=e,e=lt().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return ft(t,r);return null},Jt=function(t,e){null==e&&(e=lt().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=ft(t,e[n]);return i};t.creator=et,t.local=r,t.matcher=at,t.mouse=ht,t.namespace=tt,t.namespaces=Z,t.select=$t,t.selectAll=Yt,t.selection=J,t.selector=dt,t.selectorAll=vt,t.touch=Kt,t.touches=Jt,t.window=Ot,t.customEvent=l,Object.defineProperty(t,"__esModule",{value:!0})})},{}],15:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){return b||(x(n),b=_.now()+w)}function n(){b=0}function r(){this._call=this._time=this._next=null}function i(t,e,n){var i=new r;return i.restart(t,e,n),i}function o(){e(),++p;for(var t,n=h;n;)(t=b-n._time)>=0&&n._call.call(null,t),n=n._next;--p}function a(){b=(y=_.now())+w,p=v=0;try{o()}finally{p=0,c(),b=0}}function u(){var t=_.now(),e=t-y;e>m&&(w-=e,y=t)}function c(){for(var t,e,n=h,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:h=e);d=t,s(r)}function s(t){if(!p){v&&(v=clearTimeout(v));var e=t-b;e>24?(t<1/0&&(v=setTimeout(a,e)),g&&(g=clearInterval(g))):(g||(g=setInterval(u,m)),p=1,x(a))}}function l(t,e,n){var i=new r;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i}function f(t,n,i){var o=new r,a=n;return null==n?(o.restart(t,n,i),o):(n=+n,i=null==i?e():+i,o.restart(function e(r){r+=a,o.restart(e,a+=n,i),t(r)},n,i),o)}var h,d,p=0,v=0,g=0,m=1e3,y=0,b=0,w=0,_="object"==typeof performance&&performance.now?performance:Date,x="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};r.prototype=i.prototype={constructor:r,restart:function(t,n,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?e():+r)+(null==n?0:+n),this._next||d===this||(d?d._next=this:h=this,d=this),this._call=t,this._time=r,s()},stop:function(){this._call&&(this._call=null,this._time=1/0,s())}},t.now=e,t.timer=i,t.timerFlush=o,t.timeout=l,t.interval=f,Object.defineProperty(t,"__esModule",{value:!0})})},{}],16:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-selection"),t("d3-dispatch"),t("d3-timer"),t("d3-interpolate"),t("d3-color"),t("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-timer","d3-interpolate","d3-color","d3-ease"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o,a){"use strict";function u(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>H)throw new Error("too late");return n}function c(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>X)throw new Error("too late");return n}function s(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function l(t,e,n){function i(t){n.state=B,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(i){var l,f,h,d;if(n.state!==B)return u();for(l in s)if(d=s[l],d.name===n.name){if(d.state===W)return r.timeout(o);d.state===V?(d.state=Y,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete s[l]):+l<e&&(d.state=Y,d.timer.stop(),delete s[l])}if(r.timeout(function(){n.state===W&&(n.state=V,n.timer.restart(a,n.delay,n.time),a(i))}),n.state=X,n.on.call("start",t,t.__data__,n.index,n.group),n.state===X){for(n.state=W,c=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(c[++f]=d);c.length=f+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=$,1),i=-1,o=c.length;++i<o;)c[i].call(null,r);n.state===$&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Y,n.timer.stop(),delete s[e];for(var r in s)return;delete t.__transition}var c,s=t.__transition;s[e]=n,n.timer=r.timer(i,0,n.time)}function f(t,e){var n,r;return function(){var i=c(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,u=r.length;a<u;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function h(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=c(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===e){i[s]=u;break}s===l&&i.push(u)}o.tween=i}}function d(t,e,n){var r=t._id;return t.each(function(){var t=c(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return s(t,r).value[e]}}function p(t){return function(){this.removeAttribute(t)}}function v(t){return function(){this.removeAttributeNS(t.space,t.local)}}function g(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function m(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function y(t,e,n){var r,i,o;return function(){var a,u=n(this);return null==u?void this.removeAttribute(t):(a=this.getAttribute(t),a===u?null:a===r&&u===i?o:o=e(r=a,i=u))}}function b(t,e,n){var r,i,o;return function(){var a,u=n(this);return null==u?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),a===u?null:a===r&&u===i?o:o=e(r=a,i=u))}}function w(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function _(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function x(t,e){return function(){u(this,t).delay=+e.apply(this,arguments)}}function k(t,e){return e=+e,function(){u(this,t).delay=e}}function E(t,e){return function(){c(this,t).duration=+e.apply(this,arguments)}}function M(t,e){return e=+e,function(){c(this,t).duration=e}}function T(t,e){if("function"!=typeof e)throw new Error;return function(){c(this,t).ease=e}}function S(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function A(t,e,n){var r,i,o=S(e)?u:c;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function j(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function P(t,n){var r,i,o;return function(){var a=e.window(this).getComputedStyle(this,null),u=a.getPropertyValue(t),c=(this.style.removeProperty(t),a.getPropertyValue(t));return u===c?null:u===r&&c===i?o:o=n(r=u,i=c)}}function R(t){return function(){this.style.removeProperty(t)}}function N(t,n,r){var i,o;return function(){var a=e.window(this).getComputedStyle(this,null).getPropertyValue(t);return a===r?null:a===i?o:o=n(i=a,r)}}function C(t,n,r){var i,o,a;return function(){var u=e.window(this).getComputedStyle(this,null),c=u.getPropertyValue(t),s=r(this);return null==s&&(this.style.removeProperty(t),s=u.getPropertyValue(t)),c===s?null:c===i&&s===o?a:a=n(i=c,o=s)}}function O(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function F(t){return function(){this.textContent=t}}function L(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function I(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function z(t){return e.selection().transition(t)}function q(){return++yt}function D(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return wt.time=r.now(),wt;return n}var U=n.dispatch("start","end","interrupt"),G=[],H=0,B=1,X=2,W=3,V=4,$=5,Y=6,K=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};l(t,n,{name:e,index:r,group:i,on:U,tween:G,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:H})},J=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>X&&n.state<$,n.state=Y,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},Q=function(t){return this.each(function(){J(this,t)})},Z=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=s(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?f:h)(n,t,e))},tt=function(t,e){var n;return("number"==typeof e?i.interpolateNumber:e instanceof o.color?i.interpolateRgb:(n=o.color(e))?(e=n,i.interpolateRgb):i.interpolateString)(t,e)},et=function(t,n){var r=e.namespace(t),o="transform"===r?i.interpolateTransformSvg:tt;return this.attrTween(t,"function"==typeof n?(r.local?b:y)(r,o,d(this,"attr."+t,n)):null==n?(r.local?v:p)(r):(r.local?m:g)(r,o,n))},nt=function(t,n){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;var i=e.namespace(t);return this.tween(r,(i.local?w:_)(i,n))},rt=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?x:k)(e,t)):s(this.node(),e).delay},it=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?E:M)(e,t)):s(this.node(),e).duration},ot=function(t){var e=this._id;return arguments.length?this.each(T(e,t)):s(this.node(),e).ease},at=function(t){"function"!=typeof t&&(t=e.matcher(t));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a,u=n[o],c=u.length,s=i[o]=[],l=0;l<c;++l)(a=u[l])&&t.call(a,a.__data__,l,u)&&s.push(a);return new I(i,this._parents,this._name,this._id)},ut=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=e[u],l=n[u],f=s.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=s[d]||l[d])&&(h[d]=c);for(;u<r;++u)a[u]=e[u];return new I(a,this._parents,this._name,this._id)},ct=function(t,e){var n=this._id;return arguments.length<2?s(this.node(),n).on.on(t):this.each(A(n,t,e))},st=function(){return this.on("end.remove",j(this._id))},lt=function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selector(t));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var c,l,f=i[u],h=f.length,d=a[u]=new Array(h),p=0;p<h;++p)(c=f[p])&&(l=t.call(c,c.__data__,p,f))&&("__data__"in c&&(l.__data__=c.__data__),d[p]=l,K(d[p],n,r,p,d,s(c,r)));return new I(a,this._parents,n,r)},ft=function(t){var n=this._name,r=this._id;"function"!=typeof t&&(t=e.selectorAll(t));for(var i=this._groups,o=i.length,a=[],u=[],c=0;c<o;++c)for(var l,f=i[c],h=f.length,d=0;d<h;++d)if(l=f[d]){for(var p,v=t.call(l,l.__data__,d,f),g=s(l,r),m=0,y=v.length;m<y;++m)(p=v[m])&&K(p,n,r,m,v,g);a.push(v),u.push(l)}return new I(a,u,n,r)},ht=e.selection.prototype.constructor,dt=function(){return new ht(this._groups,this._parents)},pt=function(t,e,n){var r="transform"==(t+="")?i.interpolateTransformCss:tt;return null==e?this.styleTween(t,P(t,r)).on("end.style."+t,R(t)):this.styleTween(t,"function"==typeof e?C(t,r,d(this,"style."+t,e)):N(t,r,e),n)},vt=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,O(t,e,null==n?"":n))},gt=function(t){return this.tween("text","function"==typeof t?L(d(this,"text",t)):F(null==t?"":t+""))},mt=function(){for(var t=this._name,e=this._id,n=q(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,l=0;l<c;++l)if(a=u[l]){var f=s(a,e);K(a,t,n,l,u,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new I(r,this._parents,t,n)},yt=0,bt=e.selection.prototype;I.prototype=z.prototype={constructor:I,select:lt,selectAll:ft,filter:at,merge:ut,selection:dt,transition:mt,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:ct,attr:et,attrTween:nt,style:pt,styleTween:vt,text:gt,remove:st,tween:Z,delay:rt,duration:it,ease:ot};var wt={time:null,delay:0,duration:250,ease:a.easeCubicInOut},_t=function(t){var e,n;t instanceof I?(e=t._id,t=t._name):(e=q(),(n=wt).time=r.now(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var u,c=i[a],s=c.length,l=0;l<s;++l)(u=c[l])&&K(u,t,e,l,c,n||D(u,e));return new I(i,this._parents,t,e)};e.selection.prototype.interrupt=Q,e.selection.prototype.transition=_t;var xt=[null],kt=function(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>B&&n.name===e)return new I([[t]],xt,e,+r)}return null};t.transition=z,t.active=kt,t.interrupt=J,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":5,"d3-dispatch":6,"d3-ease":9,"d3-interpolate":12,"d3-selection":14,"d3-timer":15}],17:[function(t,e,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof e?i(n,t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-selection"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o){"use strict";function a(t,e,n){this.target=t,this.type=e,this.transform=n}function u(t,e,n){this.k=t,this.x=e,this.y=n}function c(t){return t.__zoom||p}function s(){i.event.stopImmediatePropagation()}function l(){return!i.event.button}function f(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function h(){return this.__zoom||p}var d=function(t){return function(){return t}};u.prototype={constructor:u,scale:function(t){return 1===t?this:new u(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new u(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var p=new u(1,0,0);c.prototype=u.prototype;var v=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()},g=function(){function t(t){t.on("wheel.zoom",_).on("mousedown.zoom",x).on("dblclick.zoom",k).on("touchstart.zoom",E).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",h)}function c(t,e){return e=Math.max(R,Math.min(N,e)),e===t.k?t:new u(e,t.x,t.y)}function p(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new u(t.k,r,i)}function g(t,e){var n=t.invertX(e[0][0])-C,r=t.invertX(e[1][0])-O,i=t.invertY(e[0][1])-F,o=t.invertY(e[1][1])-L;return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,e,n){t.on("start.zoom",function(){b(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,i=b(t,r),o=P.apply(t,r),a=n||m(o),c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),s=t.__zoom,l="function"==typeof e?e.apply(t,r):e,f=z(s.invert(a).concat(c/s.k),l.invert(a).concat(c/l.k));return function(t){if(1===t)t=l;else{var e=f(t),n=c/e[2];t=new u(n,a[0]-e[0]*n,a[1]-e[1]*n)}i.zoom(null,t)}})}function b(t,e){for(var n,r=0,i=q.length;r<i;++r)if((n=q[r]).that===t)return n;return new w(t,e)}function w(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=P.apply(t,e)}function _(){function t(){e.wheel=null,e.end()}if(j.apply(this,arguments)){var e=b(this,arguments),n=this.__zoom,r=Math.max(R,Math.min(N,n.k*Math.pow(2,-i.event.deltaY*(i.event.deltaMode?120:1)/500))),a=i.mouse(this);if(e.wheel)e.mouse[0][0]===a[0]&&e.mouse[0][1]===a[1]||(e.mouse[1]=n.invert(e.mouse[0]=a)),clearTimeout(e.wheel);else{if(n.k===r)return;e.mouse=[a,n.invert(a)],o.interrupt(this),e.start()}v(),e.wheel=setTimeout(t,G),e.zoom("mouse",g(p(c(n,r),e.mouse[0],e.mouse[1]),e.extent))}}function x(){function t(){v(),r.moved=!0,r.zoom("mouse",g(p(r.that.__zoom,r.mouse[0]=i.mouse(r.that),r.mouse[1]),r.extent))}function e(){a.on("mousemove.zoom mouseup.zoom",null),n.dragEnable(i.event.view,r.moved),v(),r.end()}if(!A&&j.apply(this,arguments)){var r=b(this,arguments),a=i.select(i.event.view).on("mousemove.zoom",t,!0).on("mouseup.zoom",e,!0),u=i.mouse(this);n.dragDisable(i.event.view),s(),r.mouse=[u,this.__zoom.invert(u)],o.interrupt(this),r.start()}}function k(){if(j.apply(this,arguments)){var e=this.__zoom,n=i.mouse(this),r=e.invert(n),o=e.k*(i.event.shiftKey?.5:2),a=g(p(c(e,o),n,r),P.apply(this,arguments));v(),I>0?i.select(this).transition().duration(I).call(y,a,n):i.select(this).call(t.transform,a)}}function E(){if(j.apply(this,arguments)){var t,e,n,r,a=b(this,arguments),u=i.event.changedTouches,c=u.length;for(s(),e=0;e<c;++e)n=u[e],r=i.touch(this,u,n.identifier),r=[r,this.__zoom.invert(r),n.identifier],a.touch0?a.touch1||(a.touch1=r,a.tap=!1):(a.touch0=r,t=!0,a.tap=!0,a.consecutive=!!S);S&&(S=clearTimeout(S)),t&&(a.consecutive||(S=setTimeout(function(){S=null},U)),o.interrupt(this),a.start())}}function M(){var t,e,n,r,o=b(this,arguments),a=i.event.changedTouches,u=a.length;for(v(),S&&(S=clearTimeout(S)),o.tap=!1,t=0;t<u;++t)e=a[t],n=i.touch(this,a,e.identifier),o.touch0&&o.touch0[2]===e.identifier?o.touch0[0]=n:o.touch1&&o.touch1[2]===e.identifier&&(o.touch1[0]=n);if(e=o.that.__zoom,o.touch1){var s=o.touch0[0],l=o.touch0[1],f=o.touch1[0],h=o.touch1[1],d=(d=f[0]-s[0])*d+(d=f[1]-s[1])*d,m=(m=h[0]-l[0])*m+(m=h[1]-l[1])*m;e=c(e,Math.sqrt(d/m)),n=[(s[0]+f[0])/2,(s[1]+f[1])/2],r=[(l[0]+h[0])/2,(l[1]+h[1])/2]}else{if(!o.touch0)return;n=o.touch0[0],r=o.touch0[1]}o.zoom("touch",g(p(e,n,r),o.extent))}function T(){var t,e,n=b(this,arguments),r=i.event.changedTouches,o=r.length;for(s(),A&&clearTimeout(A),A=setTimeout(function(){A=null},U),t=0;t<o;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),!n.touch0&&(n.end(),n.consecutive&&n.tap)){var a=i.select(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}var S,A,j=l,P=f,R=0,N=1/0,C=-N,O=N,F=C,L=O,I=250,z=r.interpolateZoom,q=[],D=e.dispatch("start","zoom","end"),U=500,G=150;return t.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",h),t!==n?y(t,e):n.interrupt().each(function(){b(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},t.scaleBy=function(e,n){t.scaleTo(e,function(){var t=this.__zoom.k,e="function"==typeof n?n.apply(this,arguments):n;return t*e})},t.scaleTo=function(e,n){t.transform(e,function(){var t=P.apply(this,arguments),e=this.__zoom,r=m(t),i=e.invert(r),o="function"==typeof n?n.apply(this,arguments):n;return g(p(c(e,o),r,i),t)})},t.translateBy=function(e,n,r){t.transform(e,function(){return g(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),P.apply(this,arguments))})},w.prototype={start:function(){return 1===++this.active&&(this.index=q.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(q.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){i.customEvent(new a(t,e,this.that.__zoom),D.apply,D,[e,this.that,this.args])}},t.filter=function(e){return arguments.length?(j="function"==typeof e?e:d(!!e),t):j},t.extent=function(e){return arguments.length?(P="function"==typeof e?e:d([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):P},t.scaleExtent=function(e){return arguments.length?(R=+e[0],N=+e[1],t):[R,N]},t.translateExtent=function(e){return arguments.length?(C=+e[0][0],O=+e[1][0],F=+e[0][1],L=+e[1][1],t):[[C,F],[O,L]]},t.duration=function(e){return arguments.length?(I=+e,t):I},t.interpolate=function(e){return arguments.length?(z=e,t):z},t.on=function(){var e=D.on.apply(D,arguments);return e===D?t:e},t};t.zoom=g,t.zoomTransform=c,t.zoomIdentity=p,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-dispatch":6,"d3-drag":7,"d3-interpolate":12,"d3-selection":14,"d3-transition":16}],18:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function a(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function u(){g&&p&&(g=!1,p.length?v=p.concat(v):m=-1,v.length&&c())}function c(){if(!g){var t=o(u);g=!0;for(var e=v.length;e;){for(p=v,v=[];++m<e;)p&&p[m].run();m=-1,e=v.length}p=null,g=!1,a(t)}}function s(t,e){this.fun=t,this.array=e}function l(){}var f,h,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var p,v=[],g=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new s(t,e)),1!==v.length||g||o(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],19:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.topojson=t.topojson||{})}(this,function(t){"use strict";function e(t,e){var r=e.id,i=e.bbox,o=null==e.properties?{}:e.properties,a=n(t,e);return null==r&&null==i?{type:"Feature",properties:o,geometry:a}:null==i?{type:"Feature",id:r,properties:o,geometry:a}:{type:"Feature",id:r,bbox:i,properties:o,geometry:a}}function n(t,e){function n(t,e){e.length&&e.pop();for(var n=f[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(s(n[r].slice(),r));t<0&&l(e,i)}function r(t){return s(t.slice())}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0].slice());return e}function a(t){return t.map(o)}function u(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(u)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:n,coordinates:e}}var s=c(t),f=t.arcs;return u(e)}function r(t,e,n){var r,o,a;if(arguments.length>1)r=i(t,e,n);else for(o=0,r=new Array(a=t.arcs.length);o<a;++o)r[o]=o;return{type:"MultiLineString",arcs:h(t,r)}}function i(t,e,n){function r(t){var e=t<0?~t:t;(l[e]||(l[e]=[])).push({i:t,g:c})}function i(t){t.forEach(r)}function o(t){t.forEach(i)}function a(t){t.forEach(o)}function u(t){switch(c=t,t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":o(t.arcs);break;case"MultiPolygon":a(t.arcs)}}var c,s=[],l=[];return u(e),l.forEach(null==n?function(t){s.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&s.push(t[0].i)}),s}function o(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}function a(t,e){function r(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(r);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}}function i(t){t.forEach(function(e){e.forEach(function(e){(u[e=e<0?~e:e]||(u[e]=[])).push(t)})}),c.push(t)}function a(e){return o(n(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var u={},c=[],s=[];return e.forEach(r),c.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),c.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var n,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].length<2&&r.push(t)})})}),r=h(t,r),(n=r.length)>1)for(var i,o,c=1,s=a(r[0]);c<n;++c)(i=a(r[c]))>s&&(o=r[0],r[0]=r[c],r[c]=o,s=i);return r})}}var u=function(t){return t},c=function(t){if(null==(e=t.transform))return u;var e,n,r,i=e.scale[0],o=e.scale[1],a=e.translate[0],c=e.translate[1];return function(t,e){return e||(n=r=0),t[0]=(n+=t[0])*i+a,t[1]=(r+=t[1])*o+c,t}},s=function(t){function e(t){u[0]=t[0],u[1]=t[1],a(u),u[0]<s&&(s=u[0]),u[0]>f&&(f=u[0]),u[1]<l&&(l=u[1]),u[1]>h&&(h=u[1])}function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Point":e(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(e)}}var r=t.bbox;if(!r){var i,o,a=c(t),u=new Array(2),s=1/0,l=s,f=-s,h=-s;t.arcs.forEach(function(t){for(var e=-1,n=t.length;++e<n;)i=t[e],u[0]=i[0],u[1]=i[1],a(u,e),u[0]<s&&(s=u[0]),u[0]>f&&(f=u[0]),u[1]<l&&(l=u[1]),u[1]>h&&(h=u[1])});for(o in t.objects)n(t.objects[o]);r=t.bbox=[s,l,f,h]}return r},l=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},f=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return e(t,n)})}:e(t,n)},h=function(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],
delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),u.push(r)}}var i={},o={},a={},u=[],c=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++c],e[c]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),u=i[0],c=i[1];if(e=a[u])if(delete a[e.end],e.push(t),e.end=c,r=o[c]){delete o[r.start];var s=r===e?e:e.concat(r);o[s.start=e.start]=a[s.end=r.end]=s}else o[e.start]=a[e.end]=e;else if(e=o[c])if(delete o[e.start],e.unshift(t),e.start=u,r=a[u]){delete a[r.end];var l=r===e?e:r.concat(e);o[l.start=r.start]=a[l.end=e.end]=l}else o[e.start]=a[e.end]=e;else e=[t],o[e.start=u]=a[e.end=c]=e}),r(a,o),r(o,a),e.forEach(function(t){i[t<0?~t:t]||u.push([t])}),u},d=function(t){return n(t,r.apply(this,arguments))},p=function(t){return n(t,a.apply(this,arguments))},v=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n},g=function(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=i[t];n?n.push(e):i[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,e)}):t.type in a&&a[t.type](t.arcs,e)}var i={},o=t.map(function(){return[]}),a={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(r);for(var u in i)for(var c=i[u],s=c.length,l=0;l<s;++l)for(var f=l+1;f<s;++f){var h,d=c[l],p=c[f];(h=o[d])[u=v(h,p)]!==p&&h.splice(u,0,p),(h=o[p])[u=v(h,d)]!==d&&h.splice(u,0,d)}return o},m=function(t,e){function n(t){t[0]=Math.round((t[0]-a)/u),t[1]=Math.round((t[1]-c)/l)}function r(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(r);break;case"Point":n(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(n)}}if(!((e=Math.floor(e))>=2))throw new Error("n must be ≥2");if(t.transform)throw new Error("already quantized");var i,o=s(t),a=o[0],u=(o[2]-a)/(e-1)||1,c=o[1],l=(o[3]-c)/(e-1)||1;t.arcs.forEach(function(t){for(var e,n,r,i=1,o=1,s=t.length,f=t[0],h=f[0]=Math.round((f[0]-a)/u),d=f[1]=Math.round((f[1]-c)/l);i<s;++i)f=t[i],n=Math.round((f[0]-a)/u),r=Math.round((f[1]-c)/l),n===h&&r===d||(e=t[o++],e[0]=n-h,h=n,e[1]=r-d,d=r);o<2&&(e=t[o++],e[0]=0,e[1]=0),t.length=o});for(i in t.objects)r(t.objects[i]);return t.transform={scale:[u,l],translate:[a,c]},t},y=function(t){if(null==(e=t.transform))return u;var e,n,r,i=e.scale[0],o=e.scale[1],a=e.translate[0],c=e.translate[1];return function(t,e){e||(n=r=0);var u=Math.round((t[0]-a)/i),s=Math.round((t[1]-c)/o);return t[0]=u-n,n=u,t[1]=s-r,r=s,t}};t.bbox=s,t.feature=f,t.mesh=d,t.meshArcs=r,t.merge=p,t.mergeArcs=a,t.neighbors=g,t.quantize=m,t.transform=c,t.untransform=y,Object.defineProperty(t,"__esModule",{value:!0})})},{}],20:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var u=i?i[o]:o;r=n(r,e[u],u,e)}return r}return function(n,r,i,o){r=_(r,o,4);var a=!A(n)&&w.keys(n),u=(a||n).length,c=t>0?0:u-1;return arguments.length<3&&(i=n[a?a[c]:c],c+=t),e(n,r,i,a,c,u)}}function r(t){return function(e,n,r){n=x(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e,n){return function(r,i,o){var a=0,u=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(h.call(r,a,u),w.isNaN),o>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}}function o(t,e){var n=C.length,r=t.constructor,i=w.isFunction(r)&&r.prototype||s,o="constructor";for(w.has(t,o)&&!w.contains(e,o)&&e.push(o);n--;)o=C[n],o in t&&t[o]!==i[o]&&!w.contains(e,o)&&e.push(o)}var a=this,u=a._,c=Array.prototype,s=Object.prototype,l=Function.prototype,f=c.push,h=c.slice,d=s.toString,p=s.hasOwnProperty,v=Array.isArray,g=Object.keys,m=l.bind,y=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=w),n._=w):a._=w,w.VERSION="1.8.3";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},x=function(t,e,n){return null==t?w.identity:w.isFunction(t)?_(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return x(t,e,1/0)};var k=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,c=0;c<u;c++){var s=a[c];e&&void 0!==n[s]||(n[s]=o[s])}return n}},E=function(t){if(!w.isObject(t))return{};if(y)return y(t);b.prototype=t;var e=new b;return b.prototype=null,e},M=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,S=M("length"),A=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=T};w.each=w.forEach=function(t,e,n){e=_(e,n);var r,i;if(A(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=w.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},w.map=w.collect=function(t,e,n){e=x(e,n);for(var r=!A(t)&&w.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=e(t[u],u,t)}return o},w.reduce=w.foldl=w.inject=t(1),w.reduceRight=w.foldr=t(-1),w.find=w.detect=function(t,e,n){var r;if(r=A(t)?w.findIndex(t,e,n):w.findKey(t,e,n),void 0!==r&&r!==-1)return t[r]},w.filter=w.select=function(t,e,n){var r=[];return e=x(e,n),w.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},w.reject=function(t,e,n){return w.filter(t,w.negate(x(e)),n)},w.every=w.all=function(t,e,n){e=x(e,n);for(var r=!A(t)&&w.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},w.some=w.any=function(t,e,n){e=x(e,n);for(var r=!A(t)&&w.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n,r){return A(t)||(t=w.values(t)),("number"!=typeof n||r)&&(n=0),w.indexOf(t,e,n)>=0},w.invoke=function(t,e){var n=h.call(arguments,2),r=w.isFunction(e);return w.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=A(t)?t:w.values(t);for(var u=0,c=t.length;u<c;u++)r=t[u],r>o&&(o=r)}else e=x(e,n),w.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},w.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=A(t)?t:w.values(t);for(var u=0,c=t.length;u<c;u++)r=t[u],r<o&&(o=r)}else e=x(e,n),w.each(t,function(t,n,r){i=e(t,n,r),(i<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},w.shuffle=function(t){for(var e,n=A(t)?t:w.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=w.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},w.sample=function(t,e,n){return null==e||n?(A(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=x(e,n),w.pluck(w.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var j=function(t){return function(e,n,r){var i={};return n=x(n,r),w.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};w.groupBy=j(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=j(function(t,e,n){t[n]=e}),w.countBy=j(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?h.call(t):A(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:A(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=x(e,n);var r=[],i=[];return w.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},w.first=w.head=w.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,n){return h.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,n){return h.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var P=function(t,e,n,r){for(var i=[],o=0,a=r||0,u=S(t);a<u;a++){var c=t[a];if(A(c)&&(w.isArray(c)||w.isArguments(c))){e||(c=P(c,e,n));var s=0,l=c.length;for(i.length+=l;s<l;)i[o++]=c[s++]}else n||(i[o++]=c)}return i};w.flatten=function(t,e){return P(t,e,!1)},w.without=function(t){return w.difference(t,h.call(arguments,1))},w.uniq=w.unique=function(t,e,n,r){w.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=x(n,r));for(var i=[],o=[],a=0,u=S(t);a<u;a++){var c=t[a],s=n?n(c,a,t):c;e?(a&&o===s||i.push(c),o=s):n?w.contains(o,s)||(o.push(s),i.push(c)):w.contains(i,c)||i.push(c)}return i},w.union=function(){return w.uniq(P(arguments,!0,!0))},w.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!w.contains(e,o)){for(var a=1;a<n&&w.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},w.difference=function(t){var e=P(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=w.pluck(t,r);return n},w.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},w.findIndex=r(1),w.findLastIndex=r(-1),w.sortedIndex=function(t,e,n,r){n=x(n,r,1);for(var i=n(e),o=0,a=S(t);o<a;){var u=Math.floor((o+a)/2);n(t[u])<i?o=u+1:a=u}return o},w.indexOf=i(1,w.findIndex,w.sortedIndex),w.lastIndexOf=i(-1,w.findLastIndex),w.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var R=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=E(t.prototype),a=t.apply(o,i);return w.isObject(a)?a:o};w.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,h.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),r=function(){return R(t,r,e,this,n.concat(h.call(arguments)))};return r},w.partial=function(t){var e=h.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===w?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return R(t,n,this,this,o)};return n},w.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return w.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},w.delay=function(t,e){var n=h.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var r,i,o,a=null,u=0;n||(n={});var c=function(){u=n.leading===!1?0:w.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var s=w.now();u||n.leading!==!1||(u=s);var l=e-(s-u);return r=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),u=s,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(c,l)),o}},w.debounce=function(t,e,n){var r,i,o,a,u,c=function(){var s=w.now()-a;s<e&&s>=0?r=setTimeout(c,e-s):(r=null,n||(u=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=w.now();var s=n&&!r;return r||(r=setTimeout(c,e)),s&&(u=t.apply(o,i),o=i=null),u}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},w.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},w.once=w.partial(w.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return N&&o(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&o(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},w.mapObject=function(t,e,n){e=x(e,n);for(var r,i=w.keys(t),o=i.length,a={},u=0;u<o;u++)r=i[u],a[r]=e(t[r],r,t);return a},w.pairs=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},w.invert=function(t){for(var e={},n=w.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=k(w.allKeys),w.extendOwn=w.assign=k(w.keys),w.findKey=function(t,e,n){e=x(e,n);for(var r,i=w.keys(t),o=0,a=i.length;o<a;o++)if(r=i[o],e(t[r],r,t))return r},w.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;w.isFunction(e)?(i=w.allKeys(a),r=_(e,n)):(i=P(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var u=0,c=i.length;u<c;u++){var s=i[u],l=a[s];r(l,s,a)&&(o[s]=l)}return o},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var r=w.map(P(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(r,e)}}return w.pick(t,e,n)},w.defaults=k(w.allKeys,!0),w.create=function(t,e){var n=E(t);return e&&w.extendOwn(n,e),n},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var O=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!O(t[c],e[c],n,r))return!1}else{var s,l=w.keys(t);if(c=l.length,w.keys(e).length!==c)return!1;for(;c--;)if(s=l[c],!w.has(e,s)||!O(t[s],e[s],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(t,e){return O(t,e)},w.isEmpty=function(t){return null==t||(A(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length)},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=v||function(t){return"[object Array]"===d.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&p.call(t,e)},w.noConflict=function(){return a._=u,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=M,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var r=Array(Math.max(0,t));e=_(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=w.invert(F),I=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};w.escape=I(F),w.unescape=I(L),w.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),w.isFunction(r)?r.call(t):r};var z=0;w.uniqueId=function(t){var e=++z+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,G=function(t){return"\\"+D[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var r=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,u){return o+=t.slice(i,u).replace(U,G),i=u+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var u=function(t){return a.call(this,t,w)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},w.chain=function(t){var e=w(t);return e._chain=!0,e};var H=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),H(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],H(this,n)}}),w.each(["concat","join","slice"],function(t){var e=c[t];w.prototype[t]=function(){return H(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return w})}).call(this)},{}],21:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./Scheduler"),r=t("./env").asap;return e({scheduler:new n(r)})})}("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./Scheduler":22,"./env":34,"./makePromise":36}],22:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],23:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],24:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(t,n){function r(e,r,o){var a=t._defer(),u=o.length,c=new Array(u);return i({f:e,thisArg:r,args:o,params:c,i:u-1,call:n},a._handler),a}function i(e,r){if(e.i<0)return n(e.f,e.thisArg,e.params,r);var i=t._handler(e.args[e.i]);i.fold(o,e,void 0,r)}function o(t,e,n){t.params[t.i]=e,t.i-=1,i(t,n)}return arguments.length<2&&(n=e),r}function e(t,e,n,r){try{r.resolve(t.apply(e,n))}catch(t){r.reject(t)}}return t.tryCatchResolve=e,t})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],25:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){var e=t("../state"),n=t("../apply");return function(t){function r(e){function n(t){l=null,this.resolve(t)}function r(t){this.resolved||(l.push(t),0===--s&&this.reject(l))}for(var i,o,a=t._defer(),u=a._handler,c=e.length>>>0,s=c,l=[],f=0;f<c;++f)if(o=e[f],void 0!==o||f in e){if(i=t._handler(o),i.state()>0){u.become(i),t._visitRemaining(e,f,i);break}i.visit(u,n,r)}else--s;return 0===s&&u.reject(new RangeError("any(): array must not be empty")),a}function i(e,n){function r(t){this.resolved||(l.push(t),0===--d&&(f=null,this.resolve(l)))}function i(t){this.resolved||(f.push(t),0===--o&&(l=null,this.reject(f)))}var o,a,u,c=t._defer(),s=c._handler,l=[],f=[],h=e.length>>>0,d=0;for(u=0;u<h;++u)a=e[u],(void 0!==a||u in e)&&++d;for(n=Math.max(n,0),o=d-n+1,d=Math.min(n,d),n>d?s.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+d)):0===d&&s.resolve(l),u=0;u<h;++u)a=e[u],(void 0!==a||u in e)&&t._handler(a).visit(s,r,i,s.notify);return c}function o(e,n){return t._traverse(n,e)}function a(e,n){var r=y.call(e);return t._traverse(n,r).then(function(t){return u(r,t)})}function u(e,n){for(var r=n.length,i=new Array(r),o=0,a=0;o<r;++o)n[o]&&(i[a++]=t._handler(e[o]).value);return i.length=a,i}function c(t){return v(t.map(s))}function s(n){var r=t._handler(n);return 0===r.state()?p(n).then(e.fulfilled,e.rejected):(r._unreport(),e.inspect(r))}function l(t,e){return arguments.length>2?g.call(t,h(e),arguments[2]):g.call(t,h(e))}function f(t,e){return arguments.length>2?m.call(t,h(e),arguments[2]):m.call(t,h(e))}function h(t){return function(e,n,r){return d(t,void 0,[e,n,r])}}var d=n(t),p=t.resolve,v=t.all,g=Array.prototype.reduce,m=Array.prototype.reduceRight,y=Array.prototype.slice;return t.any=r,t.some=i,t.settle=c,t.map=o,t.filter=a,t.reduce=l,t.reduceRight=f,t.prototype.spread=function(t){return this.then(v).then(function(e){return t.apply(this,e)})},t}})}("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../apply":24,"../state":37}],26:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return n(e)?t instanceof e:e(t)}function n(t){return t===Error||null!=t&&t.prototype instanceof Error}function r(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function i(t){return t}return function(n){function o(t,n){return function(r){return e(r,n)?t.call(this,r):s(r)}}function a(t,e,n,i){var o=t.call(e);return r(o)?u(o,n,i):n(i)}function u(t,e,n){return c(t).then(function(){return e(n)})}var c=n.resolve,s=n.reject,l=n.prototype.catch;return n.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},n.prototype.catch=n.prototype.otherwise=function(e){return arguments.length<2?l.call(this,e):"function"!=typeof e?this.ensure(t):l.call(this,o(arguments[1],e))},n.prototype.finally=n.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(e){return a(t,this,i,e)},function(e){return a(t,this,s,e)})},n.prototype.else=n.prototype.orElse=function(t){return this.then(void 0,function(){return t})},n.prototype.yield=function(t){return this.then(function(){return t})},n.prototype.tap=function(t){return this.then(t).yield(this)},n}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],27:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){return t.prototype.fold=function(e,n){var r=this._beget();return this._handler.fold(function(n,r,i){t._handler(n).fold(function(t,n,r){r.resolve(e.call(this,n,t))},r,this,i)},n,r._handler.receiver,r._handler),r},t}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],28:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){var e=t("../state").inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}})}("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../state":37}],29:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){function e(t,e,r,i){return n(function(e){return[e,t(e)]},e,r,i)}function n(t,e,i,o){function a(o,a){return r(i(o)).then(function(){return n(t,e,i,a)})}return r(o).then(function(n){return r(e(n)).then(function(e){return e?n:r(t(n)).spread(a)})})}var r=t.resolve;return t.iterate=e,t.unfold=n,t}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],30:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],31:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function e(t,e,r,i){return n.setTimer(function(){t(r,i,e)},e)}var n=t("../env"),r=t("../TimeoutError");return function(t){function i(t,n,r){e(o,t,n,r)}function o(t,e){e.resolve(t)}function a(t,e,n){var i="undefined"==typeof t?new r("timed out after "+n+"ms"):t;e.reject(i)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(i,t,void 0,e._handler),e},t.prototype.timeout=function(t,r){var i=this._beget(),o=i._handler,u=e(a,t,r,i._handler);return this._handler.visit(o,function(t){n.clearTimer(u),this.resolve(t)},function(t){n.clearTimer(u),this.reject(t)},o.notify),i},t}})}("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../TimeoutError":23,"../env":34}],32:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function e(t){throw t}function n(){}var r=t("../env").setTimer,i=t("../format");return function(t){function o(t){t.handled||(d.push(t),l("Potentially unhandled rejection ["+t.id+"] "+i.formatError(t.value)))}function a(t){var e=d.indexOf(t);e>=0&&(d.splice(e,1),f("Handled previous rejection ["+t.id+"] "+i.formatObject(t.value)))}function u(t,e){h.push(t,e),null===p&&(p=r(c,0))}function c(){for(p=null;h.length>0;)h.shift()(h.shift())}var s,l=n,f=n;"undefined"!=typeof console&&(s=console,l="undefined"!=typeof s.error?function(t){s.error(t)}:function(t){s.log(t)},f="undefined"!=typeof s.info?function(t){s.info(t)}:function(t){s.log(t)}),t.onPotentiallyUnhandledRejection=function(t){u(o,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){u(a,t)},t.onFatalRejection=function(t){u(e,t.value)};var h=[],d=[],p=null;return t}})}("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"../env":34,"../format":35}],33:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],34:[function(t,e,n){(function(n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function e(){return"undefined"!=typeof n&&"[object process]"===Object.prototype.toString.call(n)}function r(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function i(t){function e(){var t=n;n=void 0,t()}var n,r=document.createTextNode(""),i=new t(e);i.observe(r,{characterData:!0});var o=0;return function(t){n=t,r.data=o^=1}}var o,a="undefined"!=typeof setTimeout&&setTimeout,u=function(t,e){return setTimeout(t,e)},c=function(t){return clearTimeout(t)},s=function(t){return a(t,0)};if(e())s=function(t){return n.nextTick(t)};else if(o=r())s=i(o);else if(!a){var l=t,f=l("vertx");u=function(t,e){return f.setTimer(e,t)},c=f.cancelTimer,s=f.runOnLoop||f.runOnContext}return{setTimer:u,clearTimer:c,asap:s}})}("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})}).call(this,t("_process"))},{_process:18}],35:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(t){var n="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=n(t,e)),e}function n(t,e){try{return JSON.stringify(t)}catch(t){return e}}return{formatError:t,formatObject:e,tryStringify:n}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],36:[function(t,e,n){(function(t){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(e){"use strict";e(function(){return function(e){function n(t,e){this._handler=t===w?e:r(t)}function r(t){function e(t){i.resolve(t)}function n(t){i.reject(t)}function r(t){i.notify(t)}var i=new x;try{t(e,n,r)}catch(t){n(t)}return i}function i(t){return F(t)?t:new n(w,new k(m(t)))}function o(t){return new n(w,new k(new T(t)))}function a(){return tt}function u(){return new n(w,new x)}function c(t,e){var n=new x(t.receiver,t.join().context);return new e(w,n)}function s(t){return f(X,null,t)}function l(t,e){return f(D,t,e)}function f(t,e,r){function i(n,i,a){a.resolved||h(r,o,n,t(e,i,n),a)}function o(t,e,n){l[t]=e,0===--s&&n.become(new M(l))}for(var a,u="function"==typeof e?i:o,c=new x,s=r.length>>>0,l=new Array(s),f=0;f<r.length&&!c.resolved;++f)a=r[f],void 0!==a||f in r?h(r,u,f,a,c):--s;return 0===s&&c.become(new M(l)),new n(w,c)}function h(t,e,n,r,i){if(L(r)){var o=y(r),a=o.state();0===a?o.fold(e,n,void 0,i):a>0?e(n,o.value,i):(i.become(o),d(t,n+1,o))}else e(n,r,i)}function d(t,e,n){for(var r=e;r<t.length;++r)p(m(t[r]),n)}function p(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):n<0&&t._unreport()}}function v(t){return"object"!=typeof t||null===t?o(new TypeError("non-iterable passed to race()")):0===t.length?a():1===t.length?i(t[0]):g(t)}function g(t){var e,r,i,o=new x;for(e=0;e<t.length;++e)if(r=t[e],void 0!==r||e in t){if(i=m(r),0!==i.state()){o.become(i),d(t,e+1,i);break}i.visit(o,o.resolve,o.reject)}return new n(w,o)}function m(t){return F(t)?t._handler.join():L(t)?b(t):new M(t)}function y(t){return F(t)?t._handler.join():b(t)}function b(t){try{var e=t.then;return"function"==typeof e?new E(e,t):new M(t)}catch(t){return new T(t)}}function w(){}function _(){}function x(t,e){n.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function k(t){this.handler=t}function E(t,e){x.call(this),$.enqueue(new N(t,e,this))}function M(t){n.createContext(this),this.value=t}function T(t){n.createContext(this),this.id=++Q,this.value=t,this.handled=!1,this.reported=!1,this._report()}function S(t,e){this.rejection=t,this.context=e}function A(t){this.rejection=t}function j(){return new T(new TypeError("Promise cycle"))}function P(t,e){this.continuation=t,this.handler=e}function R(t,e){this.handler=e,this.value=t}function N(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function C(t,e,n,r,i){try{t.call(e,n,r,i)}catch(t){r(t)}}function O(t,e,n,r){this.f=t,this.z=e,this.c=n,this.to=r,this.resolver=J,this.receiver=this}function F(t){return t instanceof n}function L(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function I(t,e,r,i){return"function"!=typeof t?i.become(e):(n.enterContext(e),U(t,e.value,r,i),void n.exitContext())}function z(t,e,r,i,o){return"function"!=typeof t?o.become(r):(n.enterContext(r),G(t,e,r.value,i,o),void n.exitContext())}function q(t,e,r,i,o){return"function"!=typeof t?o.notify(e):(n.enterContext(r),H(t,e,i,o),void n.exitContext())}function D(t,e,n){try{return t(e,n)}catch(t){return o(t)}}function U(t,e,n,r){try{r.become(m(t.call(n,e)))}catch(t){r.become(new T(t))}}function G(t,e,n,r,i){try{t.call(r,e,n,i)}catch(t){i.become(new T(t))}}function H(t,e,n,r){try{r.notify(t.call(n,e))}catch(t){r.notify(t)}}function B(t,e){e.prototype=K(t.prototype),e.prototype.constructor=e}function X(t,e){return e}function W(){}function V(){return"undefined"!=typeof t&&null!==t&&"function"==typeof t.emit?function(e,n){return"unhandledRejection"===e?t.emit(e,n.value,n):t.emit(e,n)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var r=!1;try{var i=new n("unhandledRejection");r=i instanceof n}catch(t){}return r?function(t,r){var i=new n(t,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!e.dispatchEvent(i)}:t}(W,self,CustomEvent):W}var $=e.scheduler,Y=V(),K=Object.create||function(t){function e(){}return e.prototype=t,new e};n.resolve=i,n.reject=o,n.never=a,n._defer=u,n._handler=m,n.prototype.then=function(t,e,n){var r=this._handler,i=r.join().state();if("function"!=typeof t&&i>0||"function"!=typeof e&&i<0)return new this.constructor(w,r);var o=this._beget(),a=o._handler;return r.chain(a,r.receiver,t,e,n),o},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype._beget=function(){return c(this._handler,this.constructor)},n.all=s,n.race=v,n._traverse=l,n._visitRemaining=d,w.prototype.when=w.prototype.become=w.prototype.notify=w.prototype.fail=w.prototype._unreport=w.prototype._report=W,w.prototype._state=0,w.prototype.state=function(){return this._state},w.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},w.prototype.chain=function(t,e,n,r,i){this.when({resolver:t,receiver:e,fulfilled:n,rejected:r,progress:i})},w.prototype.visit=function(t,e,n,r){this.chain(J,t,e,n,r)},w.prototype.fold=function(t,e,n,r){this.when(new O(t,e,n,r))},B(w,_),_.prototype.become=function(t){t.fail()};var J=new _;B(w,x),x.prototype._state=0,x.prototype.resolve=function(t){this.become(m(t))},x.prototype.reject=function(t){this.resolved||this.become(new T(t))},x.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=j();return t},x.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},x.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&$.enqueue(this),void 0!==this.context&&t._report(this.context))},x.prototype.when=function(t){this.resolved?$.enqueue(new P(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},x.prototype.notify=function(t){this.resolved||$.enqueue(new R(t,this))},x.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},x.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},x.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},B(w,k),k.prototype.when=function(t){$.enqueue(new P(t,this))},k.prototype._report=function(t){this.join()._report(t)},k.prototype._unreport=function(){this.join()._unreport()},B(x,E),B(w,M),M.prototype._state=1,M.prototype.fold=function(t,e,n,r){z(t,e,this,n,r)},M.prototype.when=function(t){I(t.fulfilled,this,t.receiver,t.resolver)};var Q=0;B(w,T),T.prototype._state=-1,T.prototype.fold=function(t,e,n,r){r.become(this)},T.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),I(t.rejected,this,t.receiver,t.resolver)},T.prototype._report=function(t){$.afterQueue(new S(this,t))},T.prototype._unreport=function(){this.handled||(this.handled=!0,$.afterQueue(new A(this)))},T.prototype.fail=function(t){this.reported=!0,Y("unhandledRejection",this),n.onFatalRejection(this,void 0===t?this.context:t)},S.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,Y("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},A.prototype.run=function(){this.rejection.reported&&(Y("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=W;var Z=new w,tt=new n(w,Z);return P.prototype.run=function(){this.handler.join().when(this.continuation)},R.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],q(e.progress,this.value,this.handler,e.receiver,e.resolver)},N.prototype.run=function(){function t(t){r.resolve(t)}function e(t){r.reject(t)}function n(t){r.notify(t)}var r=this.resolver;C(this._then,this.thenable,t,e,n)},O.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},O.prototype.rejected=function(t){this.to.reject(t)},O.prototype.progress=function(t){this.to.notify(t)},n}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})}).call(this,t("_process"))},{_process:18}],37:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(){return{state:"pending"}}function e(t){return{state:"rejected",reason:t}}function n(t){return{state:"fulfilled",value:t}}function r(r){var i=r.state();return 0===i?t():i>0?n(r.value):e(r.value)}return{pending:t,fulfilled:n,rejected:e,inspect:r}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],38:[function(t,e,n){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function e(t,e,n,r){var i=k.resolve(t);return arguments.length<2?i:i.then(e,n,r)}function n(t){return new k(t)}function r(t){return function(){for(var e=0,n=arguments.length,r=new Array(n);e<n;++e)r[e]=arguments[e];return E(t,this,r)}}function i(t){for(var e=0,n=arguments.length-1,r=new Array(n);e<n;++e)r[e]=arguments[e+1];return E(t,this,r)}function o(){return new a}function a(){function t(t){r._handler.resolve(t)}function e(t){r._handler.reject(t)}function n(t){r._handler.notify(t)}var r=k._defer();this.promise=r,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}function u(t){return t&&"function"==typeof t.then}function c(){return k.all(arguments)}function s(t){return e(t,k.all)}function l(t){return e(t,k.settle)}function f(t,n){return e(t,function(t){return k.map(t,n)})}function h(t,n){return e(t,function(t){return k.filter(t,n)})}var d=t("./lib/decorators/timed"),p=t("./lib/decorators/array"),v=t("./lib/decorators/flow"),g=t("./lib/decorators/fold"),m=t("./lib/decorators/inspect"),y=t("./lib/decorators/iterate"),b=t("./lib/decorators/progress"),w=t("./lib/decorators/with"),_=t("./lib/decorators/unhandledRejection"),x=t("./lib/TimeoutError"),k=[p,v,g,y,b,m,w,d,_].reduce(function(t,e){return e(t)},t("./lib/Promise")),E=t("./lib/apply")(k);return e.promise=n,e.resolve=k.resolve,e.reject=k.reject,e.lift=r,e.try=i,e.attempt=i,e.iterate=k.iterate,e.unfold=k.unfold,e.join=c,e.all=s,e.settle=l,e.any=r(k.any),e.some=r(k.some),e.race=r(k.race),e.map=f,e.filter=h,e.reduce=r(k.reduce),e.reduceRight=r(k.reduceRight),e.isPromiseLike=u,e.Promise=k,e.defer=o,e.TimeoutError=x,e})}("function"==typeof define&&define.amd?define:function(n){e.exports=n(t)})},{"./lib/Promise":21,"./lib/TimeoutError":23,"./lib/apply":24,"./lib/decorators/array":25,"./lib/decorators/flow":26,"./lib/decorators/fold":27,"./lib/decorators/inspect":28,"./lib/decorators/iterate":29,"./lib/decorators/progress":30,"./lib/decorators/timed":31,"./lib/decorators/unhandledRejection":32,"./lib/decorators/with":33}],39:[function(t,e,n){"use strict";e.exports=function(){var e=t("./d3"),n=[/dailymail/i,/tamilinstanews/i,/xtremeweatherforecast/i,/oracle77.asuscomm/i];return{contains:function(t){var e=t.split("/")[2]||"";return n.some(function(t){return t.test(e)})},deny:function(){return e.select("body").attr("style","font-size: 12em; color: red;").text("XX - contact @cambecc").selectAll("*").remove()}}}()},{"./d3":42}],40:[function(t,e,n){"use strict";var r=t("underscore"),i=t("../micro");e.exports={makeStrokeRenderer:function(t,e){return{renderTo:function(n,i){r.extend(n,e),n.beginPath(),i(t),n.stroke()}}},makeLayerRenderer:function(t){return{renderTo:function(e,n){i.clearContext(e),n.context(e),e.lineJoin="bevel",t.forEach(function(t){return t.renderTo(e,n)})}}}}},{"../micro":57,underscore:20}],41:[function(t,e,n){"use strict";function r(){return Date.now()+u.skew}function i(){return u.fixed}function o(t){var e=a.defer(),n=new XMLHttpRequest,r=Date.now();return n.onload=function(){var t=Date.now(),n=new Date(this.getResponseHeader("Date")).getTime()||NaN,i=n,o=t-r-(n-i),a=(i-r+(n-t))/2,u=Math.abs(a)>Math.max(1e4,10*o)?a:0;e.resolve({skew:u,"δ":o,"θ":a})},n.onerror=function(t){e.reject(t)},n.open("HEAD",t),n.setRequestHeader("Cache-Control","no-cache"),n.send(),e.promise}var a=t("when"),u={skew:0},c=a.resolve(u),s=e.exports={now:function(){return r()},calibration:function(t){if(void 0===t)return u;if("string"==typeof t.server)c=o(t.server).then(function(t){return s.now=r,u=t});else{var e=+new Date(t.fixed);e===e?(s.now=i,c=a.resolve(u={fixed:e})):(s.now=r,c=a.resolve(u={skew:+t.skew||0}))}return this},calibrated:function(){return c}}},{when:38}],42:[function(t,e,n){/*
 * @license
 *
 * Copyright 2010-2016 Mike Bostock
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * * Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific prior
 *   written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-collection");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})});var i=t("d3-dispatch");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("d3-drag");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("d3-ease");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})});var u=t("d3-geo");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}})});var c=t("d3-geo-projection");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return c[t]}})});var s=t("d3-interpolate");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})});var l=t("d3-request");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return l[t]}})});var f=t("d3-selection");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return f[t]}})});var h=t("d3-zoom");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return h[t]}})})},{"d3-collection":4,"d3-dispatch":6,"d3-drag":7,"d3-ease":9,"d3-geo":11,"d3-geo-projection":10,"d3-interpolate":12,"d3-request":13,"d3-selection":14,"d3-zoom":17}],43:[function(t,e,n){"use strict";!function(){var t=e.exports={};t.decodeUTF8=function(t){for(var e=[],n=0;n<t.length;){var r=t[n++];switch(r>>4){case 12:case 13:r=(31&r)<<6|63&t[n++];break;case 14:r=(15&r)<<12|(63&t[n++])<<6|63&t[n++]}e.push(r)}return String.fromCharCode.apply(null,e)},t.varpackDecode=function(t,e){for(var n=0,r=0;n<e.length;){var i=e[n++];if(i<128)i=i<<25>>25;else switch(i>>4){case 8:case 9:case 10:case 11:i=i<<26>>18|e[n++];break;case 12:case 13:i=i<<27>>11|e[n++]<<8|e[n++];break;case 14:i=i<<28>>4|e[n++]<<16|e[n++]<<8|e[n++];break;case 15:if(255===i){for(var o=1+e[n++];o>0;o--)t[r++]=NaN;continue}i=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++]}t[r++]=i}return t},t.undeltaPlane=function(t,e,n,r){var i,o,a,u,c,s,l;for(a=0;a<r;a++){for(s=a*e*n,i=1;i<e;i++)u=s+i,l=t[u-1],t[u]+=l===l?l:0;for(o=1;o<n;o++)for(c=s+o*e,l=t[c-e],t[c]+=l===l?l:0,i=1;i<e;i++){u=c+i;var f=t[u-1],h=t[u-e],d=t[u-e-1];l=f+h-d,t[u]+=l===l?l:f===f?f:h===h?h:d===d?d:0}}return t},t.dequantize=function(t,e){for(var n=Math.pow(10,e),r=0;r<t.length;r++){var i=t[r];t[r]=i===i?i/n:7e37}return t},t.decodePpak=function(e,n,r,i,o){var a=new Float32Array(n*r*i);return t.varpackDecode(a,e),t.undeltaPlane(a,n,r,i),t.dequantize(a,o),a},t.decodePpakBlock=function(e,n,r){var i=new DataView(e,n,r);return t.decodePpak(new Uint8Array(e,n+16,r-16),i.getInt32(0),i.getInt32(4),i.getInt32(8),i.getFloat32(12))},t.decodeEpak=function(e,n){var r=!!(n||{}).headerOnly,i=0,o=new DataView(e),a=t.decodeUTF8(new Uint8Array(e,i,4));if(i+=4,"head"!==a)throw new Error("expected 'head' but found '"+a+"'");var u=o.getInt32(i);i+=4;var c=JSON.parse(t.decodeUTF8(new Uint8Array(e,i,u)));i+=u;for(var s,l,f=[];"tail"!==(l=t.decodeUTF8(new Uint8Array(e,i,4)))&&!r;){switch(i+=4,u=o.getInt32(i),i+=4,l){case"ppak":s=t.decodePpakBlock(e,i,u);break;default:throw new Error("unknown block type: "+l)}f.push(s),i+=u}return{header:c,blocks:f}}}()},{}],44:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.exports=function e(n){function i(t){return X.newAgent(t).on({reject:vt.error,fail:vt.error})}function o(){function t(t,e){return{type:"click",startMouse:t,startScale:e,manipulator:c.manipulator(t,e)}}function e(){s=s||t(D.mouse(this),c.projection.scale())}function n(){var e=D.event.transform||{},n=D.mouse(this),r=X.coalesce(e.k,c.projection.scale());if(s=s||t(n,1),"click"===s.type){var i=X.distance(n,s.startMouse);if(r===s.startScale&&(i<nt||isNaN(i)))return;v.trigger("moveStart"),s.type="drag"}(r!==s.startScale||isNaN(n[0]))&&(s.type="zoom"),s.manipulator.move("zoom"===s.type?null:n,r),v.trigger("move")}function r(){null!==s&&(s.manipulator.end(),"click"===s.type?(Date.now()-l.time>500||X.distance(l.mouse,s.startMouse)>=nt)&&(v.trigger("click",s.startMouse,c.projection.invert(s.startMouse)||[]),l={time:Date.now(),mouse:s.startMouse}):i(),s=null)}function i(){f&&clearTimeout(f),f=setTimeout(function(){f=null,(!s||"drag"!==s.type&&"zoom"!==s.type)&&(gt.save({orientation:c.orientation()},{source:"moveEnd"}),v.trigger("moveEnd"))},rt)}function o(){var t=arguments[2]||{};c&&"moveEnd"!==t.source&&(v.trigger("moveStart"),c.orientation(gt.get("orientation"),pt),h.transform(p,D.zoomIdentity.scale(c.projection.scale())),v.trigger("moveEnd"))}function a(t,e){if("zoom"===t)return h.scaleBy(p,e);f||v.trigger("moveStart");var n=c.projection,r=n.rotate(),o=e/8;switch(t){case"left":n.rotate([r[0]+o,r[1]]);break;case"right":n.rotate([r[0]-o,r[1]]);break;case"up":n.rotate([r[0],r[1]-o]);break;case"down":n.rotate([r[0],r[1]+o])}v.trigger("move"),i()}var c,s=null,l={time:0,mouse:[0,0]},f=null,h=D.zoom().on("start",e).on("zoom",n).on("end",r),d=D.drag().on("start",e).on("drag",n).on("end",r),p=D.select("#display");X.isFixedMode()?p.on("click",function(){e.call(this),r.call(this)}):X.isEmbeddedInIFrame()&&!X.isKioskMode()?p.call(d):p.call(h).on("wheel",function(){return D.event.preventDefault()}),D.select("#show-location").on("click",function(){navigator.geolocation&&(vt.status("Finding current position..."),navigator.geolocation.getCurrentPosition(function(t){vt.status(""),u(t.coords.longitude,t.coords.latitude)},vt.error))});var v=H.extend({globe:function(t){return t&&(c=t,h.scaleExtent(c.scaleExtent()),o()),t?this:c},cancelMove:function(){r()},hotkey:a},B.Events);return v.listenTo(gt,"change:orientation",o)}function a(t){var e=bt.value();if(e){var n=e.locate(t);n&&(e.projection.rotate(n),gt.save({orientation:e.orientation()}))}}function u(t,e){var n=+t,r=+e,i=[n,r];return n!==n||r!==r?void R():(P(null,i),void a(i))}function c(t){var e=this.cancel;vt.status("Downloading...");var n=[];return n.push(X.loadJson(t)),"tara"===X.siteInstance()&&(n.push(X.loadJson($.gaia("/data/tara/tara-plan-20170829.json"))),n.push(X.loadJson($.gaia("/data/tara/tara-track.json")))),G.all(n).spread(function(t,n,r){if(e.requested)return null;J.time("building meshes");var i=t.objects,o=U.feature(t,X.isMobile()?i.coastline_tiny:i.coastline_110m),a=U.feature(t,X.isMobile()?i.coastline_110m:i.coastline_50m),u=U.feature(t,X.isMobile()?i.lakes_tiny:i.lakes_110m),c=U.feature(t,X.isMobile()?i.lakes_110m:i.lakes_50m),s=U.feature(t,X.isMobile()?i.rivers_tiny:i.rivers_110m),l=U.feature(t,X.isMobile()?i.rivers_110m:i.rivers_50m);return J.timeEnd("building meshes"),{coastLo:o,coastHi:a,lakesLo:u,lakesHi:c,riversLo:s,riversHi:l,tara:{plan:n,track:r}}})}function s(t){var e=V[t];return e?e(pt):G.reject("Unknown projection: "+t)}function l(t){vt.status("Downloading..."),J.time("build grids");var e=this.cancel;return At++,G.all($.productsFor(gt.attributes)).then(function(n){var r=G.map(n,function(t){return t.load(e)});return G.all(r).then(function(e){return{primaryGrid:e[0],overlayGrid:e[1]||e[0],isNewPrimaryGrid:!!t}}).otherwise(function(e){return vt.error(e),{primaryGrid:n[1]||n[0],overlayGrid:n[1]||n[0],isNewPrimaryGrid:!!t}})}).ensure(function(){At--,J.timeEnd("build grids")})}function f(t){if(At>0)return void J.debug("Download in progress--ignoring nav request.");var e=wt.value().overlayGrid.navigate(t);e&&gt.save(X.dateToConfig(e))}function h(t,e,n){var r=t.append("g"),i={type:"LineString",coordinates:e.plan.coordinates.filter(function(t,e){return e>182})};r.append("path").attr("class","tara-route tara-plan").datum(i);var o=e.track.geometries;o=o.filter(function(t,e){return e>o.length-10||e%3===0});var u={type:"LineString",coordinates:H.pluck(o,"coordinates")};r.append("path").attr("class","tara-route tara-track-border").datum(u),r.append("path").attr("class","tara-route tara-track").datum(u);var c={type:"Point",coordinates:H.last(u.coordinates),size:4};""!==n&&",,"!==n.substr(0,2)||a(c.coordinates),r.append("path").attr("class","tara-loc").datum(c);var s=H.last(o),l={date:s.date,heading:+X.coalesce(s.heading,NaN),speed:3.6*+X.coalesce(s.speed,NaN),air_temp:+X.coalesce(s.air_temp,NaN),water_temp:+X.coalesce(s.water_temp,NaN),pressure:+X.coalesce(s.pressure,NaN)},f={date:W.print(W.localParts(l.date),"{yyyy}-{MM}-{dd} {hh}:{mm}"),heading:isNaN(l.heading)?"N/A":l.heading.toFixed(0),speed:isNaN(l.speed)?"N/A":l.speed.toFixed(1),air_temp:isNaN(l.air_temp)?"N/A":l.air_temp.toFixed(1),water_temp:isNaN(l.water_temp)?"N/A":l.water_temp.toFixed(1),pressure:isNaN(l.pressure)?"N/A":l.pressure.toFixed(0)},h=D.select("#tara-stats");h.selectAll("*").remove(),h.append("p").text("Tara stats:"),h.append("p").classed("stat",!0).text(f.heading+"° @ "+f.speed+" km/h"),h.append("p").classed("stat",!0).text(f.air_temp+" °C (air)"),h.append("p").classed("stat",!0).text(f.water_temp+" °C (water)"),h.append("p").classed("stat",!0).text(f.pressure+" hPa"),h.append("p").text(f.date),h.selectAll(".stat").attr("style","padding-left: 1em"),h.classed("invisible",!1)}function d(t,e){function n(t){var e=t?k:x;e.renderTo(o,s),E.renderTo(a,s),s.context(null)}function r(){u.selectAll("path").attr("d",s),n(!1),_t.trigger("redraw"),f=H.throttle(r,l,{leading:!1})}if(!t||!e)return null;vt.status("Rendering Globe..."),J.time("rendering map");var i=H.clone(B.Events);_t._previous&&_t._previous.stopListening(),_t._previous=i;var o=D.select("#map").node().getContext("2d"),a=D.select("#foreground").node().getContext("2d"),u=D.select("#annotation"),c=gt.get("orientation");X.removeChildren(u.node()),e.orientation(c,pt);var s=D.geoPath().projection(e.projection).pointRadius(function(t){return t.size||7});"tara"===X.siteInstance()&&h(u,t.tara,c),j();var l=5,f=H.throttle(r,l,{leading:!1}),d=1.25,p=e.backgroundRenderer(),v=e.graticuleRenderer(),g=K.makeStrokeRenderer(t.coastLo,{strokeStyle:"#ffffff",lineWidth:d}),m=K.makeStrokeRenderer(t.lakesLo,{strokeStyle:"#ffffff",lineWidth:d}),y=K.makeStrokeRenderer(t.riversLo,{strokeStyle:"#808080",lineWidth:d}),b=K.makeStrokeRenderer(t.coastHi,{strokeStyle:"#ffffff",lineWidth:d}),w=K.makeStrokeRenderer(t.lakesHi,{strokeStyle:"#ffffff",lineWidth:d}),_=K.makeStrokeRenderer(t.riversHi,{strokeStyle:"#808080",lineWidth:d}),x=K.makeLayerRenderer([p,v,g,m,y]),k=K.makeLayerRenderer([p,v,b,w,_]),E=K.makeLayerRenderer([e.foregroundRenderer()]);return i.listenTo(mt,{moveStart:function(){_t.trigger("start"),G(!0).then(function(){return _t.submit("moving")})},move:function(){f()},moveEnd:function(){u.selectAll("path").attr("d",s),n(!0),_t.trigger("render"),G(!0).then(function(){return _t.submit("ready")})}}),G(!0).then(function(){mt.globe(e)}).otherwise(vt.error),J.timeEnd("rendering map"),"ready"}function p(t,e){if(H.isFunction(t.set))t.set(e);else for(var n=0;n<e.length;n++)t[n]=e[n]}function v(t){if(!t)return null;J.time("render mask");var e=pt.width,n=pt.height,r=D.select(document.createElement("canvas")).attr("width",e).attr("height",n).node(),i=t.defineMask(r.getContext("2d"));i.fillStyle="rgba(255, 0, 0, 1)",i.fill();var o=i.createImageData(e,n),a=o.data;return p(a,i.getImageData(0,0,e,n).data),J.timeEnd("render mask"),{imageData:o,isVisible:function(t,n){var r=4*(n*e+t);return a[r+3]>0},set:function(t,n,r){var i=4*(n*e+t);return a[i]=r[0],a[i+1]=r[1],a[i+2]=r[2],a[i+3]=r[3],this}}}function g(t,e,n){var r=n.x,i={};return i.move=function(e,n,i,o){var a=Math.round(n);if(0<=a&&a<t.length){var u=t[a],c=3*(Math.round(e)-r);if(u&&0<=c&&c<u.length)return i[o]=e,i[o+1]=n,i[o+2]=u[c],i[o+3]=u[c+1],void(i[o+4]=u[c+2])}i[o]=e,i[o+1]=n,i[o+2]=7e37,i[o+3]=7e37,i[o+4]=7e37},i.isDefined=function(e,n){var i=Math.round(n);if(0<=i&&i<t.length){var o=t[i],a=3*(Math.round(e)-r);if(o&&0<=a&&a<o.length)return o[a]<7e37}return!1},i.isInsideBoundary=function(t,e){var n=new Float32Array(5);return i.move(t,e,n,0),n[4]<7e37},i.overlay=e.imageData,i}function m(t,e,n,r,i,o,a){var u=a[0]*o,c=a[1]*o,s=X.distortion(t,e,n,r,i);return a[0]=s[0]*u+s[2]*c,a[1]=s[1]*u+s[3]*c,a}function y(t,e){function n(t){for(var e=t===y.yMax,n=new Float32Array(3*y.width),r=y.x,a=0;r<=y.xMax;r+=T,a+=3*T){var c=r===y.xMax,f=ft;if(o.isVisible(r,t)){_[0]=r,_[1]=t;var h=p(_),v=dt;if(h){var g=h[0],x=h[1];if(g===g){f=s(h);var S=f[2];S<7e37?(f=m(d,g,x,r,t,b,f),S=f[2]):f=ht,i||(k&&(S=X.scalarize(l(h))),S<7e37&&(v=E.rgba(S),v[3]=u.alpha.animated))}}o.set(r,t,v),M||(c||(o.set(r+1,t,v),e||o.set(r+1,t+1,v)),e||o.set(r,t+1,v))}n[a]=f[0],n[a+1]=f[1],n[a+2]=f[2],M||c||(n[a+3]=f[0],n[a+4]=f[1],n[a+5]=f[2])}w[t]=n,M||(w[t+1]=n)}if(!t||!e||!_t.value())return null;var r=kt.value(),i=r&&r.draw("interp"),o=v(t),a=e.primaryGrid,u=e.overlayGrid;if(!a.field||!u.field)return null;var c="bilinear",s=a.field()[c],l=u.field()[c];J.time("interpolating field");var f=G.defer(),h=this.cancel,d=t.optimizedProjection(),p=d.invert.bind(d),y=t.bounds(pt),b=a.particles.velocityScale,w=[],_=[],x=y.y,k=a!==u,E=u.scale,M=gt.get("hd"),T=M?1:2;return vt.status(""),vt.progress(0),function t(){try{if(!h.requested)for(var e=Date.now();x<=y.yMax;)if(n(x),x+=T,Date.now()-e>tt)return vt.progress(Math.round((x-y.y)/(y.yMax-y.y)*100)),void setTimeout(t,et);f.resolve(g(w,o,y))}catch(t){f.reject(t)}vt.progress(100),J.timeEnd("interpolating field")}(),f.promise}function b(t,e,n){function r(t){var n=b+Math.random()*_,r=w+Math.random()*x;e.move(n,r,v,t)}function i(t){for(var e=0;e<10;e++)if(r(t),v[t+2]<7e37)return}function o(){for(var t=600/k*Math.pow(Math.log(k)/Math.log(600),2.5),n=0;n<y.length;n++)y[n]=0;for(var i=0,o=0;i<h;i+=1,o+=5){++g[i]>=d&&(g[i]=0,r(o));var a=v[o],u=v[o+1],c=v[o+2],s=v[o+3],l=a+c*t,p=u+s*t,b=v[o+4];if(b===b&&e.isDefined(l,p)){v[o]=l,v[o+1]=p;var w=Math.sqrt(c*c+s*s)/2.5;c/=w,s/=w;var _=f.indexFor(b*S[g[i]]),x=4*y[_]++,E=m[_];E[x]=a-s,E[x+1]=u+c,E[x+2]=a+s,E[x+3]=u-c}else g[i]=d}}function a(){for(var t=0;t<y.length;t++)y[t]=0;for(var n=0,i=0;n<h;n+=1,i+=5){++g[n]>=d&&(g[n]=0,r(i));var o=v[i],a=v[i+1],u=o+v[i+2],c=a+v[i+3],s=v[i+4];if(u<7e37){e.move(u,c,v,i);var l=v[i+2];if(l<7e37){var p=f.indexFor(s),b=4*y[p]++,w=m[p];w[b]=o,w[b+1]=a,w[b+2]=u,w[b+3]=c}else g[n]=d}else g[n]=d}}function u(){E.globalCompositeOperation="destination-in",E.fillRect(l.x,l.y,l.width,l.height),E.globalCompositeOperation="source-over";for(var t=0;t<m.length;t++){var e=m[t],n=4*y[t];if(n>0){E.beginPath(),E.strokeStyle=f[t];for(var r=0;r<n;r+=4)E.moveTo(e[r],e[r+1]),E.lineTo(e[r+2],e[r+3]);E.stroke()}}}function c(){return!s.requested&&(p(),u(),setTimeout(c,ct),!0)}if(!(t&&e&&n&&gt.get("animate")))return!1;n.isNewPrimaryGrid&&X.clearCanvas(D.select("#animation").node());var s=this.cancel,l=t.bounds(pt),f=X.windIntensityColorScale(it,n.primaryGrid.particles.maxIntensity),h=Math.round(l.width*at);X.isMobile()&&(h=Math.floor(h*ut)),J.debug("particle count: %s",h);var d,p,v=new Float32Array(5*h),g=new Int32Array(h),m=f.map(function(){return new Float32Array(4*h)}),y=new Int32Array(m.length),b=l.x,w=l.y,_=l.width,x=l.height,k=t.projection.scale(),E=D.select("#animation").node().getContext("2d");n.primaryGrid.particles.waves?(d=40,p=o,E.fillStyle="rgba(0, 0, 0, 0.90)"):(d=100,p=a,E.fillStyle=X.isFF()?"rgba(0, 0, 0, 0.95)":"rgba(0, 0, 0, 0.97)"),E.lineWidth=ot;for(var M=0,T=0;M<h;M+=1,T+=5)g[M]=H.random(0,d),i(T);for(var S=new Float32Array(d),A=0;A<S.length;A++)S[A]=Math.sin(-Z/2+A/7)/2+.5;return c()}function w(t,e,n){if(e&&n&&gt.get("showGridPoints")){t.fillStyle="rgba(255, 255, 255, 0.75)";var r=pt.width,i=pt.height,o=n.projection.stream({point:function(e,n){0<=e&&e<r&&0<=n&&n<i&&t.fillRect(Math.round(e),Math.round(n),1,1)}}),a=this.cancel,u=e.grid(),c=e.field(),s=c.valueAt,l=0;!function t(){if(!a.requested){var e=Date.now()+tt/4;l=u.forEach(function(t,n,r){var i=X.scalarize(s(r));return i<7e37&&(t=X.floorMod(180+t,360)-180,o.point(t,n)),Date.now()>e},l),l===l&&setTimeout(t,et)}}()}}function _(t,e){for(var n=3;n<t.length;n+=4)0!==t[n]&&(t[n]=e)}function x(t,e,n){if(t&&_t.value()){var r=D.select("#overlay").node().getContext("2d"),i=(wt.value()||{}).overlayGrid;X.clearContext(r),X.clearCanvas(D.select("#scale").node()),e&&("off"!==e&&(n||_(t.overlay.data,i.alpha.single),r.putImageData(t.overlay,0,0)),Tt.submit(w,r,i,bt.value())),i&&!function(){for(var t=D.select("#scale"),e=t.node(),n=e.getContext("2d"),r=e.width-1,o=i.scale,a=o.colors,u=a.length/4-1,c=0;c<e.width;c++){var s=4*Math.round(c/r*u);n.fillStyle="rgb("+a[s]+","+a[s+1]+","+a[s+2]+")",n.fillRect(c,0,1,e.height)}t.on("mousemove",function(){var e=Math.floor(D.mouse(this)[0]);if(e<0||r<e)return t.attr("title",null);var n=Math.round(e/r*u),a=o.valueFor(n),c="wind"===i.type?"#location-wind-units":"#location-value-units",s=T(c,i).value();t.attr("title",X.formatScalar(a,s)+" "+(s.tooltip||s.label))})}()}}function k(t){if(t)return t.overlayGrid.date();var e=gt.get("date");return"current"===e?null:H.clone(e)}function E(t){var e=k(t),n=D.select("#data-date").classed("local"),r="";return e&&(r=W.print((n?W.localParts:W.parts)(W.date(e)),"{yyyy}-{MM}-{dd} {hh}:{mm}")),D.select("#data-date").text(r+" "+(n?"Local":"UTC")),D.select("#toggle-zone").text("⇄ "+(n?"UTC":"Local")),e}function M(t){var e=E(t),n="",r="";if(t){var i=X.siteLangCode(),o=t.primaryGrid.descriptionHTML(i),a=t.overlayGrid.descriptionHTML(i);n=a.name+a.qualifier,t.primaryGrid!==t.overlayGrid&&(n=(o.qualifier===a.qualifier?o.name:o.name+o.qualifier)+" + "+n),r=t.overlayGrid.sourceHTML||""}D.select("#data-layer").html(n),D.select("#data-center").html(r),Q.productChange&&Q.productChange(W.date(e).getTime(),n,r)}function T(t,e){function n(){return JSON.parse(D.select(t).attr("data-index")||"{}")}function r(t){return+t[o]||0}var i=e.units,o=e.type,a=i.length;return{value:function(){return i[r(n())]},next:function(){var e=n();e[o]=(r(e)+1)%a,D.select(t).attr("data-index",JSON.stringify(e))}}}function S(t,e){var n=T("#location-wind-units",e),r=n.value();D.select("#location-wind").text(X.formatVector(t,r)),D.select("#location-wind-units").html(r.label).on("click",function(){n.next(),S(t,e)})}function A(t,e){var n=T("#location-value-units",e),r=n.value();D.select("#location-value").text(X.formatScalar(t,r)),D.select("#location-value-units").html(r.label).on("click",function(){n.next(),A(t,e)})}function j(){D.selectAll(".location").text(""),D.select("#location-close").classed("invisible",!0);var t=gt.get("loc")||[],e=+t[0],n=+t[1];if(e!==e||n!==n)return D.select(".location-mark").remove(),void(Q.showLocationDetails&&Q.showLocationDetails("","{}"));var r=wt.value(),i=xt.value(),o=bt.value();if(r&&i&&o){var a,u=r.primaryGrid,c=r.overlayGrid,s={};D.select("#location-coord").text(a=X.formatCoordinates(e,n)),D.select("#location-close").classed("invisible",!1);var l=u.interpolate([e,n]);l[0]<7e37&&(S(l,u),s[u.type]=H.object(u.units.map(function(t){return[t.label,X.formatVector(l,t)]})));var f=c!==u?X.scalarize(c.interpolate([e,n])):7e37;f<7e37&&(A(f,c),s[c.type]=H.object(c.units.map(function(t){return[t.label,X.formatScalar(f,t)]})));var h=D.geoPath().projection(o.projection).pointRadius(7),d=D.select(".location-mark");d.node()||(d=D.select("#annotation").append("path").attr("class","location-mark")),d.datum({type:"Point",coordinates:[e,n]}).attr("d",h),Q.showLocationDetails&&Q.showLocationDetails(a,JSON.stringify(s))}}function P(t,e){var n=+e[0],r=+e[1],i=xt.value();t&&i&&!i.isInsideBoundary(t[0],t[1])||n===n&&r===r&&gt.save({loc:[n,r]})}function R(){gt.save({loc:null})}function N(t){Et.value()&&Et.submit(!1),t&&X.clearCanvas(D.select("#animation").node())}function C(t,e){gt.on("change",function(n){var r=n.attributes,i=!1;e.forEach(function(t){i|=H.isEqual(H.pick(r,H.keys(t)),t)}),D.select(t).classed("highlighted",i)})}function O(t,e,n){n=n||[e],D.select(t).on("click",function(){D.select(t).classed("disabled")||gt.save(e)}),C(t,n)}function F(t){H.isFunction(window.ga)&&window.ga("send","event","sponsor",t)}function L(){var t=window.devicePixelRatio||1;D.selectAll(".fill-screen").attr("width",pt.width).attr("height",pt.height),D.selectAll(".max-screen").style("width",pt.width+"px").style("height",pt.height+"px").attr("width",pt.width*t).attr("height",pt.height*t).each(function(){this.getContext("2d").scale(t,t)})}function I(){function n(){D.selectAll("a[lang]").attr("href",function(){var t=D.select(this),e=t.attr("data-link");return e?e+window.location.hash:t.attr("href")})}function r(){_t.submit(d,yt.value(),bt.value())}function i(){xt.submit(y,bt.value(),wt.value())}function o(){xt.cancel(),Tt.cancel()}function a(){var e=Date.now(),n=t("./gl/glCheck"),r=n.pass?"ok":JSON.stringify(n);if(J.debug("check gl ("+(Date.now()-e)+"ms): "+r),H.isFunction(window.ga)&&window.ga("send","event","gl",r),n.pass){var i=D.select("#fastoverlay").node(),o=t("./gl/fastoverlay")(i,gt,bt,wt,_t,Et);kt.submit(o)}}function u(){var t=gt.attributes,e=t.surface+"-"+t.level;return"wind"===t.param?H.indexOf(g,e):-1}function h(){return D.select("#settings-wrap").classed("invisible")?D.select("#location-close").classed("invisible")?D.select("#menu").classed("invisible")?D.select("#notice").classed("invisible")?D.select("#sponsor").classed("invisible")?void 0:(e.click("sponsor-hide"),!0):(e.click("notice-hide"),!0):(e.click("show-menu"),!0):(e.click("location-close"),!0):(e.click("settings-hide"),!0)}vt.status("Initializing..."),D.select("#sponsor-link").attr("target",X.isEmbeddedInIFrame()&&"tara"!==X.siteInstance()?"_new":null).on("click",H.partial(F,"click")).on("contextmenu",H.partial(F,"right-click")),D.select("#sponsor-hide").on("click",function(){D.select("#sponsor").classed("invisible",!0)}),D.select("#notice-hide").on("click",function(){D.select("#notice").classed("invisible",!0)}),D.select("#settings-show").select(".text-button").on("click",function(){D.select("#settings-wrap").classed("invisible",!1),D.select("#menu").classed("invisible")||e.click("show-menu")}),D.select("#settings-hide").on("click",function(){D.select("#settings-wrap").classed("invisible",!0)}),!function(){var e=t("./lang"),n=D.select("html").attr("lang");D.select("#settings").selectAll("a[lang='"+n+"']").classed("highlighted",!0);var r=e.best(window.navigator);r!==n&&D.select("#settings-show").select("a[lang='"+r+"']").classed("invisible",!1)}(),L();var p=D.select("#scale-label").node();D.select("#scale").attr("width",Math.round(.95*(D.select("#menu").node().offsetWidth-p.offsetWidth))).attr("height",Math.round(p.offsetHeight/2)),D.select("#show-menu").on("click",function(){if(X.isEmbeddedInIFrame()&&!X.isKioskMode()&&"tara"!==X.siteInstance())window.open("https://earth.nullschool.net/"+window.location.hash,"_blank");else{var t=D.select("#menu").classed("invisible");D.select("#menu").classed("invisible",!t),t&&H.isFunction(window.ga)&&window.ga("send","event","menu","open")}}),"ontouchstart"in document.documentElement?D.select(document).on("touchstart",function(){}):D.select(document.documentElement).classed("no-touch",!0),n(),D.select(window).on("hashchange",function(){J.debug("hashchange"),n(),gt.fetch({trigger:"hashchange"})}),gt.on("change",function(){vt.reset(),St.submit(function(){var t=[],e=[];D.selectAll(".highlighted").each(function(){t.push(this.id)}),D.selectAll(".disabled").each(function(){e.push(this.id)}),Q.buttonStateChange&&Q.buttonStateChange(JSON.stringify(t),JSON.stringify(e))})});var v=!0;gt.on("change",function(t){if(!H.isFunction(window.ga)||v)return v=!1;var e=t.changedAttributes(),n=H.clone(t.attributes);H.has(e,"projection")&&window.ga("send","event","projection",n.projection),H.has(e,"overlayType")&&window.ga("send","event","overlay",n.overlayType),(H.has(e,"param")||H.has(e,"surface")||H.has(e,"level"))&&window.ga("send","event","layer",[n.param,n.surface,n.level].join("-"))}),yt.listenTo(gt,"change:topology",function(t,e){yt.submit(c,e)}),bt.listenTo(gt,"change:projection",function(t,e){bt.submit(s,e)}),wt.listenTo(gt,"change",function(){var t=H.keys(gt.changedAttributes()),e=!1,n=!1;H.intersection(t,["date","param","surface","level","hd"]).length>0&&(e=!0,n=!0);var r=gt.get("overlayType")||"default";if(H.indexOf(t,"overlayType")>=0&&"off"!==r){var i=wt.value()||{},o=i.primaryGrid,a=i.overlayGrid;a?a.type===r||"default"===r&&o===a||(e=!0):e=!0}e&&wt.submit(l,n)}),wt.on("update",function(t){M(t)}),D.select("#toggle-zone").on("click",function(){D.select("#data-date").classed("local",!D.select("#data-date").classed("local")),E(wt.cancel.requested?null:wt.value())}),_t.listenTo(yt,"update",r),_t.listenTo(bt,"update",r),xt.listenTo(wt,"update",i),xt.listenTo(_t,"render",i),xt.listenTo(_t,"start",o),xt.listenTo(_t,"redraw",o),Et.listenTo(xt,"update",function(t){Et.submit(b,bt.value(),t,wt.value())}),Et.listenTo(_t,"start",H.partial(N,!0)),Et.listenTo(wt,"submit",H.partial(N,!1)),Et.listenTo(xt,"submit",H.partial(N,!1)),Mt.listenTo(xt,"update",function(){Mt.submit(x,xt.value(),gt.get("overlayType"),gt.get("animate"))}),Mt.listenTo(_t,"start",function(){X.clearCanvas(D.select("#overlay").node()),Mt.submit(x,xt.value(),null,null)}),Mt.listenTo(gt,"change",function(){var t=H.keys(gt.changedAttributes());H.intersection(t,["overlayType","showGridPoints","animate"]).length>0&&Mt.submit(x,xt.value(),gt.get("overlayType"),gt.get("animate"))}),gt.on("change:animate",function(t,e){e?i():N(!0)}),mt.on("click",P),D.select("#location-close").on("click",R),xt.on("update",j),gt.on("change:loc",j),gt.on("change:param",function(t,e){switch(D.selectAll(".ocean-mode").classed("invisible","ocean"!==e),D.selectAll(".wind-mode").classed("invisible","wind"!==e).selectAll(".text-button").classed("disabled","wind"!==e),D.selectAll(".chem-mode").classed("invisible","chem"!==e),D.selectAll(".particulates-mode").classed("invisible","particulates"!==e),e){case"chem":case"particulates":case"wind":D.select("#nav-backward-more").attr("title","-1 Day"),D.select("#nav-backward").attr("title","-3 Hours"),D.select("#nav-forward").attr("title","+3 Hours"),D.select("#nav-forward-more").attr("title","+1 Day");break;case"ocean":D.select("#nav-backward-more").attr("title","-1 Month"),D.select("#nav-backward").attr("title","-5 Days"),D.select("#nav-forward").attr("title","+5 Days"),D.select("#nav-forward-more").attr("title","+1 Month")}}),D.select("#air-mode").on("click",function(){"wind"!==gt.get("param")&&gt.save({param:"wind",surface:"surface",level:"level",overlayType:"default"})}),gt.on("change:param",function(t,e){D.select("#air-mode").classed("highlighted","wind"===e)}),D.select("#ocean-mode").on("click",function(){if("ocean"!==gt.get("param")){var t={param:"ocean",surface:"primary",level:"waves",overlayType:"significant_wave_height"},e=H.clone(gt.attributes);"current"===e.date?gt.save(t):G.all($.productsFor(H.extend(e,t))).spread(function(e){e.date()&&gt.save(H.extend(t,X.dateToConfig(e.date())))}).otherwise(vt.error)}}),gt.on("change:param",function(t,e){D.select("#ocean-mode").classed("highlighted","ocean"===e)}),D.select("#chem-mode").on("click",function(){"chem"!==gt.get("param")&&gt.save({param:"chem",surface:"surface",level:"level",overlayType:"cosc"})}),gt.on("change:param",function(t,e){D.select("#chem-mode").classed("highlighted","chem"===e)}),D.select("#particulates-mode").on("click",function(){"particulates"!==gt.get("param")&&gt.save({param:"particulates",surface:"surface",level:"level",overlayType:"duexttau"})}),gt.on("change:param",function(t,e){D.select("#particulates-mode").classed("highlighted","particulates"===e)}),gt.on("change:overlayType",function(t,e){D.selectAll(".surface").classed("disabled",function(){return"wind"!==gt.get("param")||("surface-level"===this.getAttribute("id")?"wind_power_density"===e:"misery_index"===e)})}),gt.on("change:surface",function(t,e){D.select("#wind_power_density").classed("disabled","surface"===e)}),D.select("#nav-backward-more").on("click",H.partial(f,-10)),D.select("#nav-forward-more").on("click",H.partial(f,10)),D.select("#nav-backward").on("click",H.partial(f,-1)),D.select("#nav-forward").on("click",H.partial(f,1)),D.select("#nav-now").on("click",function(){gt.save({date:"current"})}),D.select("#option-show-grid").on("click",function(){gt.save({showGridPoints:!gt.get("showGridPoints")})}),gt.on("change:showGridPoints",function(t,e){D.select("#option-show-grid").classed("highlighted",e)}),D.select("#animate-start").on("click",function(){gt.save({animate:!gt.get("animate")})}),gt.on("change:animate",function(t,e){D.select("#animate-start").classed("highlighted",e)}),D.select("#hd").on("click",function(){gt.save({hd:!gt.get("hd")})}),gt.on("change:hd",function(t,e){D.select("#hd").classed("highlighted",e)}),D.selectAll(".surface").each(function(){var t=this.id,e=t.split("-");O("#"+t,{param:"wind",surface:e[0],level:e[1]})}),O("#animate-currents",{param:"ocean",surface:"surface",level:"currents",animate:!0,overlayType:"default"},[{param:"ocean",surface:"surface",level:"currents"}]),O("#animate-waves",{param:"ocean",surface:"primary",level:"waves",animate:!0,overlayType:"default"},[{param:"ocean",surface:"primary",level:"waves"}]),$.overlayTypes().each(function(t){var e={overlayType:t},n=[e];"misery_index"===t?H.extend(e,{surface:"surface",level:"level"}):"currents"===t?n.push({param:"ocean",surface:"surface",level:"currents",overlayType:"default"}):"primary_waves"===t&&n.push({param:"ocean",surface:"primary",level:"waves",overlayType:"default"}),O("#"+t.replace(".",""),e,n)}),O("#wind",{param:"wind",overlayType:"default"}),O("#no-overlay",{overlayType:"off"}),H.keys(V).forEach(function(t){O("#"+t,{projection:t,orientation:""},[{projection:t}])}),D.select(window).on("orientationchange",function(){window.scrollTo(0,0),pt=X.view(),L(),bt.submit(s,gt.get("projection"));var t=kt.value();t&&t.changeDisplaySize(pt)}),X.isKioskMode()?D.selectAll(".kiosk").classed("invisible",!0):setTimeout(function(){D.select("#menu-ham").transition().style("opacity","0").remove()},15e3),a();var g=["surface-level","isobaric-1000hPa","isobaric-850hPa","isobaric-700hPa","isobaric-500hPa","isobaric-250hPa","isobaric-70hPa","isobaric-10hPa"];D.select("body").on("keydown",function(){var t=D.event,e=Y.key(t);if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)){switch(e){case"Escape":if(!h())return;break;default:return}t.preventDefault()}}),D.select("body").on("keypress",function(){var t=D.event,n=Y.key(t);if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey)){switch(n){case"e":e.click("show-menu");break;case"I":e.click(g[g.length-1]);break;case"i":e.click(g[u()+1]);break;case"m":e.click(g[u()-1]);break;case"M":e.click(g[0]);break;case"J":e.click("nav-backward-more");break;case"j":e.click("nav-backward");break;case"k":e.click("nav-forward");break;case"K":e.click("nav-forward-more");break;case"n":e.click("nav-now");break;case"p":e.click("animate-start");break;case"g":e.click("option-show-grid");break;case"H":e.click("hd");break;case"d":mt.hotkey("zoom",1.003);break;case"x":mt.hotkey("zoom",.997);break;case"D":mt.hotkey("zoom",1.05);break;case"X":mt.hotkey("zoom",.95);break;case"w":mt.hotkey("up",1);break;case"W":mt.hotkey("up",8);break;case"z":mt.hotkey("down",1);break;case"Z":mt.hotkey("down",8);break;case"a":mt.hotkey("left",1);break;case"A":mt.hotkey("left",8);break;case"s":mt.hotkey("right",1);break;case"S":mt.hotkey("right",8);break;default:return}t.preventDefault()}})}function z(){gt.fetch()}function q(){return(wt.value()||{}).overlayGrid}var D=t("./d3"),U=t("topojson-client"),G=t("when"),H=t("underscore"),B=t("backbone"),X=t("./micro"),W=t("./utc"),V=t("./globes"),$=t("./products")(n),Y=t("./keyboard"),K=t("./canvas/twod"),J=n.log,Q=n.bridge;
J.debug("start...");var Z=Math.PI,tt=150,et=10,nt=6,rt=750,it=10,ot=1,at=7,ut=.75,ct=40,st="▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫",lt="▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪",ft=[7e37,7e37,7e37],ht=[7e37,7e37,0],dt=[0,0,0,0],pt=X.view(),vt=function(){var t=D.select("#status"),e=D.select("#progress"),n=st.length,r=X.bindup(Q,"showMessage")||function(e){t.text(e)},i=X.bindup(Q,"showProgress")||function(t){if(0<=t&&t<100){var r=Math.ceil(t/100*n),i=lt.substr(0,r)+st.substr(0,n-r);return e.classed("invisible",!1).text(i)}return e.classed("invisible",!0).text("")};return{status:function(e){return t.classed("bad")?t:r(e,!1)},error:function(e,n){var i=e.status?e.status+" "+e.message:e.message||e;switch(e.status){case-1:i="Server Down";break;case 404:i="No Data"}n&&J.error("context",n+""),J.error("error",e),e.stack&&J.error("stack",e.stack),t.classed("bad",!0),r(i,!0)},reset:function(){t.classed("bad",!1),r("",!1)},progress:i}}(),gt=X.buildConfiguration(V,$.overlayTypes()),mt=o(),yt=i("mesh"),bt=i("globe"),wt=i("grid"),_t=i("renderer"),xt=i("field"),kt=i("fastoverlay"),Et=i("animator"),Mt=i("overlay"),Tt=i("overlayGrid"),St=i("button"),At=0;G(!0).then(I).then(z).otherwise(vt.error),H.extend(e,{url:function(){return window.location.href.toString()},scale:{valueAt:function(t){var e=q(),n={};if(e){var r={},i=e.scale.bounds,o=X.spread(t/100,i[0],i[1]);e.units.forEach(function(t){r[t.label]=X.formatScalar(o,t)}),n[e.type]=r}return JSON.stringify(n)},palette:function(){var t=q();return JSON.stringify(t?r({},t.type,X.toArray(t.scale.colors)):{})}},navToDate:function(t){var e=q(),n=new Date(t);return!e||H.isNaN(n.getUTCFullYear())?0:(n=e.navigateTo(W.parts(n)))?(H.defer(function(){gt.save(X.dateToConfig(n))}),W.date(n).getTime()):0},click:function(t){H.defer(function(){var e=D.select("#"+t).node();return null!==e?e.dispatchEvent(X.newClickEvent()):void 0})},locate:function(t,e){H.defer(u,t,e)},orient:function(t){H.defer(function(){var e=bt.value();return void 0===t?e.projection.rotate():(e.projection.rotate(t),void gt.save({orientation:e.orientation()}))})},stop:function(){H.defer(function(){gt.save({animate:!1})})},cancelMove:function(){mt.cancelMove()}})}},{"./canvas/twod":40,"./d3":42,"./gl/fastoverlay":45,"./gl/glCheck":46,"./globes":48,"./keyboard":53,"./lang":54,"./micro":57,"./products":79,"./utc":81,backbone:1,"topojson-client":19,underscore:20,when:38}],45:[function(t,e,n){"use strict";var r=t("../d3"),i=t("underscore"),o=t("./glu"),a=t("./../micro"),u=a.view(),c="precision highp float;\nprecision highp sampler2D;\n\nconst float TAU = 6.283185307179586;\nconst float PI = 3.141592653589793;\n",s="\nuniform float u_Detail;\n\nvoid main() {\n    vec2 coord = invert(gl_FragCoord.xy / u_Detail);\n    vec2 st = grid(coord);\n    float v = lookup(st);\n    lowp vec4 color = colorize(v);\n    gl_FragColor = color;\n}\n";e.exports=function(t,e,n,l,f,h){function d(t){var e=c+t.join("")+s,n=M.makeShader(E.FRAGMENT_SHADER,e),r=M.makeProgram([T,n]);M.attribs(r).set(o.unitPlaneAttributes()),P=t,R=r,N=M.uniforms(r,S),E.useProgram(r)}function p(t,e){if(e){var n=e.def;if(t.hash===n.hash)return M.updateTexture2DParams(e.texture,t,n)?{def:i.omit(t,"data"),texture:e.texture}:e;if(t.width===n.width&&t.height===n.height&&t.format===n.format&&t.type===n.type)return M.updateTexture2D(e.texture,t),{def:i.omit(t,"data"),texture:e.texture};E.deleteTexture(e.texture)}var r=M.makeTexture2D(t);return{def:i.omit(t,"data"),texture:r}}function v(t){return Object.keys(t).map(function(e){return S[e]=p(t[e],S[e])})}function g(t){t.forEach(function(t){var e=t.texture;A[j]!==e&&(A[j]=e,E.activeTexture(E.TEXTURE0+j),E.bindTexture(E.TEXTURE_2D,e)),t.unit=j++})}function m(){var t=n.value(),e=(l.value()||{}).overlayGrid||{},r=[t&&t.optimizedProjection(),e.grid&&e.grid(),e.field&&e.field().bilinear,e.scale];return r.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.webgl&&t.webgl(M)})}function y(t){var e=Math.round(u.width*t),n=Math.round(u.height*t);C===e&&O===n||(k.attr("width",e).attr("height",n),E.viewport(0,0,e,n),C=e,O=n)}function b(){E.clear(E.COLOR_BUFFER_BIT),x&&x.clearRect(0,0,C,O)}var w=!0,_=w?o.createCanvas():t,x=w?t.getContext("2d"):void 0,k=r.selectAll([t,_]).style("width",u.width+"px").style("height",u.height+"px"),E=o.getWebGL(_),M=o.attach(E);E.getExtension("OES_texture_float"),E.getExtension("OES_texture_float_linear"),E.disable(E.DEPTH_TEST),E.clearColor(0,0,0,0);var T=M.makeShader(E.VERTEX_SHADER,o.planeVertexShader()),S={},A=i.range(8).map(function(){return null}),j=1,P=[],R=null,N=null,C=-1,O=-1,F={draw:function(){var t=e.get("hd")?1:.5;y(t),b();var n=f.value(),r=(l.value()||{}).overlayGrid,o=e.get("overlayType"),u=e.get("animate"),c=m();if("off"===o||!n||c.some(function(t){return void 0===t}))return!1;var s=i.flatten(c.map(function(t){return t.shaderSource()}));for(a.arraysEq(P,s)||d(s),j=1,c.forEach(function(t){return g(v(t.textures()))});j<A.length;)A[j++]=null;return c.forEach(function(t){return N.set(t.uniforms())}),N.set({u_Detail:t,u_Alpha:(u?r.alpha.animated:r.alpha.single)/255}),E.drawArrays(E.TRIANGLES,0,6),w&&x.drawImage(_,0,0),!0},changeDisplaySize:function(t){k.style("width",t.width+"px").style("height",t.height+"px"),u=t}};return e.on("change:overlayType",F.draw),e.on("change:hd",F.draw),n.on("update",F.draw),l.on("update",F.draw),f.on("redraw",F.draw),f.on("render",F.draw),h.on("update",F.draw),F}},{"../d3":42,"./../micro":57,"./glu":47,underscore:20}],46:[function(t,e,n){"use strict";var r=t("./../micro"),i=t("./glu");e.exports=function(){function t(t){var e=n.getError();if(e)throw new Error(e+":"+t)}var e={pass:!1},n=void 0,o="";try{if(n=i.getWebGL(i.createCanvas()),!n)return e.hasContext=!1,e;var a=i.attach(n);if(e.floatTex=!!n.getExtension("OES_texture_float"),e.floatTexLinear=!!n.getExtension("OES_texture_float_linear"),!e.floatTex)return e;o="program1";var u=a.makePlaneVertexShader(),c=a.makeProgram([u,a.makeShader(n.FRAGMENT_SHADER,"precision highp float;\nprecision highp sampler2D;\n\nconst float WIDTH = 3.0;\n\n                           //     0.5          1.5            2.5         : x coord\n                           //     0.166        0.5            0.833       : normalized x coord\nuniform sampler2D u_Tex0;  // [(0,0,0,1), (10,10,10,  1), (20,20,20,  1)] : LUMINANCE, NEAREST\nuniform sampler2D u_Tex1;  // [(0,0,0,0), (10,10,10,-10), (20,20,20,-20)] : LUMINANCE_ALPHA, LINEAR\n\nvoid main() {\n    vec2 st = (floor(gl_FragCoord.xy) + 0.20) / WIDTH;  // x = 0.2, 1.2, 2.2  =>  x = 0.066, 0.4, 0.733\n    vec4 c0 = texture2D(u_Tex0, st);\n    vec4 c1 = texture2D(u_Tex1, st);\n    gl_FragColor = vec4(c0.r, c1.r, c1.a * -1.0, float(c0.r == 7e37)) / 255.0;\n}\n")]);o="tex0";var s=3,l=1,f=a.makeTexture2D({format:n.LUMINANCE,type:n.FLOAT,width:s,height:l,data:new Float32Array([0,10,20])});o="tex1";var h=a.makeTexture2D({format:n.LUMINANCE_ALPHA,type:n.FLOAT,width:s,height:l,data:new Float32Array([0,0,10,-10,20,-20]),TEXTURE_MIN_FILTER:e.floatTexLinear?n.LINEAR:n.NEAREST,TEXTURE_MAG_FILTER:e.floatTexLinear?n.LINEAR:n.NEAREST});o="target";var d=a.makeTexture2D({format:n.RGBA,type:n.UNSIGNED_BYTE,width:s,height:l,data:null});o="run-program1";var p={a:{texture:f,unit:0},b:{texture:h,unit:1}};n.activeTexture(n.TEXTURE0+p.a.unit),t("activeTexture0"),n.bindTexture(n.TEXTURE_2D,f),t("bindTexture0"),n.activeTexture(n.TEXTURE0+p.b.unit),t("activeTexture1"),n.bindTexture(n.TEXTURE_2D,h),t("bindTexture1"),a.makeFramebufferTexture2D(d),n.viewport(0,0,s,l),t("viewport"),n.useProgram(c),t("useProgram");var v=a.attribs(c);v.set(i.unitPlaneAttributes());var g=a.uniforms(c,p);g.set({u_Tex0:"a",u_Tex1:"b"}),n.drawArrays(n.TRIANGLES,0,6),t("drawArrays");var m=new Uint8Array(s*l*4);if(n.readPixels(0,0,s,l,n.RGBA,n.UNSIGNED_BYTE,m),t("readPixels"),r.arraysEq(m,[0,0,0,0,10,7,7,0,20,17,17,0]))e.floatTexLinear=!0;else{if(!r.arraysEq(m,[0,0,0,0,10,10,10,0,20,20,20,0]))return e.floatTexLinear=e.floatTex=!1,e;e.floatTexLinear=!1}if(o="update-tex0",a.updateTexture2D(f,{format:n.LUMINANCE,type:n.FLOAT,width:s,height:l,data:new Float32Array([7e37,100,200])}),n.activeTexture(n.TEXTURE0+p.a.unit),t("activeTexture"),n.bindTexture(n.TEXTURE_2D,f),t("bindTexture"),n.drawArrays(n.TRIANGLES,0,6),t("drawArrays"),n.readPixels(0,0,s,l,n.RGBA,n.UNSIGNED_BYTE,m),t("readPixels"),100!==m[4]||200!==m[8])return e.texSubImage2D=!1,e;if(1!==m[3])return e.missingVal=!1,e;o="program2";var y=a.makeProgram([u,a.makeShader(n.FRAGMENT_SHADER,"precision highp float;\n\nvoid main() {\n    float asin_err = abs(asin(0.894) - 1.1061944) * 100.0;\n    gl_FragColor = vec4(asin_err);\n}\n")]);if(n.useProgram(y),t("useProgram"),a.attribs(y).set(a.unitPlaneAttributes()),n.drawArrays(n.TRIANGLES,0,6),t("drawArrays"),n.readPixels(0,0,s,l,n.RGBA,n.UNSIGNED_BYTE,m),t("readPixels"),0!==m[0])return e.asin=m[0],e;o="end",e.maxTexSize=+n.getParameter(n.MAX_TEXTURE_SIZE)||-1,t("getParameter");var b=n.getShaderPrecisionFormat?n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT):{};if(t("getShaderPrecisionFormat"),e.precision=+(b||{}).precision||-1,e.maxTexSize<4096||e.precision<23)return e;e.err=n.getError(),e.pass=!e.err}catch(t){e.err=o+":"+t.toString()}return e}()},{"./../micro":57,"./glu":47}],47:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){throw new Error(t)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("underscore"),u=t("./../micro"),c=t("./../log")(),s="precision highp float;\n\nattribute vec2 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n    gl_Position = vec4(a_Position, 0.0, 1.0);\n    v_TexCoord = a_TexCoord;\n}\n";e.exports=function(){function t(){r(this,t)}return o(t,null,[{key:"createCanvas",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.createElement("canvas");return n.width=t,n.height=e,n}},{key:"getWebGL",value:function(t,e){var n=void 0;try{n=t.getContext("webgl",e)}catch(t){}if(!n)try{n=t.getContext("experimental-webgl",e)}catch(t){}return n||void 0}},{key:"planeVertexShader",value:function(){return s}},{key:"unitPlaneAttributes",value:function(){return{a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}}},{key:"attach",value:function(t){function e(e){var r=t.getError();r&&n(r+":"+e)}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,l={PACK_ALIGNMENT:1,UNPACK_ALIGNMENT:1,UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1,UNPACK_COLORSPACE_CONVERSION_WEBGL:t.BROWSER_DEFAULT_WEBGL},f=Object.keys(l),h={TEXTURE_MIN_FILTER:t.NEAREST,TEXTURE_MAG_FILTER:t.NEAREST,TEXTURE_WRAP_S:t.CLAMP_TO_EDGE,TEXTURE_WRAP_T:t.CLAMP_TO_EDGE},d=Object.keys(h);return new(function(){function i(){r(this,i)}return o(i,[{key:"makePlaneVertexShader",value:function(){return this.makeShader(t.VERTEX_SHADER,s)}},{key:"unitPlaneAttributes",value:function(){return{a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}}},{key:"makeShader",value:function(r,i){var o=t.createShader(r);e("createShader:"+r),t.shaderSource(o,i),e("shaderSource:"+r),t.compileShader(o),e("compileShader:"+r);var a=t.getShaderParameter(o,t.COMPILE_STATUS);if(e("getShaderParameter:"+r),!a){var u=t.getShaderInfoLog(o);return e("getShaderInfoLog:"+r),t.deleteShader(o),e("deleteShader:"+r),n(u),null}return o}},{key:"makeProgram",value:function(r){var i=t.createProgram();e("createProgram"),r.forEach(function(n){t.attachShader(i,n),e("attachShader")}),t.linkProgram(i),e("linkProgram");var o=t.getProgramParameter(i,t.LINK_STATUS);if(e("getProgramParameter"),!o){var a=t.getProgramInfoLog(i);return e("getProgramInfoLog"),t.deleteProgram(i),e("deleteProgram"),n(a),null}return i}},{key:"makeFramebufferTexture2D",value:function(n){var r=t.createFramebuffer();e("createFramebuffer"),t.bindFramebuffer(t.FRAMEBUFFER,r),e("bindFramebuffer"),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),e("framebufferTexture2D");var i=t.checkFramebufferStatus(t.FRAMEBUFFER);return e("checkFramebufferStatus"),i!==t.FRAMEBUFFER_COMPLETE?(t.deleteFramebuffer(r),e("deleteFramebuffer"),callback("framebuffer: "+i),null):r}},{key:"uniforms",value:function(n,i){function s(e,n){var r=l[e]||{},o=r.location;switch(r.type){case t.FLOAT:return u.isArrayLike(n)?t.uniform1fv(o,n):t.uniform1f(o,n);case t.FLOAT_VEC2:return t.uniform2fv(o,n);case t.FLOAT_VEC3:return t.uniform3fv(o,n);case t.FLOAT_VEC4:return t.uniform4fv(o,n);case t.INT:return u.isArrayLike(n)?t.uniform1iv(o,n):t.uniform1i(o,n);case t.INT_VEC2:return t.uniform2iv(o,n);case t.INT_VEC3:return t.uniform3iv(o,n);case t.INT_VEC4:return t.uniform4iv(o,n);case t.SAMPLER_2D:var a=i[n];return a?void t.uniform1i(o,a.unit):void c.warn("uniform '"+e+"' refers to unknown texture '"+n+"'");default:c.warn("uniform '"+e+"' has unsupported type: "+JSON.stringify(r))}}var l={},f=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);return e("getProgramParameter"),a.range(f).map(function(r){var i=t.getActiveUniform(n,r);return e("getActiveUniform:"+r),i}).filter(function(t){return!!t}).forEach(function(r){var i=t.getUniformLocation(n,r.name);e("getUniformLocation:"+r.name),l[r.name]={name:r.name,type:r.type,size:r.size,location:i}}),new(function(){function t(){r(this,t)}return o(t,[{key:"decls",value:function(){return l}},{key:"set",value:function(t){return Object.keys(t).forEach(function(n){s(n,t[n]),e("assign-uniform:"+n)}),this}}]),t}())}},{key:"attribs",value:function(n){function i(n,r){var i=u[n]||{},o=i.location;switch(i.type){case t.FLOAT_VEC2:var a=t.createBuffer();return e("createBuffer:"+n),t.bindBuffer(t.ARRAY_BUFFER,a),e("bindBuffer:"+n),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),e("bufferData:"+n),t.enableVertexAttribArray(o),e("enableVertexAttribArray:"+n),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0);default:c.warn("attribute '"+n+"' has unsupported type: "+JSON.stringify(i))}}var u={},s=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);return e("getProgramParameter"),a.range(s).map(function(r){var i=t.getActiveAttrib(n,r);return e("getActiveAttrib:"+r),i}).filter(function(t){return!!t}).forEach(function(r){var i=t.getAttribLocation(n,r.name);e("getAttribLocation:"+r.name),u[r.name]={name:r.name,type:r.type,size:r.size,location:i}}),new(function(){function t(){r(this,t)}return o(t,[{key:"decls",value:function(){return u}},{key:"set",value:function(t){return Object.keys(t).forEach(function(n){i(n,t[n]),e("assign-attrib:"+n)}),this}}]),t}())}},{key:"makeTexture2D",value:function(n){var r=t.createTexture();e("createTexture"),t.activeTexture(t.TEXTURE0),e("activeTexture"),t.bindTexture(t.TEXTURE_2D,r),e("bindTexture");var i=a.extend({},l,h,n),o=i.format,u=i.type,c=i.width,s=i.height,p=i.data;return f.forEach(function(n){t.pixelStorei(t[n],i[n]),e("pixelStorei:"+n)}),t.texImage2D(t.TEXTURE_2D,0,o,c,s,0,o,u,p),e("texImage2D"),d.forEach(function(n){t.texParameteri(t.TEXTURE_2D,t[n],i[n]),e("texParameteri:"+n)}),t.bindTexture(t.TEXTURE_2D,null),e("bindTexture"),r}},{key:"updateTexture2D",value:function(n,r){t.activeTexture(t.TEXTURE0),e("activeTexture"),t.bindTexture(t.TEXTURE_2D,n),e("bindTexture");var i=a.extend({},l,h,r),o=i.format,u=i.type,c=i.width,s=i.height,p=i.data;return f.forEach(function(n){t.pixelStorei(t[n],i[n]),e("pixelStorei:"+n)}),t.texSubImage2D(t.TEXTURE_2D,0,0,0,c,s,o,u,p),e("texSubImage2D"),d.forEach(function(n){t.texParameteri(t.TEXTURE_2D,t[n],i[n]),e("texParameteri:"+n)}),t.bindTexture(t.TEXTURE_2D,null),e("bindTexture"),n}},{key:"updateTexture2DParams",value:function(n,r,i){for(var o=!1,a=0;a<d.length;a++){var u=d[a],c=h[u],s=r[u]||c,l=i[u]||c;s!==l&&(o||(o=!0,t.activeTexture(t.TEXTURE0),e("activeTexture"),t.bindTexture(t.TEXTURE_2D,n),e("bindTexture")),t.texParameteri(t.TEXTURE_2D,t[u],s),e("texParameteri:"+u))}return o&&(t.bindTexture(t.TEXTURE_2D,null),e("bindTexture")),o}},{key:"context",get:function(){return t}}]),i}())}}]),t}()},{"./../log":55,"./../micro":57,underscore:20}],48:[function(t,e,n){"use strict";var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function n(){var t=h.floorMod((new Date).getTimezoneOffset()/4,360);return[t,0]}function i(t,e){return f.isFinite(t)||t===1/0||t===-(1/0)?t:e}function o(t,e){var n=t[0],r=t[1],o=Math.max(Math.floor(i(n[0],0)),0),a=Math.max(Math.floor(i(n[1],0)),0),u=Math.min(Math.ceil(i(r[0],e.width)),e.width-1),c=Math.min(Math.ceil(i(r[1],e.height)),e.height-1);return{x:o,y:a,xMax:u,yMax:c,width:u-o+1,height:c-a+1}}function a(t,e){var n=l.geoPath().projection(t).bounds({type:"Sphere"}),r=(n[1][0]-n[0][0])/t.scale(),i=(n[1][1]-n[0][1])/t.scale(),o=.9*Math.min(e.width/r,e.height/i),a=[e.width/2,e.height/2];return t.scale(o).translate(a)}function u(){return{projection:null,newProjection:function(t){throw new Error("method must be overridden")},optimizedProjection:function(){return this.projection},bounds:function(t){return o(l.geoPath().projection(this.projection).bounds({type:"Sphere"}),t)},fit:function(t){return h.isEmbeddedInIFrame()&&"tara"===h.siteInstance()?700:this.newProjection(t).scale()},center:function(t){return[t.width/2,t.height/2]},scaleExtent:function(){return[25,3e3]},orientation:function(t,e){var n=this.projection,r=n.rotate();if(e){var i=f.isString(t)?t.split(","):[],o=+i[0],a=+i[1],u=+i[2],c=this.scaleExtent();return n.rotate(f.isFinite(o)&&f.isFinite(a)?[-o,-a,r[2]]:this.newProjection(e).rotate()),n.scale(f.isFinite(u)?h.clamp(u,c[0],c[1]):this.fit(e)),n.translate(this.center(e)),this}return[(-r[0]).toFixed(2),(-r[1]).toFixed(2),Math.round(n.scale())].join(",")},manipulator:function(t,e){var n=this.projection,r=60/e,i=[n.rotate()[0]/r,-n.rotate()[1]/r],o=n.precision();return n.precision(10*o),{move:function(e,o){if(e){var a=e[0]-t[0]+i[0],u=e[1]-t[1]+i[1];n.rotate([a*r,-u*r,n.rotate()[2]])}n.scale(o)},end:function(){n.precision(o)}}},locate:function(t){return null},defineMask:function(t){return l.geoPath().projection(this.projection).context(t)({type:"Sphere"}),t},backgroundRenderer:function(){return{renderTo:function(t,e){t.fillStyle="#303030",t.beginPath(),e({type:"Sphere"}),t.fill()}}},graticuleRenderer:function(){var t=l.geoGraticule()(),e=l.geoGraticule().extentMinor([[0,0],[0,0]]).stepMajor([0,90])(),n=p.makeStrokeRenderer(t,{strokeStyle:"#505050",lineWidth:1}),r=p.makeStrokeRenderer(e,{strokeStyle:"#808080",lineWidth:1});return{renderTo:function(t,e){n.renderTo(t,e),r.renderTo(t,e)}}},foregroundRenderer:function(){return{renderTo:function(t,e){t.strokeStyle="#000005",t.lineWidth=4,t.beginPath(),e({type:"Sphere"}),t.stroke()}}}}}function c(t,e){var n=f.extend(u(),t);return n.projection=n.newProjection(e),n}var s=e.exports={},l=t("./d3"),f=t("underscore"),h=t("./micro"),d=t("./projection/orthographic"),p=t("./canvas/twod.js"),v=Math.PI,g=2*v;s.atlantis=function(t){return c({newProjection:function(t){return a(l.geoMollweide().rotate([30,-45,90]).precision(.1),t)}},t)},s.azimuthal_equidistant=function(t){return s.orthographic(t)},s.conic_equidistant=function(t){return c({newProjection:function(t){return a(l.geoConicEquidistant().rotate(n()).precision(.1),t)}},t)},s.equirectangular=function(t){return c({newProjection:function(t){return a(l.geoEquirectangular().rotate(n()).precision(.1),t)}},t)},s.orthographic=function(t){return c({newProjection:function(t){return a(l.geoOrthographic().rotate(n()).precision(.1).clipAngle(90),t)},optimizedProjection:function(){return d.fromD3(this.projection)},backgroundRenderer:function(){return{renderTo:function(t,e){var n=e.projection(),i=n.translate(),o=r(i,2),a=o[0],u=o[1],c=n.scale(),s=t.createRadialGradient(a,u,0,a,u,c);s.addColorStop(.69,"#303030"),s.addColorStop(.91,"#202020"),s.addColorStop(.96,"#000005"),t.fillStyle=s,t.fillRect(a-c,u-c,2*c,2*c)}}},foregroundRenderer:function(){return{renderTo:function(t,e){var n=e.projection(),i=n.translate(),o=r(i,2),a=o[0],u=o[1],c=n.scale();t.fillStyle="#000005",t.beginPath(),t.arc(a,u,c-2,0,g,!0),t.arc(a,u,c+4,0,g,!0),t.fill("evenodd")}}},locate:function(t){return[-t[0],-t[1],this.projection.rotate()[2]]}},t)},s.patterson=function(t){return c({newProjection:function(t){return a(l.geoPatterson().precision(.1),t)}},t)},s.stereographic=function(t){return c({newProjection:function(t){return a(l.geoStereographic().rotate([-43,-20]).precision(1).clipAngle(179.9999).clipExtent([[0,0],[t.width,t.height]]),t)},foregroundRenderer:function(){return{renderTo:function(t,e){}}}},t)},s.waterman=function(t){return c({newProjection:function(t){return a(l.geoPolyhedralWaterman().rotate([20,0]).precision(.1),t)},foregroundRenderer:function(){return{renderTo:function(t,e){var n=t.canvas,r=n.width,i=n.height;t.fillStyle=t.strokeStyle="#000005",t.lineWidth=4,t.beginPath(),e({type:"Sphere"}),t.stroke(),t.moveTo(0,0),t.lineTo(r,0),t.lineTo(r,i),t.lineTo(0,i),t.lineTo(0,0),t.fill("evenodd")}}}},t)},s.winkel3=function(t){return c({newProjection:function(t){return a(l.geoWinkel3().precision(.1),t)}},t)}}()},{"./canvas/twod.js":40,"./d3":42,"./micro":57,"./projection/orthographic":80,underscore:20}],49:[function(t,e,n){"use strict";var r=t("../micro"),i=Math.PI,o=2*i,a=o/360;e.exports=function(t,e){function n(){return{width:l,height:f}}function i(){return S}function o(t,e){for(var n=e||0;n<h;n++){var r=n%l,i=Math.floor(n/l),o=v+r*d,a=g+i*p;if(t(o,a,n))return n+1}return NaN}function u(t){var e=t[0],n=t[1];if(e===e&&n===n){var i=r.floorMod(e-v,360)/d,o=(n-g)/p,a=Math.round(i),u=Math.round(o);if(0<=u&&u<f&&0<=a&&(a<l||a===l&&S)){var c=u*l+a;return a===l?c-l:c}}return NaN}function c(t){var e=t[0],n=t[1];if(e===e&&n===n){var i=r.floorMod(e-v,360)/d,o=(n-g)/p,a=Math.floor(i),u=Math.floor(o),c=a+1,s=u+1,h=i-a,m=o-u;if(0<=u&&s<f&&0<=a&&(c<l||c===l&&S)){var y=u*l+a,b=y+1,w=y+l,_=w+1;return c===l&&(b-=l,_-=l),[y,b,w,_,h,m]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}function s(){return{shaderSource:function(){return"\nuniform vec2 u_Low;\nuniform vec2 u_Size;\n\nvec2 grid(in vec2 coord) {\n    vec2 tex = (coord - u_Low) / u_Size;\n    float s = tex.s;\n    float t = tex.t;\n\n    if (t < 0.0 || 1.0 < t) discard;  // lat out of bounds, so nothing to draw\n\n    return vec2(fract(s), t);  // UNDONE: fract used here only because lon is circular.\n}\n"},textures:function(){return{}},uniforms:function(){return{u_Low:M,u_Size:T}}}}var l=Math.floor(t.size),f=Math.floor(e.size),h=l*f,d=r.decimalize(t.delta),p=r.decimalize(e.delta),v=r.decimalize(t.start),g=r.decimalize(e.start),m=v+d*(l-1),y=g+p*(f-1),b=(v-d/2)*a,w=(m+d/2)*a,_=w-b,x=(g-p/2)*a,k=(y+p/2)*a,E=k-x,M=[b,x],T=[_,E],S=Math.floor(l*d)>=360;return{dimensions:n,isCylindrical:i,forEach:o,closest:u,closest4:c,webgl:s}}},{"../micro":57}],50:[function(t,e,n){"use strict";function r(t,e){function n(n){var r=t.closest4(n),i=r[0];if(i===i){var o=r[1],a=r[2],u=r[3],c=r[4],s=r[5],l=1-c,f=1-s,h=e[i],d=e[o],p=e[a],v=e[u];if(h<7e37){if(d<7e37&&p<7e37&&v<7e37){var g=l*f,m=c*f,y=l*s,b=c*s;return h*g+d*m+p*y+v*b}if(v<7e37&&d<7e37&&c>=s)return d+l*(h-d)+s*(v-d);if(p<7e37&&v<7e37&&c<s)return p+c*(v-p)+f*(h-p);if(p<7e37&&d<7e37&&c<=f)return h+c*(d-h)+s*(p-h)}else if(v<7e37&&p<7e37&&d<7e37&&c>f)return v+l*(p-v)+f*(d-v)}return 7e37}var r=o.arrayHashCode(e,1e3);return n.webgl=function(n){var i=n.context,o=u.floatTexLinear&&!t.isCylindrical(),c=a(n,t.dimensions()),s=t.dimensions(),l=s.width,f=s.height,h=[l,f];return{shaderSource:function(){return[c.scalarSource(),o?c.shaderSourceTexture2D():c.shaderSourceBilinearWrap()]},textures:function(){return{weather_data:c.scalarTexture(e,{hash:r,TEXTURE_MIN_FILTER:o?i.LINEAR:i.NEAREST,TEXTURE_MAG_FILTER:o?i.LINEAR:i.NEAREST})}},uniforms:function(){var t={u_Data:"weather_data"};return o||(t.u_TextureSize=h),t}}},n}function i(t,e){function n(t,e,n,r,i,o,a,u){var c=n+t*(a-n)+e*(i-n),s=r+t*(u-r)+e*(o-r);return[c,s,Math.sqrt(c*c+s*s)]}function r(r){var i=t.closest4(r),o=2*i[0];if(o===o){var a=2*i[1],u=2*i[2],c=2*i[3],s=i[4],l=i[5],f=1-s,h=1-l,d=e[o],p=e[o+1],v=e[a],g=e[a+1],m=e[u],y=e[u+1],b=e[c],w=e[c+1];if(p<7e37){if(g<7e37&&y<7e37&&w<7e37){var _=f*h,x=s*h,k=f*l,E=s*l,M=d*_+v*x+m*k+b*E,T=p*_+g*x+y*k+w*E;return[M,T,Math.sqrt(M*M+T*T)]}if(w<7e37&&g<7e37&&s>=l)return n(f,l,v,g,b,w,d,p);if(y<7e37&&w<7e37&&s<l)return n(s,h,m,y,d,p,b,w);if(y<7e37&&g<7e37&&s<=h)return n(s,l,d,p,m,y,v,g)}else if(w<7e37&&y<7e37&&g<7e37&&s>h)return n(f,h,b,w,v,g,m,y)}return[7e37,7e37,7e37]}var i=o.arrayHashCode(e,1e3);return r.webgl=function(n){var r=n.context,o=u.floatTexLinear&&!t.isCylindrical(),c=a(n,t.dimensions()),s=t.dimensions(),l=s.width,f=s.height,h=[l,f];return{shaderSource:function(){return[c.vectorSource(),o?c.shaderSourceTexture2D():c.shaderSourceBilinearWrap()]},textures:function(){return{weather_data:c.vectorTexture(e,{hash:i,TEXTURE_MIN_FILTER:o?r.LINEAR:r.NEAREST,TEXTURE_MAG_FILTER:o?r.LINEAR:r.NEAREST})}},uniforms:function(){var t={u_Data:"weather_data"};return o||(t.u_TextureSize=h),t}}},r}var o=t("../micro"),a=t("./lookup"),u=t("../gl/glCheck");e.exports={scalar:r,vector:i}},{"../gl/glCheck":46,"../micro":57,"./lookup":51}],51:[function(t,e,n){"use strict";var r=t("underscore");e.exports=function(t,e){var n=t.context,i=e.width,o=e.height;return{shaderSourceTexture2D:function(){return"\nuniform sampler2D u_Data;\n\nfloat lookup(in vec2 st) {\n    vec4 h = texture2D(u_Data, st);\n    return scalarize(h);\n}\n"},shaderSourceBilinearWrap:function(){return"\nuniform sampler2D u_Data;\nuniform vec2 u_TextureSize;\n\nfloat lookup(in vec2 st) {\n    // adapted from http://www.iquilezles.org/www/articles/hwinterpolation/hwinterpolation.htm\n    vec2 uv = st * u_TextureSize - 0.5;\n    vec2 iuv = floor(uv);\n    vec2 fuv = fract(uv);\n    vec2 ruv = 1.0 - fuv;\n\n    // UNDONE: fract usable below only for cylindrical grids\n    vec4 a = texture2D(u_Data, fract((iuv + vec2(0.5, 0.5)) / u_TextureSize));  // LL\n    vec4 b = texture2D(u_Data, fract((iuv + vec2(1.5, 0.5)) / u_TextureSize));  // LR\n    vec4 c = texture2D(u_Data, fract((iuv + vec2(0.5, 1.5)) / u_TextureSize));  // UL\n    vec4 d = texture2D(u_Data, fract((iuv + vec2(1.5, 1.5)) / u_TextureSize));  // UR\n    vec4 h;\n\n    int tag = int(dot(step(7e37, vec4(a.x, b.x, c.x, d.x)), vec4(1.0, 2.0, 4.0, 8.0)));\n    if (tag == 0) {\n        // a b c d\n        h = mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    } else if (tag == 1 && ruv.y < fuv.x) {\n        // d b c\n        h = d + ruv.x * (c - d) + ruv.y * (b - d);\n    } else if (tag == 2 && fuv.x < fuv.y) {\n        // c a d\n        h = c + fuv.x * (d - c) + ruv.y * (a - c);\n    } else if (tag == 4 && fuv.x >= fuv.y) {\n        // b a d\n        h = b + ruv.x * (a - b) + fuv.y * (d - b);\n    } else if (tag == 8 && fuv.x <= ruv.y) {\n        // a b c\n        h = a + fuv.x * (b - a) + fuv.y * (c - a);\n    } else {\n        // not enough points to interpolate\n        h = vec4(7e37);\n    }\n\n    return scalarize(h);\n}\n"},scalarSource:function(){return"\nfloat scalarize(in vec4 h) {\n    return h.x;\n}\n"},vectorSource:function(){return"\nfloat scalarize(in vec4 h) {\n    return length(h.xw);  // UNDONE: sqrt(7e37^2) ok?\n}\n"},scalarTexture:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.extend({format:n.LUMINANCE,type:n.FLOAT,width:i,height:o,data:t},e)},vectorTexture:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.extend({format:n.LUMINANCE_ALPHA,type:n.FLOAT,width:i,height:o,data:t},e)}}}},{underscore:20}],52:[function(t,e,n){"use strict";function r(t,e){function n(n){var r=t.closest(n);return r===r?e[r]:7e37}var r=o.arrayHashCode(e,1e3);return n.webgl=function(n){var i=n.context,o=a(n,t.dimensions());return{shaderSource:function(){return[o.scalarSource(),o.shaderSourceTexture2D()]},textures:function(){return{weather_data:o.scalarTexture(e,{hash:r,TEXTURE_MIN_FILTER:i.NEAREST,TEXTURE_MAG_FILTER:i.NEAREST})}},uniforms:function(){return{u_Data:"weather_data"}}}},n}function i(t,e){function n(n){var r=2*t.closest(n);if(r===r){var i=e[r],o=e[r+1];if(i<7e37&&o<7e37)return[i,o,Math.sqrt(i*i+o*o)]}return[7e37,7e37,7e37]}var r=o.arrayHashCode(e,1e3);return n.webgl=function(n){var i=n.context,o=a(n,t.dimensions());return{shaderSource:function(){return[o.vectorSource(),o.shaderSourceTexture2D()]},textures:function(){return{weather_data:o.vectorTexture(e,{hash:r,TEXTURE_MIN_FILTER:i.NEAREST,TEXTURE_MAG_FILTER:i.NEAREST})}},uniforms:function(){return{u_Data:"weather_data"}}}},n}var o=t("../micro"),a=t("./lookup");e.exports={scalar:r,vector:i}},{"../micro":57,"./lookup":51}],53:[function(t,e,n){"use strict";function r(t,e,n,r){if(e){switch(e){case"Esc":return"Escape"}return e}switch(n){case 27:return"Escape"}return"keypress"===t&&r?r:"NYI"}e.exports={key:function t(e){var n=e.type,t=e.key,i=+e.which,o=String.fromCharCode(i);return r(n,t,i,o)}}},{}],54:[function(t,e,n){"use strict";var r=e.exports={};r.preferred=function(t){return t.languages||[t.language||t.userLanguage||"en"]},r.parse=function(t){for(var e={language:"",script:"",region:""},n=(t||"").toLowerCase().split("-"),r=0;r<n.length;r++){var i=n[r];if(1===i.length)break;0===r?e.language=i:/^[a-z]{4}$/.test(i)?e.script=i.substring(0,1).toUpperCase()+i.substring(1):/^([a-z]{2}|\d{3})$/.test(i)&&(e.region=i.toUpperCase())}return e},r.match=function(t){switch(t.language){case"en":return"en";case"cs":return"cs";case"fr":return"fr";case"ja":return"ja";case"pt":return"pt";case"ru":return"ru";case"zh":switch(t.script){case"Hant":return"zh-TW";case"Hans":return"zh-CN"}switch(t.region){case"HK":case"MO":case"TW":return"zh-TW";case"SG":case"CN":return"zh-CN"}}return""},r.best=function(t){for(var e=r.preferred(t),n=0;n<e.length;n++){var i=r.parse(e[n]),o=r.match(i);if(o)return o}return""}},{}],55:[function(t,e,n){(function(t){"use strict";e.exports=function(e){function n(t,e){return"function"==typeof e?e.bind(t):function(){}}return e=e||t.console||{},{debug:n(e,e.log),info:n(e,e.info),warn:n(e,e.warn),error:n(e,e.error),time:n(e,e.time),timeEnd:n(e,e.timeEnd)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(t,e,n){(function(e){"use strict";!function(){window.addEventListener("touchmove",function(){});var n=t("underscore"),r=t("./d3"),i=t("./micro"),o=t("./blacklist"),a=e.earth=t("./earth");return e.main=function(e){e=e||{};var r=t("./log")(e.console),o={log:r,bridge:e};i.isDevMode()&&r.debug("dev mode enabled"),n.defer(a,o)},i.isEmbeddedInIFrame()&&n.isFunction(window.ga)&&window.ga("send","event","iframe",document.referrer.split("/")[2]||document.referrer),i.isEmbeddedInIFrame()&&o.contains(document.referrer)?o.deny():void(i.isAppMode()?r.select("#details").classed("invisible",!0):e.main())}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./blacklist":39,"./d3":42,"./earth":44,"./log":55,"./micro":57,underscore:20}],57:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function n(){return u.isMobile()?"/data/earth-topo-mobile.json?v3":"/data/earth-topo.json?v3"}function i(t,e,n,r){var i=n||{},o=i.target;return o?o.status?e.reject({status:o.status,message:o.statusText,resource:t,error:n
}):e.reject({status:-1,message:"Cannot load "+t+": "+n,resource:t,error:n}):e.resolve(r)}function o(t,e){for(var n=new Int32Array([t.byteLength]),r=Math.max(t.length/e,1),i=0;i<t.length;i+=r)n[0]=31*n[0]+t[Math.floor(i)];return n[0]}function a(t,e){for(var n=0;n<t.length;n++){var r=t[n];u.isArrayLike(r)?a(r,e):e.push(r)}return e}var u=e.exports={},c=t("./d3"),s=t("underscore"),l=t("backbone"),f=t("when"),h=t("./decoder"),d=t("./utc"),p=Math.PI,v=2*p,g=v/360,m=36e-6,y="current/wind/surface/level/orthographic";u.MISSING=7e37,u.isDevMode=function(){return 8081===+window.location.port},u.siteLangCode=function(){return c.select("html").attr("lang")||"en"},u.siteInstance=function(){var t=window.location.hostname.match(/(.*)\.nullschool\.net$/)||[],e=t[1]||"earth";return"earth"===e?"":e},u.isTruthy=function(t){return!!t},u.isValue=function(t){return null!==t&&void 0!==t},u.coalesce=function(t,e){return u.isValue(t)?t:e},u.decimalize=function(t){return s.isString(t)&&t.indexOf("/")>=0&&(t=t.split("/")),u.isArrayLike(t)&&2===t.length?t[0]/t[1]:+t},u.scalarize=function(t){return u.isArrayLike(t)?t[2]:t},u.floorMod=function(t,e){var n=t-e*Math.floor(t/e);return n===e?0:n},u.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},u.clamp=function(t,e,n){return Math.max(e,Math.min(t,n))},u.proportion=function(t,e,n){return(u.clamp(t,e,n)-e)/(n-e)},u.spread=function(t,e,n){return t*(n-e)+e},u.capitalize=function(t){return 0===t.length?t:t.charAt(0).toUpperCase()+t.substr(1)},u.isFF=function(){return/firefox/i.test(navigator.userAgent)},u.isMobile=function(){return/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)},u.isEmbeddedInIFrame=function(){return self!=top},u.bindup=function(t,e){return u.isValue(t)&&t[e]?t[e].bind(t):null},u.view=function(){var t=window,e=document&&document.documentElement,n=document&&document.getElementsByTagName("body")[0],r=t.innerWidth||e.clientWidth||n.clientWidth,i=t.innerHeight||e.clientHeight||n.clientHeight;return{width:Math.ceil(r),height:Math.ceil(i)}},u.removeChildren=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},u.newClickEvent=function(){try{return new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch(e){var t=document.createEvent("MouseEvents");return t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t}},u.clearContext=function(t){var e=t.canvas;t.clearRect(0,0,e.width,e.height)},u.clearCanvas=function(t){var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)},u.windIntensityColorScale=function(t,e){for(var n=[],r=85;r<=255;r+=t)n.push("rgb("+r+","+r+","+r+")");return n.indexFor=function(t){return Math.floor(Math.min(t,e)/e*(n.length-1))},n},u.formatCoordinates=function(t,e){return Math.abs(e).toFixed(2)+"° "+(e>=0?"N":"S")+", "+Math.abs(t).toFixed(2)+"° "+(t>=0?"E":"W")},u.formatScalar=function(t,e){return e.conversion(t).toFixed(e.precision)},u.formatVector=function(t,e){var n=Math.atan2(-t[0],-t[1])/v*360,r=5*Math.round((n+360)%360/5);return r.toFixed(0)+"° @ "+u.formatScalar(t[2],e)},u.loadJson=function(t){var e=f.defer();return c.json(t,i.bind(null,t,e)),e.promise},u.loadJsonOnce=s.memoize(u.loadJson),u.loadEpak=function(t){var e=f.defer();return c.request(t).responseType("arraybuffer").response(function(t){return h.decodeEpak(t.response)}).get(function(n,r){return i(t,e,n,r)}),e.promise},u.distortion=function(t,e,n,r,i){var o=e<0?m:-m,a=n<0?m:-m,u=t([e+o,n]),c=t([e,n+a]),s=Math.cos(n*g),l=o*s;return[(u[0]-r)/l,(u[1]-i)/l,(c[0]-r)/a,(c[1]-i)/a]},u.newAgent=function(t,e){function n(){return function t(){return t.requested=!0,a}}function r(t,e){function n(e){return t.requested?null:s.isFunction(c)?c.apply(a,e):c}function r(e){t.requested||(i=e,a.trigger("update",e,a))}function o(e){t.requested||a.trigger("reject",e,a)}function u(t){a.trigger("fail",t,a)}try{var c=e[0];f.all(s.rest(e)).then(n).then(r,o).catch(u).done(),a.trigger("submit",a)}catch(t){u(t)}}var i=e,o=s.debounce(r,0),a={value:function(){return i},cancel:n(),submit:function(t,e,r,i){return this.cancel(),o(this.cancel=n(),arguments),this},toString:function(){return t}};return s.extend(a,l.Events)},u.parse=function(t,e,r,i){var o,a={},c=/^(current|(\d{4})\/(\d{1,2})\/(\d{1,2})\/(\d{3,4})Z)\/(\w+)\/(\w+)\/(\w+)([\/].+)?/.exec(t);if(c){var l="current"===c[1]?"current":{year:+c[2],month:+c[3],day:+c[4]};if("current"!==l){var f=(3===c[5].length?"0":"")+c[5];l.hour=+f.substr(0,2),l.minute=+f.substr(2)}a={date:l,param:c[6],surface:c[7],level:c[8],projection:"orthographic",orientation:"",topology:n(),overlayType:"default",showGridPoints:!1,animate:!0,loc:null,argoFloat:null,hd:i.hd||!1},u.coalesce(c[9],"").split("/").forEach(function(t){if(o=/^(\w+)(=([\d\-.,]*))?$/.exec(t)){if(s.has(e,o[1]))a.projection=o[1],a.orientation=u.coalesce(o[3],"");else if("loc"===o[1]){var n=s.isString(o[3])?o[3].split(","):[],i=+n[0],c=+n[1];i===i&&c===c&&(a.loc=[i,c])}}else if(o=/^overlay=([\w.]+)$/.exec(t))(r.has(o[1])||"default"===o[1])&&(a.overlayType=o[1]);else if(o=/^grid=(\w+)$/.exec(t))"on"===o[1]&&(a.showGridPoints=!0);else if(o=/^anim=(\w+)$/.exec(t))"off"===o[1]&&(a.animate=!1);else if(o=/^argo=(\w+)$/.exec(t))switch(o[1]){case"planned":case"recent":case"operational":case"dead":a.argoFloat=o[1]}})}return a};var b=l.Model.extend({id:0,_ignoreNextHashChangeEvent:!1,_projectionNames:null,_overlayTypes:null,toHash:function(){var t=this.attributes,e="current"===t.date?"current":d.print(t.date,"{yyyy}/{MM}/{dd}/{hh}{mm}Z"),n=[t.projection,t.orientation].filter(u.isTruthy).join("="),r=t.loc?"loc="+t.loc.map(function(t){return t.toFixed(3)}).join(","):"",i=u.isValue(t.overlayType)&&"default"!==t.overlayType?"overlay="+t.overlayType:"",o=t.showGridPoints?"grid=on":"",a=t.animate?"":"anim=off",c=t.argoFloat?"argo="+t.argoFloat:"";return[e,t.param,t.surface,t.level,a,i,o,c,n,r].filter(u.isTruthy).join("/")},sync:function(t,e,n){switch(t){case"read":if("hashchange"===n.trigger&&e._ignoreNextHashChangeEvent)return void(e._ignoreNextHashChangeEvent=!1);e.set(u.parse(window.location.hash.substr(1)||y,e._projectionNames,e._overlayTypes,e.attributes));break;case"update":case"create":var r="#"+e.toHash();window.location.hash!==r&&(e._ignoreNextHashChangeEvent=!0,window.location.hash=r)}}});u.buildConfiguration=function(t,e){var n=new b;return n._projectionNames=t,n._overlayTypes=e,n},u.parseQueryString=function(t){return s.object(t.split(/[?&]/).filter(u.isTruthy).map(function(t){return t.split("=").map(decodeURIComponent).concat([null])}))},u.dateToConfig=function(t){return{date:d.normalize(t)}},u.isAppMode=function(){return s.has(u.parseQueryString(window.location.search),"app")},u.isKioskMode=function(){var t=document.referrer.split("/")[2]||"",e=/dailymail/i.test(t);return s.has(u.parseQueryString(window.location.search),"kiosk")&&!e},u.isFixedMode=function(){return s.has(u.parseQueryString(window.location.search),"fixed")},u.arraysEq=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r!==i&&!(r!==r&&i!==i||u.isArrayLike(r)&&u.arraysEq(r,i)))return!1}return t.length===e.length},u.merge=function(t,e){for(var n=new Float32Array(2*t.length),r=0;r<t.length;r++){var i=2*r;n[i]=t[r],n[i+1]=e[r]}return n},u.toArray=function(t){return Array.prototype.slice.call(t)},u.arrayHashCode=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=void 0;switch(t.byteLength%4){case 0:n=new Int32Array(t.buffer);break;case 2:n=new Int16Array(t.buffer);break;default:n=new Int8Array(t.buffer)}return o(n,e)},u.isArrayLike=function(t){if(Array.isArray(t))return!0;if("object"!==("undefined"==typeof t?"undefined":r(t))||!t)return!1;var e=t.length;return"number"==typeof e&&e>=0},u.omit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};return Object.keys(t).forEach(function(e){n.indexOf(e)<0&&(i[e]=t[e])}),i},u.flatten=function(t){return u.isArrayLike(t)?a(t,[]):void 0}}()},{"./d3":42,"./decoder":43,"./utc":81,backbone:1,underscore:20,when:38}],58:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=t("./palette"),r=[0,5e3],i=[[0,[5,48,97]],[500,[33,102,172]],[1e3,[67,147,195]],[1500,[146,197,222]],[2e3,[209,229,240]],[2500,[247,247,247]],[3e3,[253,219,199]],[3500,[244,165,130]],[4e3,[214,96,77]],[4500,[178,24,43]],[5e3,[103,0,31]]];return n.buildScaleFromSegments(r,i,e)}},{"./palette":64}],59:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=t("./palette"),r=[3578e-7,377e-6],i=[{color:[0,0,0],mode:"lch",p:r[0]},{color:[100,0,0],mode:"lch",p:365e-6},{color:[164,36,0],mode:"lch",p:3675e-7},{color:[255,220,140],mode:"lch",p:371e-6},{color:[255,255,255],mode:"lch",p:r[1]}],o=n.scalesFrom(i);return o=n.smooth(o,2,[37e-5,372e-6]),n.buildScaleFromChromaScales(r,o,e)}},{"./palette":64}],60:[function(t,e,n){"use strict";e.exports=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=t("./palette"),i=[360+e,470+e],o=[{color:[0,0,0],mode:"lch",p:i[0]},{color:[100,0,0],mode:"lch",p:400+e},{color:[164,36,0],mode:"lch",p:405+e},{color:[255,220,140],mode:"lch",p:420+e},{color:[255,255,255],mode:"lch",p:450+e},{color:[0,210,255],mode:"lch",p:i[1]}],a=o[3].p,u=o[4].p,c=o[1].p,s=r.scalesFrom(o);return s=r.smooth(s,0,[c-2,c+2]),s=r.smooth(s,3,[a-2,a+2]),s=r.smooth(s,5,[u-2,u+2]),r.buildScaleFromChromaScales(i,s,n)}},{"./palette":64}],61:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=t("./palette"),r=[40,2500],i=[{color:[0,38,40],mode:"lab",p:r[0]},{color:[255,255,224],mode:"lch",p:400},{color:[0,0,154],mode:"lab",p:1800},{color:[0,0,0],mode:"lab",p:r[1]}],o=n.scalesFrom(i);return o=n.smooth(o,0,[360,440]),o=n.smooth(o,2,[1700,1900]),n.buildScaleFromChromaScales(r,o,e)}},{"./palette":64}],62:[function(t,e,n){"use strict";e.exports=function(){var e=t("./palette"),n=t("./kindlmann"),r=[1e-4,3];return e.buildScale(r,n,Math.log,Math.exp)}},{"./kindlmann":63,"./palette":64}],63:[function(t,e,n){"use strict";e.exports=function(t){for(var e=new Uint8Array(t.length/3*4),n=0,r=0;n<t.length;n+=3,r+=4)e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=255;return e}([4,4,4,10,3,8,13,4,11,16,5,14,18,5,16,21,6,18,22,7,19,24,8,21,26,8,22,27,9,24,28,10,25,30,11,26,31,12,27,32,12,28,33,13,29,35,14,31,36,14,32,37,15,32,38,15,33,39,16,34,40,17,35,41,17,36,42,18,38,43,19,38,44,19,39,46,20,41,46,20,45,46,21,50,45,21,55,45,21,60,45,22,64,45,23,67,45,23,71,45,24,75,45,24,77,45,25,81,45,25,84,44,26,87,44,27,90,45,27,92,45,28,95,44,29,98,44,29,100,44,30,103,44,31,106,44,31,109,44,32,110,44,33,113,44,34,116,43,34,118,42,35,121,40,38,120,38,40,119,36,42,120,34,44,120,33,46,120,32,47,120,31,49,121,30,50,122,30,51,123,29,52,123,29,53,125,28,55,125,28,56,126,27,57,127,28,58,128,28,59,129,27,60,129,27,61,131,27,62,132,27,63,133,28,64,134,27,65,135,27,66,136,27,68,137,27,69,138,25,71,136,22,73,134,21,74,133,20,76,131,17,78,129,16,79,128,15,81,126,14,82,125,10,84,123,10,85,122,9,87,120,8,88,119,7,89,118,6,91,117,4,92,115,4,94,114,4,95,114,3,96,112,1,98,111,1,99,110,0,100,109,0,101,108,0,103,107,0,104,106,0,105,105,0,107,104,0,108,101,0,110,100,0,111,99,0,112,98,0,114,96,0,115,95,0,116,93,0,118,92,0,119,90,0,120,89,0,121,88,0,123,86,0,124,85,0,125,83,0,127,82,0,128,80,0,129,79,0,131,77,0,132,75,0,133,73,0,134,72,0,136,70,0,137,68,0,138,66,0,139,65,0,141,64,0,142,63,0,143,61,0,145,60,0,146,60,0,147,58,0,149,57,0,150,56,0,151,55,0,153,53,0,154,52,0,155,51,0,157,50,0,158,48,0,159,47,0,160,45,0,162,44,0,163,42,0,164,41,0,165,39,0,167,36,0,168,34,0,169,31,0,170,23,0,169,8,9,170,0,20,171,0,29,172,0,35,173,0,40,174,0,45,175,0,48,176,0,52,177,0,55,178,0,59,179,0,61,180,0,64,181,0,66,182,0,68,183,0,71,184,0,73,185,0,76,186,0,78,187,0,79,188,0,81,189,0,83,190,0,85,191,0,87,192,0,92,193,0,99,193,0,106,193,0,114,193,0,119,194,0,125,194,0,130,194,0,135,195,0,140,195,0,145,195,0,149,196,0,153,196,0,157,197,0,161,197,0,165,197,0,169,198,0,172,198,0,176,199,0,180,199,0,184,199,0,186,200,0,190,201,0,193,201,0,197,201,0,200,202,0,201,201,24,203,202,51,206,202,65,207,203,77,209,203,87,212,203,95,213,204,103,215,205,109,218,205,116,219,206,121,221,207,127,223,207,132,226,207,138,227,208,143,229,209,147,231,209,151,232,210,155,235,211,159,237,211,164,238,212,168,240,212,172,243,213,175,243,214,179,245,214,183,248,215,186,248,216,189,248,218,193,247,219,195,247,220,198,247,222,201,248,223,204,247,224,206,247,226,209,247,227,211,247,229,214,247,230,216,247,231,218,247,232,220,248,234,224,247,235,225,247,236,229,247,238,231,247,239,232,248,240,235,248,242,237,247,243,239,248,244,241,248,246,244,248,247,246,248,248,248,249,249,249,251,251,251,252,252,252,253,253,253,254,254,254,255,255,255])},{}],64:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){function n(t,e){var n=t[0],r=t[1],i=t[2],o=e[0]-n,a=e[1]-r,u=e[2]-i;return function(t,e){return[Math.floor(n+t*o),Math.floor(r+t*a),Math.floor(i+t*u),e]}}var o=e.exports={},a=Math.PI,u=2*a,c=t("../micro"),s=t("chroma-js");o.sinebowColor=function(t,e){var n=t*u*5/6;n*=.75;var r=Math.sin(n),i=Math.cos(n),o=Math.floor(255*Math.max(0,-i)),a=Math.floor(255*Math.max(r,0)),c=Math.floor(255*Math.max(i,0,-r));return[o,a,c,e]};var l=.45,f=n(o.sinebowColor(1,0),[255,255,255]);o.extendedSinebowColor=function(t,e){return t<=l?o.sinebowColor(t/l,e):f((t-l)/(1-l),e)},o.segmentedColorScale=function(t){for(var e=[],r=[],i=[],o=0;o<t.length-1;o++)e.push(t[o+1][0]),r.push(n(t[o][1],t[o+1][1])),i.push([t[o][0],t[o+1][0]]);return function(t,n){var o=void 0;for(o=0;o<e.length-1&&!(t<=e[o]);o++);var a=i[o];return r[o](c.proportion(t,a[0],a[1]),n)}},o.scalesFrom=function(t){for(var e=[],n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e.push(s.scale([s(r.color),s(i.color)]).domain([r.p,i.p]).mode(r.mode))}return e},o.smooth=function(t,e,n){var r=t[e],i=t[e+1],o=r.domain()[0],a=i.domain()[1],u=r.domain()[1],c=n[0],l=n[1],f=s.scale([r(o),r(c)]).domain([o,c]).mode(r.mode()),h=s.scale(s.bezier([r(c),r(u),i(l)])).domain([c,l]).mode(r.mode()),d=s.scale([i(l),i(a)]).domain([l,a]).mode(i.mode());return[].concat(t.slice(0,e),[f,h,d],t.slice(e+2))},o.fillRange=function(t,e,n,r){for(var i=e[0],o=e[1],a=(o-i)/(t.length/4-1),u=n[0],s=n[1],l=Math.round((u-i)/a),f=Math.round((s-i)/a),h=l;h<f+1;h++){var d=r(i+h*a),p=4*h;t[p]=d[0],t[p+1]=d[1],t[p+2]=d[2],t[p+3]=c.coalesce(d[3],255)}},o.quantize=function(t,e,n){var r=new Uint8Array(4*n);return e.forEach(function(e){o.fillRange(r,t,e.domain(),function(t){return e(t).rgba().map(Math.round)})}),r},o.buildScaleFromChromaScales=function(t,e,n){var r=o.quantize(t,e,n);return o.buildScale(t,r)},o.buildScaleFromSegments=function(t,e,n){var r=o.segmentedColorScale(e),i=new Uint8Array(4*n);return o.fillRange(i,t,t,r),o.buildScale(t,i)},o.buildScale=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},a=n(t[0]),u=n(t[1]),s=e.length/4-1,l=s/(u-a),f=c.arrayHashCode(e,1e3),h=(u-a)/(2*s),d=a-h,p=u+h,v=[d,p-d];return new(function(){function u(){r(this,u)}return i(u,[{key:"indexOf",value:function(t){var e=Math.round((n(t)-a)*l);return c.clamp(e,0,s)}},{key:"valueFor",value:function(t){return o(t/l+a)}},{key:"rgba",value:function(t){var n=4*this.indexOf(t);return[e[n],e[n+1],e[n+2],e[n+3]]}},{key:"webgl",value:function(t){var r=t.context;return{shaderSource:function(){var t=n===Math.log?"\nfloat fmap(in float v) {\n    return log(v);\n}\n":"\nfloat fmap(in float v) {\n    return v;\n}\n";return[t,"\nuniform vec2 u_Range;  // [min, size]\nuniform lowp sampler2D u_Palette;\nuniform lowp float u_Alpha;\n\nlowp vec4 colorize(in float v) {\n    vec2 st = vec2((fmap(v) - u_Range.x) / u_Range.y, 0.5);\n    lowp vec4 color = texture2D(u_Palette, st);\n    lowp float alpha = (1.0 - step(7e37, v)) * u_Alpha;\n    return vec4(color.rgb * alpha, alpha);  // premultiply alpha\n}\n"]},textures:function(){return{color_scale:{format:r.RGBA,type:r.UNSIGNED_BYTE,width:e.length/4,height:1,data:e,hash:f}}},uniforms:function(){return{u_Range:v,u_Palette:"color_scale",u_Alpha:1}}}}},{key:"colors",get:function(){return e}},{key:"bounds",get:function(){return t}}]),u}())}}()},{"../micro":57,"chroma-js":2}],65:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=t("./palette"),r=[1e-9,1e-6],i=r.map(Math.log),o=[{color:[8,29,88],mode:"lch",p:i[0]},{color:[37,52,148],mode:"lch",p:Math.log(4e-9)},{color:[34,94,168],mode:"lch",p:Math.log(6e-9)},{color:[29,145,192],mode:"lch",p:Math.log(8e-9)},{color:[65,182,196],mode:"lch",p:Math.log(1e-8)},{color:[127,205,187],mode:"lch",p:Math.log(1.6e-8)},{color:[199,233,180],mode:"lch",p:Math.log(2.4e-8)},{color:[237,248,177],mode:"lch",p:Math.log(2.8e-8)},{color:[255,255,210],mode:"lch",p:Math.log(3.2e-8)},{color:[255,237,160],mode:"lch",p:Math.log(4.2e-8)},{color:[254,217,118],mode:"lch",p:Math.log(4.7e-8)},{color:[254,178,76],mode:"lch",p:Math.log(5.7e-8)},{color:[253,141,60],mode:"lch",p:Math.log(6.7e-8)},{color:[252,78,42],mode:"lch",p:Math.log(1.1e-7)},{color:[227,26,28],mode:"lch",p:Math.log(2.5e-7)},{color:[189,0,38],mode:"lch",p:Math.log(5e-7)},{color:[128,0,38],mode:"lch",p:i[1]}],a=n.scalesFrom(o);a=n.smooth(a,7,[Math.log(3e-8),Math.log(3.5e-8)]);var u=n.quantize(i,a,e);return n.buildScale(r,u,Math.log,Math.exp)}},{"./palette":64}],66:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=t("./palette"),r=[1e-9,1e-6],i=r.map(Math.log),o=[{color:[8,29,88],mode:"lch",p:i[0]},{color:[37,52,148],mode:"lch",p:Math.log(4e-9)},{color:[34,94,168],mode:"lch",p:Math.log(6e-9)},{color:[29,145,192],mode:"lch",p:Math.log(8e-9)},{color:[65,182,196],mode:"lch",p:Math.log(1e-8)},{color:[127,205,187],mode:"lch",p:Math.log(1.6e-8)},{color:[199,233,180],mode:"lch",p:Math.log(2.4e-8)},{color:[237,248,177],mode:"lch",p:Math.log(2.8e-8)},{color:[255,255,210],mode:"lch",p:Math.log(3.2e-8)},{color:[255,237,160],mode:"lch",p:Math.log(4.2e-8)},{color:[254,217,118],mode:"lch",p:Math.log(4.7e-8)},{color:[254,178,76],mode:"lch",p:Math.log(5.7e-8)},{color:[253,141,60],mode:"lch",p:Math.log(6.7e-8)},{color:[252,78,42],mode:"lch",p:Math.log(1.1e-7)},{color:[227,26,28],mode:"lch",p:Math.log(2.5e-7)},{color:[189,0,38],mode:"lch",p:Math.log(5e-7)},{color:[128,0,38],mode:"lch",p:i[1]}],a=n.scalesFrom(o);a=n.smooth(a,7,[Math.log(3e-8),Math.log(3.5e-8)]);var u=n.quantize(i,a,e);return n.buildScale(r,u,Math.log,Math.exp)}},{"./palette":64}],67:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=t("./palette"),r=t("chroma-js"),i=[0,150],o=[{color:r("#719aa9").darker(30),mode:"lch",p:i[0]},{color:"aliceblue",mode:"lch",p:2},{color:r("navy").brighter(10),mode:"lch",p:15},{color:"gold",mode:"lch",p:100},{color:"white",mode:"lch",p:i[1]}],a=n.scalesFrom(o);return a=n.smooth(a,0,[1,3]),a=n.smooth(a,2,[13,17]),n.buildScaleFromChromaScales(i,a,e)}},{"./palette":64,"chroma-js":2}],68:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,n=t("./palette"),r=[1e-13,8.88e-7],i=r.map(Math.log),o=[{color:[134,134,107],mode:"lch",p:i[0]},{color:[144,144,117],mode:"lch",p:Math.log(1e-12)},{color:[255,255,224],mode:"lch",p:Math.log(7e-11)},{color:[0,0,128],mode:"lab",p:Math.log(1.9e-7)},{color:[23,20,18],mode:"lab",p:i[1]}],a=n.scalesFrom(o);a=n.smooth(a,1,[Math.log(5e-11),Math.log(9e-11)]),a=n.smooth(a,3,[Math.log(1e-7),Math.log(3e-7)]);var u=n.quantize(i,a,e);return n.buildScale(r,u,Math.log,Math.exp)}},{"./palette":64}],69:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=t("./palette"),r=t("chroma-js"),i=[.002,2.5],o=i.map(Math.log),a=r.scale(r.cubehelix()).domain(o),u=n.quantize(o,[a],e);return n.buildScale(i,u,Math.log,Math.exp)}},{"./palette":64,"chroma-js":2}],70:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=t("./palette"),r=[193,328],i=[[193,[37,4,42]],[206,[41,10,130]],[219,[81,40,40]],[233.15,[192,37,149]],[255.372,[70,215,215]],[273.15,[21,84,187]],[275.15,[24,132,14]],[291,[247,251,59]],[298,[235,167,21]],[311,[230,71,39]],[328,[88,27,67]]];return n.buildScaleFromSegments(r,i,e)}},{"./palette":64}],71:[function(t,e,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=t("./palette"),r=[0,100],i=new Uint8Array(4*e);return n.fillRange(i,[0,1],[0,1],n.extendedSinebowColor),n.buildScale(r,i)}},{"./palette":64}],72:[function(t,e,n){"use strict";var r=t("../micro"),i=t("../utc"),o=t("../grid/rectangular"),a=t("../interpolate/nearest"),u=t("../interpolate/bilinear"),c=t("./util"),s=t("./strings");e.exports=function(t){Array.isArray(t)&&(t=c.munge(t,["u","v"],["time","level","lat","lon"]));var e=t,n=e.header,l=n.variables,f=l.U||l.u||l["u-component_of_wind_isobaric"]||l["u-component_of_wind_height_above_ground"],h=l.V||l.v||l["v-component_of_wind_isobaric"]||l["v-component_of_wind_height_above_ground"],d=l[f.dimensions[0]],p=l[f.dimensions[2]],v=l[f.dimensions[3]],g=r.merge(e.blocks[f.data.block],e.blocks[h.data.block]),m=o(v.sequence,p.sequence),y=u.vector(m,g);return{sourceHTML:s.gfs,date:function(){return i.parts(d.data[0])},grid:function(){return m},field:function(){return{type:"vector",valueAt:function(t){var e=2*t,n=g[e],r=g[e+1];return[n,r,Math.sqrt(n*n+r*r)]},nearest:a.vector(m,g),bilinear:u.vector(m,g)}},interpolate:function(t){return y(t)}}}},{"../grid/rectangular":49,"../interpolate/bilinear":50,"../interpolate/nearest":52,"../micro":57,"../utc":81,"./strings":76,"./util":77}],73:[function(t,e,n){"use strict";var r=t("underscore"),i=t("./gfs-wind"),o=t("./scalarProduct"),a=t("./strings");e.exports=function(t,e){function n(t,e){var n=t[2];return.5*e*n*n*n}function u(t){return n(h(t),v(t))}function c(t){return n(d(t),g(t))}function s(t){return n(p(t),m(t))}var l=i(t),f=o(e,/air_density/,a.gfs,["air_density"]),h=l.field().valueAt,d=l.field().nearest,p=l.field().bilinear,v=f.field().valueAt,g=f.field().nearest,m=f.field().bilinear;return r.extend(f,{field:function(){return{type:"scalar",valueAt:u,nearest:c,bilinear:s}},interpolate:function(t){return s(t)}})}},{"./gfs-wind":72,"./scalarProduct":75,"./strings":76,underscore:20}],74:[function(t,e,n){"use strict";var r=t("../micro"),i=t("../utc"),o=t("../grid/rectangular"),a=t("../interpolate/nearest"),u=t("../interpolate/bilinear"),c=t("./strings");e.exports=function(t){var e=t,n=e.header,s=n.variables,l=s.u,f=s.v,h=s[l.dimensions[0]],d=s[l.dimensions[2]],p=s[l.dimensions[3]],v=r.merge(e.blocks[l.data.block],e.blocks[f.data.block]),g=o(p.sequence,d.sequence),m=u.vector(g,v);return{sourceHTML:c.oscar,date:function(){return i.parts(h.data[0])},grid:function(){return g},field:function(){return{type:"vector",valueAt:function(t){var e=2*t,n=v[e],r=v[e+1];return[n,r,Math.sqrt(n*n+r*r)]},nearest:a.vector(g,v),bilinear:u.vector(g,v)}},interpolate:function(t){return m(t)}}}},{"../grid/rectangular":49,"../interpolate/bilinear":50,"../interpolate/nearest":52,"../micro":57,"../utc":81,"./strings":76}],75:[function(t,e,n){"use strict";var r=t("underscore"),i=t("./util"),o=t("../utc"),a=t("../grid/rectangular"),u=t("../interpolate/nearest"),c=t("../interpolate/bilinear");e.exports=function(t,e,n,s,l){Array.isArray(t)&&(t=i.munge(t,s)),t.blocks||(t=i.blockify(t,e));var f=t,h=f.header,d=h.variables,p=r.find(r.keys(d),function(t){return e.test(t)}),v=d[p],g=v.dimensions,m=d[g[0]],y=d[r.last(g,2)[0]],b=d[r.last(g,2)[1]],w=f.blocks[v.data.block];r.isFunction(l)&&l(w);var _=a(b.sequence,y.sequence),x={type:"scalar",valueAt:function(t){return w[t]},nearest:u.scalar(_,w),bilinear:c.scalar(_,w)};return{sourceHTML:n,date:function(){return o.parts(m.data[0])},grid:function(){return _},field:function(){return x},interpolate:function(t){return x.bilinear(t)}}}},{"../grid/rectangular":49,"../interpolate/bilinear":50,"../interpolate/nearest":52,"../utc":81,"./util":77,underscore:20}],76:[function(t,e,n){"use strict";var r=t("../micro"),i=r.isKioskMode()?"":" [<a href='about.html#co2' class='internal-link'>important note</a>]";e.exports={argo:"Argo",cams:"CAMS / Copernicus / EC + ECMWF",geos:"GEOS-5 / GMAO / NASA",geosAdjustedCO2:"GEOS-5 / GMAO / NASA"+i,gfs:"GFS / NCEP / US National Weather Service",hrrr:"HRRR / NCEP / US National Weather Service",oscar:"OSCAR / Earth & Space Research",rtgsst:"RTG-SST / NCEP / US National Weather Service",ww3:"WAVEWATCH III / NCEP / NWS"}},{"../micro":57}],77:[function(t,e,n){"use strict";var r=e.exports={},i=t("underscore"),o=t("../utc");r.munge=function(t,e,n){var r=t[0].header,i=o.add(o.parts(r.refTime),{hour:r.forecastTime}),a={time:{data:[o.printISO(i)]},lat:{sequence:{start:r.la1,delta:-r.dy,size:r.ny}},lon:{sequence:{start:r.lo1,delta:r.dx,size:r.nx}}},u=[];return e.forEach(function(e,r){a[e]={dimensions:n||["time","lat","lon"],data:{block:r}},u[r]=new Float32Array(t[r].data)}),{header:{variables:a},blocks:u}},r.blockify=function(t,e){var n=t.variables,r=[];return i.keys(n).forEach(function(t){if(e.test(t)){var i=n[t];r.push(new Float32Array(i.data)),i.data={block:r.length-1}}}),{header:t,blocks:r}}},{"../utc":81,underscore:20}],78:[function(t,e,n){"use strict";var r=Math.PI,i=2*r,o=i/360,a=t("../utc"),u=t("../grid/rectangular"),c=t("../interpolate/nearest"),s=t("../interpolate/bilinear"),l=t("./strings");e.exports=function(t){for(var e=t,n=e.header,r=n.variables,i=r.Primary_wave_direction_surface,f=r.Primary_wave_mean_period_surface,h=r[i.dimensions[0]],d=r[i.dimensions[1]],p=r[i.dimensions[2]],v=e.blocks[i.data.block],g=e.blocks[f.data.block],m=new Float32Array(2*v.length),y=0;y<v.length;y++){var b=2*y,w=v[y]*o,_=g[y];w<7e37&&_<7e37?(m[b]=-_*Math.sin(w),m[b+1]=-_*Math.cos(w)):m[b]=m[b+1]=7e37}var x=u(p.sequence,d.sequence),k=s.vector(x,m);return{sourceHTML:l.ww3,date:function(){return a.parts(h.data[0])},grid:function(){return x},field:function(){return{type:"vector",valueAt:function(t){var e=2*t,n=m[e],r=m[e+1];return[n,r,Math.sqrt(n*n+r*r)]},nearest:c.vector(x,m),bilinear:s.vector(x,m)}},interpolate:function(t){return k(t)}}}},{"../grid/rectangular":49,"../interpolate/bilinear":50,"../interpolate/nearest":52,"../utc":81,"./strings":76}],79:[function(t,e,n){"use strict";e.exports=function(e){function n(t){var e=P.isDevMode()?"":"https://gaia.nullschool.net",n=e+t,r=P.siteInstance();return r?n+"?"+r:n}function r(t){return"https://earth.nullschool.net"+t}function i(t){return j.extend({descriptionHTML:"",paths:[],date:function(){return null},navigate:function(t){return a(this.date(),t)},navigateTo:function(t){return o(t)},load:function(t){function e(t){return/\.epak([\/?#]|$)/.test(t)?P.loadEpak(t):P.loadJson(t)}var n=this;return A.map(this.paths,e).then(function(e){return t.requested?null:j.extend(n,n.builder.apply(n,e))})},alpha:{single:160,animated:112}},t)}function o(t,e){var n="current"===t?j.pick(R.parts(N.now()),"year","month","day","hour"):j.clone(t);return n.hour=3*Math.floor(n.hour/3),n.minute=0,e&&(n=R.normalize(R.add(n,e))),n}function a(t,e){var n=3*(e>1?8:e<-1?-8:e);return R.add(t,{hour:n})}function u(t,e){if("current"===t.date)return{dir:"current",stamp:"current",date:o(t.date,e)};var n=o(t.date,e);return{dir:R.print(n,"{yyyy}/{MM}/{dd}"),stamp:R.print(n,"{hh}{mm}"),date:n}}function c(t,e,n,r){var i=u(t),o=R.date(i.date),a=o>=new Date("2014/11/24")?".epak":".json",c="0.5";o<new Date("2015/03/11")||P.isEmbeddedInIFrame()&&!P.isKioskMode()?c="1.0":o>new Date("2016/06/22")&&t.hd&&(c="0.25");var s=[i.stamp,e,n,r,"gfs",c].filter(P.isValue).join("-")+a;return z(i.dir+"/"+s,o)}function s(t,e,n){var r=u(t,n),i=R.date(r.date),o=[r.stamp,e,"geos.epak"].join("-");return I(r.dir+"/"+o,i)}function l(t,e){var n="current"===t?R.parts(N.now()):t,r=n.year,i=n.month,o=n.day,a=n.hour;return{year:r,month:i,day:o,hour:Math.floor(a/e)*e,minute:0}}function f(t,e,n){var r=(n>1?8:n<-1?-8:n)*e;return R.add(t,{hour:r})}function h(t,e,r){var i=l(t.date,r),o="current"===t.date,a=o?"current":R.print(i,"{yyyy}/{MM}/{dd}"),u=o?"current":R.print(i,"{hh}{mm}");return n("/data/cams/"+a+"/"+u+"-"+e+"-cams.epak")}function d(t,e,n,r){var i=u(t),o=R.date(i.date),a=[i.stamp,e,n,r,"wave","30m"].filter(P.isValue).join("-")+".epak";return U(i.dir+"/"+a,o)}function p(t,e,n){if(n=+n||0,"current"===e)return t[t.length-1+n];var r=R.print(e,"{yyyy}{MM}{dd}"),i=j.sortedIndex(t,r);return i=0===(t[i]||"").indexOf(r)?i:i-1,t[i+n]}function v(t,e){var n=p(t,e);return n?R.parse(n,/(\d{4})(\d\d)(\d\d)/):null}function g(t,e,n){var r=p(t,e,n>1?6:n<-1?-6:n);return r?R.parse(r,/(\d{4})(\d\d)(\d\d)/):null}function m(t,e){var n=p(t,e.date);return n?q(n):null}function y(){return P.loadJsonOnce(q("oscar-catalog.json"))}function b(t){var e;if("current"===t){var n=j.pick(R.parts(N.now()),"year","month","day");e=R.add(n,{day:-1})}else e=j.clone(t);return e}function w(t,e){var n=e>1?5:e<-1?-5:e;return R.add(t,{day:n})}function _(t,e,n,r){var i=R.date(b(t.date)),o="current"===t.date?"current":R.print(t.date,"{yyyy}/{MM}"),a="current"===o?"current":R.print(t.date,"{yyyy}{MM}{dd}"),u=[a,e,n,r,"rtg","0.5"].filter(P.isValue).join("-")+".epak";return D(o+"/"+u,i)}function x(t){return"surface"===t.surface?"Surface":P.capitalize(t.level)}function k(t){return"surface"===t.surface?"地上":P.capitalize(t.level)}function E(t){return function(e){var n={};return j.each(t,function(t,r){n[r]=t[e]||t.en||t}),n}}function M(t){return t[P.siteLangCode()]||t.en}var T={},S=t("./d3"),A=t("when"),j=t("underscore"),P=t("./micro"),R=t("./utc"),N=t("./clock"),C=t("./product/scalarProduct"),O=t("./product/strings"),F=t("./palette/palette"),L=new Date("2016-02-20");T.gaia=n;var I=function(t,e){return e<L?r("/data/geos/"+t):n("/data/geos/"+t)},z=function(t,e){return e<L?r("/data/weather/"+t):n("/data/gfs/"+t)},q=function(t){return n("/data/oscar/"+t)},D=function(t,e){return e<L?r("/data/ocean/"+t):n("/data/rtgsst/"+t)},U=function(t,e){return e<L?r("/data/ocean/"+t):n("/data/ww3/"+t)},G=function(t){return n("/data/argo/"+t)},H=P.isKioskMode()?"":"(<a href='about.html#aot' class='internal-link'>AOT</a>)",B={wind:{matchesPrimary:function(){return!0},matchesOverlay:j.matches({overlayType:"wind"}),create:function(e){return i({type:"wind",descriptionHTML:E({name:{en:"Wind",ja:"風速"},qualifier:{en:" @ "+x(e),ja:"＠"+k(e)}}),paths:[c(e,"wind",e.surface,e.level)],date:function(){return o(e.date)},builder:function(e){return t("./product/gfs-wind.js")(e)},units:[{label:"km/h",conversion:function(t){return 3.6*t},precision:0},{label:"m/s",conversion:function(t){return t},precision:1},{label:"kn",conversion:function(t){return 1.943844*t},precision:0},{label:"mph",conversion:function(t){return 2.236936*t},precision:0}],scale:t("./palette/wind.js")(),particles:{velocityScale:.01,maxIntensity:15}})}},temp:{matchesOverlay:j.matches({overlayType:"temp"}),create:function(e){return i({type:"temp",descriptionHTML:E({name:{en:"Temp",ja:"気温"},qualifier:{en:" @ "+x(e),ja:" @ "+k(e)}}),paths:[c(e,"temp",e.surface,e.level)],date:function(){return o(e.date)},builder:function(t){return C(t,/Temperature/,O.gfs,["Temperature"])},units:[{label:"°C",conversion:function(t){return t-273.15},precision:1},{label:"°F",conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:t("./palette/temp.js")()})}},relative_humidity:{matchesOverlay:j.matches({overlayType:"relative_humidity"}),create:function(t){return i({type:"relative_humidity",
descriptionHTML:E({name:{en:"Relative Humidity",ja:"相対湿度"},qualifier:{en:" @ "+x(t),ja:" @ "+k(t)}}),paths:[c(t,"relative_humidity",t.surface,t.level)],date:function(){return o(t.date)},builder:function(t){return C(t,/Relative_humidity/,O.gfs)},units:[{label:"%",conversion:function(t){return t},precision:0}],scale:F.buildScaleFromSegments([0,100],[[0,[230,165,30]],[25,[120,100,95]],[60,[40,44,92]],[75,[21,13,193]],[90,[75,63,235]],[100,[25,255,255]]],1e3)})}},air_density:{matchesOverlay:j.matches({overlayType:"air_density"}),create:function(t){return i({type:"air_density",descriptionHTML:E({name:{en:"Air Density",ja:"空気密度"},qualifier:{en:" @ "+x(t),ja:" @ "+k(t)}}),paths:[c(t,"air_density",t.surface,t.level)],date:function(){return o(t.date)},builder:function(t){return C(t,/air_density/,O.gfs)},units:[{label:"kg/m³",conversion:function(t){return t},precision:2}],scale:F.buildScaleFromSegments([0,1.5],[[0,[0,0,0]],[1.5,[255,255,255]]],10)})}},wind_power_density:{matchesOverlay:j.matches({overlayType:"wind_power_density"}),create:function(e){var n=B.wind.create(e),r=B.air_density.create(e);return i({type:"wind_power_density",descriptionHTML:E({name:{en:"Instant Wind Power Density",ja:"風力エネルギー密度"},qualifier:{en:" @ "+x(e),ja:" @ "+k(e)}}),paths:[n.paths[0],r.paths[0]],date:function(){return o(e.date)},builder:function(e,n){return t("./product/gfs-wpd.js")(e,n)},units:[{label:"kW/m<sup>2</sup>",tooltip:"kW/m²",conversion:function(t){return t/1e3},precision:1},{label:"W/m<sup>2</sup>",tooltip:"W/m²",conversion:function(t){return t},precision:0}],scale:F.buildScaleFromSegments([0,8e4],[[0,[15,4,96]],[250,[30,8,180]],[1e3,[121,102,2]],[2e3,[118,161,66]],[4e3,[50,102,219]],[8e3,[19,131,193]],[16e3,[59,204,227]],[64e3,[241,1,45]],[8e4,[243,0,241]]],1e4)})}},misery_index:{matchesOverlay:j.matches({overlayType:"misery_index"}),create:function(t){return i({type:"misery_index",descriptionHTML:E({name:{en:"Misery (Wind Chill & Heat Index)",ja:"体感温度"},qualifier:{en:" @ "+x(t),ja:" @ "+k(t)}}),paths:[c(t,"misery_index")],date:function(){return o(t.date)},builder:function(t){return C(t,/misery_index/,O.gfs)},units:function(){var t=M({en:" (feels like)",ja:"（体感温度）"});return[{label:"°C"+t,conversion:function(t){return t-273.15},precision:1},{label:"°F"+t,conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K"+t,conversion:function(t){return t},precision:1}]}(),scale:F.buildScaleFromSegments([236,332],[[241,[255,255,255]],[245.5,[6,82,255]],[250,[6,82,255]],[258,[46,131,255]],[266,[46,131,255]],[280,[0,0,0]],[300,[0,0,0]],[305,[247,20,35]],[309.5,[247,20,35]],[314,[245,210,5]],[320.5,[245,210,5]],[327,[255,255,255]]],1e3)})}},total_cloud_water:{matchesOverlay:j.matches({overlayType:"total_cloud_water"}),create:function(t){return i({type:"total_cloud_water",descriptionHTML:E({name:{en:"Total Cloud Water",ja:"雲水量"},qualifier:""}),paths:[c(t,"total_cloud_water")],date:function(){return o(t.date)},builder:function(t){return C(t,/Cloud_water/,O.gfs,["Cloud_water"])},units:[{label:"kg/m<sup>2</sup>",tooltip:"kg/m²",conversion:function(t){return t},precision:3}],scale:F.buildScaleFromSegments([0,1],[[0,[5,5,89]],[.2,[170,170,230]],[1,[255,255,255]]],1e3)})}},total_precipitable_water:{matchesOverlay:j.matches({overlayType:"total_precipitable_water"}),create:function(t){return i({type:"total_precipitable_water",descriptionHTML:E({name:{en:"Total Precipitable Water",ja:"可降水量"},qualifier:""}),paths:[c(t,"total_precipitable_water")],date:function(){return o(t.date)},builder:function(t){return C(t,/Precipitable_water/,O.gfs,["Precipitable_water"])},units:[{label:"kg/m<sup>2</sup>",tooltip:"kg/m²",conversion:function(t){return t},precision:3}],scale:F.buildScaleFromSegments([0,70],[[0,[230,165,30]],[10,[120,100,95]],[20,[40,44,92]],[30,[21,13,193]],[40,[75,63,235]],[60,[25,255,255]],[70,[150,255,255]]],1e3)})}},mean_sea_level_pressure:{matchesOverlay:j.matches({overlayType:"mean_sea_level_pressure"}),create:function(t){return i({type:"mean_sea_level_pressure",descriptionHTML:E({name:{en:"Mean Sea Level Pressure",ja:"海面更正気圧"},qualifier:""}),paths:[c(t,"mean_sea_level_pressure")],date:function(){return o(t.date)},builder:function(t){return C(t,/Pressure_reduced_to_MSL/,O.gfs,["Pressure_reduced_to_MSL"])},units:[{label:"hPa",conversion:function(t){return t/100},precision:0},{label:"mmHg",conversion:function(t){return t/133.322387415},precision:0},{label:"inHg",conversion:function(t){return t/3386.389},precision:1}],scale:F.buildScaleFromSegments([92e3,105e3],[[92e3,[40,0,0]],[95e3,[187,60,31]],[96500,[137,32,30]],[98e3,[16,1,43]],[100500,[36,1,93]],[101300,[241,254,18]],[103e3,[228,246,223]],[105e3,[255,255,255]]],1e3)})}},precip_3hr:{matchesOverlay:j.matches({overlayType:"precip_3hr"}),create:function(e){return i({type:"precip_3hr",descriptionHTML:E({name:{en:"Next 3-hr Precip Accumulation",ja:"3時間の降水量"},qualifier:""}),paths:[c(e,"precip_3hr")],date:function(){return o(e.date)},builder:function(t){return C(t,/precip_accumulation_3hr/,O.gfs)},units:[{label:"mm",tooltip:"mm",conversion:function(t){return t},precision:1},{label:"in",tooltip:"in",conversion:function(t){return t/25.4},precision:2},{label:"kg/m<sup>2</sup>",tooltip:"kg/m²",conversion:function(t){return t},precision:1}],alpha:{single:160,animated:160},scale:t("./palette/precip")()})}},cape:{matchesOverlay:j.matches({overlayType:"cape"}),create:function(e){return i({type:"cape",descriptionHTML:E({name:{en:"CAPE (Surface)",ja:"対流有効位置エネルギー（地上）"},qualifier:""}),paths:[c(e,"cape")],date:function(){return o(e.date)},builder:function(t){return C(t,/Convective_available_potential_energy_surface/,O.gfs)},units:[{label:"J/kg",tooltip:"J/kg",conversion:function(t){return t},precision:0}],alpha:{single:160,animated:140},scale:t("./palette/cape")()})}},co2:{matchesOverlay:j.matches({overlayType:"co2"}),create:function(e){return i({type:"co2",descriptionHTML:E({name:{en:"Carbon Dioxide Mixing Ratio",ja:"二酸化炭素混合比"},qualifier:""}),paths:[s(e,"co2")],date:function(){return o(e.date)},builder:function(t){return C(t,/CO2CL/,O.geos)},units:[{label:"µmol/mol",conversion:function(t){return 1e6*t},precision:1}],alpha:{single:160,animated:160},scale:t("./palette/co2")()})}},cosc:{matchesOverlay:j.matches({overlayType:"cosc"}),create:function(e){return i({type:"cosc",descriptionHTML:E({name:{en:"Carbon Monoxide Conc.",ja:"一酸化炭素濃度"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[s(e,"cosc")],date:function(){return o(e.date)},builder:function(t){return C(t,/COSC/,O.geos)},units:[{label:"ppbv",conversion:function(t){return t},precision:0},{label:"ppmv",conversion:function(t){return t/1e3},precision:2}],alpha:{single:160,animated:140},scale:t("./palette/cosc")()})}},so2smass:{matchesOverlay:j.matches({overlayType:"so2smass"}),create:function(e){return i({type:"so2smass",descriptionHTML:E({name:{en:"Sulfur Dioxide Mass",ja:"二酸化硫黄質量"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[s(e,"so2smass")],date:function(){return o(e.date)},builder:function(t){return C(t,/SO2SMASS/,O.geos)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:2}],alpha:{single:160,animated:140},scale:t("./palette/so2smass")()})}},duexttau:{matchesOverlay:j.matches({overlayType:"duexttau"}),create:function(e){return i({type:"duexttau",descriptionHTML:E({name:{en:"Dust Extinction "+H,ja:"粒子消散係数 "+H},qualifier:""}),paths:[s(e,"duexttau")],date:function(){return o(e.date)},builder:function(t){return C(t,/DUEXTTAU/,O.geos)},units:[{label:"τ",conversion:function(t){return t},precision:4}],alpha:{single:160,animated:140},scale:t("./palette/duexttau")()})}},suexttau:{matchesOverlay:j.matches({overlayType:"suexttau"}),create:function(e){return i({type:"suexttau",descriptionHTML:E({name:{en:"Sulfate Extinction "+H,ja:"硫酸塩消散係数 "+H},qualifier:""}),paths:[s(e,"suexttau")],date:function(){return o(e.date)},builder:function(t){return C(t,/SUEXTTAU/,O.geos)},units:[{label:"τ",conversion:function(t){return t},precision:3}],alpha:{single:160,animated:140},scale:t("./palette/suexttau")()})}},co2sc:{matchesOverlay:j.matches({overlayType:"co2sc"}),create:function(e){var n=o(e.date,{minute:90}),r=R.date({year:2017,month:1,day:24,hour:4,minute:30}),u=R.date(n)<r,c=u?32:0;return i({type:"co2sc",descriptionHTML:E({name:{en:"Carbon Dioxide Concentration",ja:"二酸化炭素濃度"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[s(e,"co2sc",{minute:90})],date:function(){return n},navigate:function(t){return a(this.date(),t)},navigateTo:function(t){return o(t,{minute:90})},builder:function(t){return C(t,/CO2SC/,u?O.geosAdjustedCO2:O.geos,null,function(t){for(var e=0;e<t.length;e++)t[e]+=c})},units:[{label:"ppmv",conversion:function(t){return t},precision:0}],alpha:{single:200,animated:150},scale:t("./palette/co2sc")(u?-8:0)})}},currents:{matchesPrimary:function(){var t=j.matches({surface:"surface",level:"currents"}),e=j.matches({param:"argo",surface:"pressure"});return function(n){return t(n)||e(n)}}(),matchesOverlay:j.matches({overlayType:"currents"}),create:function(e){return A(y()).then(function(n){return i({type:"currents",descriptionHTML:E({name:{en:"Ocean Currents",ja:"海流"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[m(n,e)],date:function(){return v(n,e.date)},navigate:function(t){return g(n,this.date(),t)},navigateTo:function(t){return g(n,t,0)},builder:function(e){return t("./product/oscar.js")(e)},units:[{label:"m/s",conversion:function(t){return t},precision:2},{label:"km/h",conversion:function(t){return 3.6*t},precision:1},{label:"kn",conversion:function(t){return 1.943844*t},precision:1},{label:"mph",conversion:function(t){return 2.236936*t},precision:1}],scale:F.buildScaleFromSegments([0,1.5],[[0,[10,25,68]],[.15,[10,25,250]],[.4,[24,255,93]],[.65,[255,233,102]],[1,[255,233,15]],[1.5,[255,15,15]]],1e3),particles:{velocityScale:1/7,maxIntensity:.7}})})}},primary_waves:{matchesPrimary:j.matches({param:"ocean",surface:"primary",level:"waves"}),matchesOverlay:j.matches({overlayType:"primary_waves"}),create:function(e){return i({type:"primary_waves",descriptionHTML:E({name:{en:"Peak Wave Period",ja:"ピーク波周期"},qualifier:""}),paths:[d(e,"primary")],date:function(){return o(e.date)},builder:function(e){return t("./product/ww3-primary")(e)},units:[{label:"sec",conversion:function(t){return t},precision:1}],scale:F.buildScaleFromSegments([0,25],[[0,[0,0,0]],[25,[21,255,255]]],1e3),particles:{velocityScale:1/612,maxIntensity:12,waves:!0}})}},sea_surface_temp:{matchesOverlay:j.matches({overlayType:"sea_surface_temp"}),create:function(t){return i({type:"sea_surface_temp",descriptionHTML:E({name:{en:"Sea Surface Temp",ja:"海面水温"},qualifier:""}),paths:[_(t,"sea_surface_temp")],date:function(){return b(t.date)},navigate:function(t){return w(this.date(),t)},navigateTo:function(t){return w(t,0)},builder:function(t){return C(t,/Temperature_surface_sparse/,O.rtgsst)},units:[{label:"°C",conversion:function(t){return t-273.15},precision:1},{label:"°F",conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:F.buildScaleFromSegments([270,304.65],[[270,[255,255,255]],[271.25,[255,255,255]],[271.3,[15,4,168]],[273.15,[15,54,208]],[273.25,[15,54,188]],[275.65,[15,4,168]],[281.65,[24,132,14]],[291.15,[247,251,59]],[295,[235,167,0]],[299.65,[245,0,39]],[303,[87,17,0]],[304.65,[238,0,242]]],1e3)})}},sea_surface_temp_anomaly:{matchesOverlay:j.matches({overlayType:"sea_surface_temp_anomaly"}),create:function(t){return i({type:"sea_surface_temp_anomaly",descriptionHTML:E({name:{en:"SST Anomaly",ja:"海面水温異常"},qualifier:""}),paths:[_(t,"sea_surface_temp_anomaly")],date:function(){return b(t.date)},navigate:function(t){return w(this.date(),t)},navigateTo:function(t){return w(t,0)},builder:function(t){return C(t,/Temperature_surface_anomaly_sparse/,O.rtgsst)},units:[{label:"°C",conversion:function(t){return t},precision:1},{label:"°F",conversion:function(t){return 9*t/5},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:F.buildScaleFromSegments([-6,6],[[-6,[255,255,255]],[-3,[7,252,254]],[-1.5,[66,42,253]],[-.75,[34,55,134]],[0,[0,0,6]],[.75,[134,55,34]],[1.5,[253,14,16]],[3,[254,252,0]],[6,[255,255,255]]],1e3)})}},significant_wave_height:{matchesOverlay:j.matches({overlayType:"significant_wave_height"}),create:function(t){return i({type:"significant_wave_height",descriptionHTML:E({name:{en:"Significant Wave Height",ja:"有義波高"},qualifier:""}),paths:[d(t,"sig_height")],date:function(){return o(t.date)},builder:function(t){return C(t,/Significant_height/,O.ww3)},units:[{label:"m",conversion:function(t){return t},precision:2},{label:"ft",conversion:function(t){return 100*t/2.54/12},precision:1}],scale:F.buildScaleFromSegments([0,15],[[0,[8,29,88]],[1,[37,52,148]],[2,[34,94,168]],[3,[29,145,192]],[4,[65,182,196]],[5,[127,205,187]],[6,[199,233,180]],[7,[237,248,177]],[8,[254,204,92]],[10,[253,141,60]],[12,[240,59,32]],[14,[189,0,38]]],1e3)})}},pm1:{matchesOverlay:j.matches({overlayType:"pm1"}),create:function(e){var n=1;return i({type:"pm1",descriptionHTML:E({name:{en:"Particulate Matter < 1 µm",ja:"粒子径1µm以下（PM<sub>1</sub>）"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[h(e,"pm1",n)],date:function(){return l(e.date,n)},navigate:function(t){return f(this.date(),n,t)},navigateTo:function(t){return l(t,n)},builder:function(t){return C(t,/pm1/,O.cams)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:0}],alpha:{single:160,animated:140},scale:t("./palette/pmx")()})}},"pm2.5":{matchesOverlay:j.matches({overlayType:"pm2.5"}),create:function(e){var n=1;return i({type:"pm2.5",descriptionHTML:E({name:{en:"Particulate Matter < 2.5 µm",ja:"微小粒子状物質（PM<sub>2.5</sub>）"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[h(e,"pm2p5",n)],date:function(){return l(e.date,n)},navigate:function(t){return f(this.date(),n,t)},navigateTo:function(t){return l(t,n)},builder:function(t){return C(t,/pm2p5/,O.cams)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:0}],alpha:{single:160,animated:140},scale:t("./palette/pmX")()})}},pm10:{matchesOverlay:j.matches({overlayType:"pm10"}),create:function(e){var n=1;return i({type:"pm10",descriptionHTML:E({name:{en:"Particulate Matter < 10 µm",ja:"粒子径10µm以下（PM<sub>10</sub>）"},qualifier:{en:" @ Surface",ja:"＠地上"}}),paths:[h(e,"pm10",n)],date:function(){return l(e.date,n)},navigate:function(t){return f(this.date(),n,t)},navigateTo:function(t){return l(t,n)},builder:function(t){return C(t,/pm10/,O.cams)},units:[{label:"µg/m<sup>3</sup>",tooltip:"µg/m³",conversion:function(t){return 1e9*t},precision:0}],alpha:{single:160,animated:140},scale:t("./palette/pmx")()})}},off:{matchesOverlay:j.matches({overlayType:"off"}),create:function(){return null}}};return T.productsFor=function(t){var e=j.clone(t),n=null,r=null;j.values(B).forEach(function(t){j.isFunction(t.matchesPrimary)&&t.matchesPrimary(e)&&(n=t),j.isFunction(t.matchesOverlay)&&t.matchesOverlay(e)&&t!==n&&(r=t)});var i=[];return n&&i.push(n.create(e)),r&&i.push(r.create(e)),i.filter(P.isTruthy)},T.overlayTypes=function(){return S.set(Object.keys(B))},T.argoUrl=G,T}},{"./clock":41,"./d3":42,"./micro":57,"./palette/cape":58,"./palette/co2":59,"./palette/co2sc":60,"./palette/cosc":61,"./palette/duexttau":62,"./palette/palette":64,"./palette/pmX":65,"./palette/pmx":66,"./palette/precip":67,"./palette/so2smass":68,"./palette/suexttau":69,"./palette/temp.js":70,"./palette/wind.js":71,"./product/gfs-wind.js":72,"./product/gfs-wpd.js":73,"./product/oscar.js":74,"./product/scalarProduct":75,"./product/strings":76,"./product/ww3-primary":78,"./utc":81,underscore:20,when:38}],80:[function(t,e,n){"use strict";function r(t,e,n,r,o){function a(n){var i=n[0],a=n[1];if(i!==i||a!==a)return[NaN,NaN];var u=i*c,s=a*c,l=u-e,f=Math.sin(l),d=Math.cos(l),v=Math.sin(s),m=Math.cos(s),y=t*m,b=y*f,w=y*d*p-g*v,_=b*h+r,x=w*h+o;return[_,x]}function s(t){var n=t[0],i=t[1],a=(n-r)*h,c=(o-i)*h,s=a*a+c*c,l=1-s/d;if(l>=0){var f=Math.sqrt(l),v=e+Math.atan2(a,f*g-c*p),y=Math.asin(f*p+c*m);return[v*u,y*u]}return[NaN,NaN]}function l(t){return{shaderSource:function(){return"\nuniform vec2 u_translate;   // screen coords translation (x0, y0)\nuniform float u_R2;         // scale R, squared\nuniform float u_lon0;       // origin longitude\nuniform float u_sinlat0;    // sin(lat0)\nuniform float u_Rcoslat0;   // R * cos(lat0)\nuniform float u_coslat0dR;  // cos(lat0) / R\nuniform float u_flip;       // 1.0 if lat0 in range [-90deg, +90deg], otherwise -1.0\n\n// Handbook of Mathematical Functions, M. Abramowitz and I.A. Stegun, Ed. For input on range [-1, +1]\n// http://http.developer.nvidia.com/Cg/asin.html\nfloat arcsin(in float v) {\n    float x = abs(v);\n    float ret = -0.0187293;\n    ret *= x;\n    ret += 0.0742610;\n    ret *= x;\n    ret -= 0.2121144;\n    ret *= x;\n    ret += 1.5707288;\n    ret = PI / 2.0 - sqrt(1.0 - x) * ret;\n    return sign(v) * ret;\n}\n\n/** @returns [lon, lat] in radians for the specified point [x, y], or [7e37, 7e37] if the point is unprojectable. */\nvec2 invert(in vec2 point) {\n    vec2 pt = (point - u_translate) * u_flip;\n    float d = 1.0 - dot(pt, pt) / u_R2;\n    if (d >= 0.0) {  // CONSIDER: step() to remove branch... worth it?\n        float cosc = sqrt(d);\n        float lon = u_lon0 + atan(pt.x, cosc * u_Rcoslat0 - pt.y * u_sinlat0);  // u_lon0 + [-pi/2, pi/2]\n        float lat = arcsin(cosc * u_sinlat0 + pt.y * u_coslat0dR);              // [-π/2, π/2] [-90°, +90°]\n        return vec2(lon, lat);\n    }\n    return vec2(7e37);  // outside of projection\n}\n"},textures:function(){return{}},uniforms:function(){return{u_translate:y,u_R2:d,u_lon0:e,u_sinlat0:p,u_Rcoslat0:g,u_coslat0dR:m,u_flip:h}}}}var f=i.floorMod(n+90,360),h=180<f?-1:1;h<0?(n=270-f,e+=180):n=f-90,n*=c,e=(i.floorMod(e+180,360)-180)*c;var d=t*t,p=Math.sin(n),v=Math.cos(n),g=t*v,m=v/t,y=[r,o];return a.invert=s,a.webgl=l,a}var i=t("./../micro"),o=Math.PI,a=2*o,u=360/a,c=a/360;r.fromD3=function(t){var e=t.translate(),n=t.rotate();if(0!==n[2])throw new Error("γ rotation not supported");return r(t.scale(),-n[0],-n[1],e[0],e[1])},e.exports=r},{"./../micro":57}],81:[function(t,e,n){"use strict";!function(){function n(t,e){return void 0!==t&&null!==t?t:e}function r(t,e,n){var r=t.toString(),i=Math.max(e-r.length,0);return new Array(i+1).join(n||"0")+r}function i(t){return t=n(t,""),(u.isString(t)||u.isNumber(t))&&(t=new Date(t)),t}function o(t){return{year:t.year||0,month:t.month||0,day:t.day||0,hour:t.hour||0,minute:t.minute||0,second:t.second||0,milli:t.milli||0}}var a=e.exports={},u=t("underscore"),c=["year","month","day","hour","minute","second","milli"];a.parts=function(t){return t=i(t),{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),milli:t.getUTCMilliseconds()}},a.localParts=function(t){return t=i(t),{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),milli:t.getMilliseconds()}},a.date=function(t){var e=+n(t.year,0),r=new Date(Date.UTC(e,n(t.month,1)-1,n(t.day,1),n(t.hour,0),n(t.minute,0),n(t.second,0),n(t.milli,0)));return+r===+r&&0<=e&&e<=99&&r.setUTCFullYear(e),r},a.normalize=function(t){return a.parts(a.date(t))},a.add=function(t,e){var r=u.clone(t);return u.intersection(u.keys(e),c).forEach(function(t){r[t]=+n(r[t],0)+ +e[t]}),r},a.compare=function(t,e){var n=a.date(t).getTime();isNaN(n)&&(n=-(1/0));var r=a.date(e).getTime();return isNaN(r)&&(r=-(1/0)),n<r?-1:n>r?1:0},a.print=function(t,e){for(var n=[],i=0;i<e.length;i++){var o=e[i];if("{"===o){var a="";for(i++;i<e.length;i++){o=e[i];{if("}"===o){var u=NaN;switch(a[0]){case"y":u=+t.year;break;case"M":u=+t.month;break;case"d":u=+t.day;break;case"h":u=+t.hour;break;case"m":u=+t.minute;break;case"s":u=+t.second;break;case"S":u=+t.milli}u===u?n.push(r(u,a.length)):n.push("{",a,"}");break}a+=o}}}else n.push(o)}return n.join("")},a.parse=function(t,e,n){function r(t,e){e===e&&(i[t]=e)}var i={};n=n||{year:1,month:2,day:3,hour:4,minute:5,second:6,milli:7};var o=e.exec(t);return o&&(r("year",+o[n.year]),r("month",+o[n.month]),r("day",+o[n.day]),r("hour",+o[n.hour]),r("minute",+o[n.minute]),r("second",+o[n.second]),r("milli",+o[n.milli])),i},a.printISO=function(t){return a.date(t).toISOString()},a.largest=function(t){for(var e=0;e<c.length;e++)if(c[e]in t)return c[e]},a.smallest=function(t){for(var e=c.length-1;e>=0;e--)if(c[e]in t)return c[e]},a.chop=function(t,e){for(var n={},r=0;r<c.length;r++){var i=c[r];if(i in e&&(n[i]=e[i]),i===t)break}return n},a.carry=function(t){var e={};void 0!==t.year&&(e.year=t.year),void 0!==t.month&&(e.month=t.month);var r=a.largest(t),i=t.day,o=t.hour,u=t.minute,c=t.second,s=t.milli;return"milli"!==r&&(s>=1e3&&(c=n(c,0)+Math.floor(s/1e3),s%=1e3),"second"!==r&&(c>=60&&(u=n(u,0)+Math.floor(c/60),c%=60),"minute"!==r&&(u>=60&&(o=n(o,0)+Math.floor(u/60),u%=60),"hour"!==r&&o>=24&&(i=n(i,0)+Math.floor(o/24),o%=24)))),void 0!==i&&(e.day=i),void 0!==o&&(e.hour=o),void 0!==u&&(e.minute=u),void 0!==c&&(e.second=c),void 0!==s&&(e.milli=s),e},a.accumulate=function(t,e){var n=a.carry(o(e)),r=n.day;if("day"===t)return{day:r};if(r=24*r+n.hour,"hour"===t)return{hour:r};if(r=60*r+n.minute,"minute"===t)return{minute:r};if(r=60*r+n.second,"second"===t)return{second:r};if(r=1e3*r+n.milli,"milli"===t)return{milli:r};var i={};return i[t]=void 0,i},a.range=function(t,e,n){for(var r=[],i=t;a.compare(i,e)<=0;i=a.add(i,n))r.push(a.carry(i));return r},a.dayOfYear=function(t){var e=a.date(t),n=a.date({year:e.getUTCFullYear()});return Math.floor((e-n)/864e5)+1}}()},{underscore:20}]},{},[56]);
//# sourceMappingURL=build/js/bundle.min.js.map
